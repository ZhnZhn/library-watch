{"version":3,"file":"CrateApi.js","names":["_apiFn","require","PROVIDER_URL","API_URL","_isArr","Array","isArray","CrateApi","getRequestUrl","option","repo","sourceLink","crKey","_ref","requestType","checkResponse","json","json1","meta","extra_downloads","crErrMsg","_default","exports","default"],"sources":["../../src/api/CrateApi.js"],"sourcesContent":["import { crErrMsg } from './apiFn';\r\n\r\nconst PROVIDER_URL = \"https://crates.io\"\r\n, API_URL = `${PROVIDER_URL}/api/v1/crates`\r\n, _isArr = Array.isArray;\r\n\r\nconst CrateApi = {\r\n  getRequestUrl(option){\r\n    const { repo } = option;\r\n    option.sourceLink = `${PROVIDER_URL}/crates/${repo}`\r\n    return [\r\n      `${API_URL}/${repo}`,\r\n      `${API_URL}/${repo}/downloads`\r\n    ];\r\n  },\r\n\r\n  crKey({repo, requestType}){\r\n    return `${repo}_${requestType}`;\r\n  },\r\n\r\n  checkResponse(json, option){\r\n    if (option.json1) {\r\n      const { meta } = json || {}\r\n      , { extra_downloads } = meta || {};\r\n\r\n       if (!_isArr(extra_downloads)) {\r\n         throw crErrMsg(\r\n           \"Request Crate\",\r\n           \"Incorrect response\"\r\n         );\r\n       }\r\n       return true;\r\n    }\r\n    return true;    \r\n  }\r\n};\r\n\r\nexport default CrateApi\r\n"],"mappings":";;;;AAAA,IAAAA,MAAA,GAAAC,OAAA;AAEA,MAAMC,YAAY,GAAG,mBAAmB;EACtCC,OAAO,GAAG,GAAGD,YAAY,gBAAgB;EACzCE,MAAM,GAAGC,KAAK,CAACC,OAAO;AAExB,MAAMC,QAAQ,GAAG;EACfC,aAAaA,CAACC,MAAM,EAAC;IACnB,MAAM;MAAEC;IAAK,CAAC,GAAGD,MAAM;IACvBA,MAAM,CAACE,UAAU,GAAG,GAAGT,YAAY,WAAWQ,IAAI,EAAE;IACpD,OAAO,CACL,GAAGP,OAAO,IAAIO,IAAI,EAAE,EACpB,GAAGP,OAAO,IAAIO,IAAI,YAAY,CAC/B;EACH,CAAC;EAEDE,KAAKA,CAAAC,IAAA,EAAqB;IAAA,IAApB;MAACH,IAAI;MAAEI;IAAW,CAAC,GAAAD,IAAA;IACvB,OAAO,GAAGH,IAAI,IAAII,WAAW,EAAE;EACjC,CAAC;EAEDC,aAAaA,CAACC,IAAI,EAAEP,MAAM,EAAC;IACzB,IAAIA,MAAM,CAACQ,KAAK,EAAE;MAChB,MAAM;UAAEC;QAAK,CAAC,GAAGF,IAAI,IAAI,CAAC,CAAC;QACzB;UAAEG;QAAgB,CAAC,GAAGD,IAAI,IAAI,CAAC,CAAC;MAEjC,IAAI,CAACd,MAAM,CAACe,eAAe,CAAC,EAAE;QAC5B,MAAM,IAAAC,eAAQ,EACZ,eAAe,EACf,oBACF,CAAC;MACH;MACA,OAAO,IAAI;IACd;IACA,OAAO,IAAI;EACb;AACF,CAAC;AAAC,IAAAC,QAAA,GAAAC,OAAA,CAAAC,OAAA,GAEahB,QAAQ","ignoreList":[]}