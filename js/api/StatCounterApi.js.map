{"version":3,"sources":["../../src/api/StatCounterApi.js"],"names":["C","URL","WIN_DESKTOP","MAC_DESKTOP","ANDROID_MOBILE","IOS_MOBILE","HM_URL","csv","link","_isArr","Array","isArray","_periodQuery","_crPeriodQuery","_d","Date","_m","getUTCMonth","_strM","_toY","getUTCFullYear","_fromY","_crLinks","option","value","region","_urlItem","caption","v2","StatCounterApi","getRequestUrl","fetchType","sourceLink","crKey","vRegion","getOnCheckResponse","checkResponse","json","data"],"mappings":"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","sourcesContent":["\r\nconst C = {\r\n  URL: 'https://gs.statcounter.com/',\r\n  WIN_DESKTOP: 'os-version-market-share/windows/desktop/',\r\n  MAC_DESKTOP: 'os-version-market-share/macos/desktop/',\r\n  ANDROID_MOBILE: 'os-version-market-share/android/mobile-tablet/',\r\n  IOS_MOBILE: 'os-version-market-share/ios/mobile-tablet/',\r\n};\r\n\r\nconst HM_URL = {\r\n  \"os\": {\r\n    //csv: `${C.URL}chart.php?device=Desktop%20%26%20Mobile%20%26%20Tablet%20%26%20Console&device_hidden=desktop%2Bmobile%2Btablet%2Bconsole&multi-device=true&statType_hidden=os_combined&region_hidden=ww&granularity=monthly&statType=Operating%20System&region=Worldwide&fromInt=201807&toInt=201907&fromMonthYear=2018-07&toMonthYear=2019-07&csv=1`,\r\n    csv: `${C.URL}chart.php?device=Desktop%20%26%20Mobile%20%26%20Tablet%20%26%20Console&device_hidden=desktop%2Bmobile%2Btablet%2Bconsole&multi-device=true&statType_hidden=os_combined&granularity=monthly&statType=Operating%20System&csv=1`,\r\n    link: `${C.URL}os-market-share/`\r\n    //'https://gs.statcounter.com/chart.php?device=Desktop%20%26%20Mobile%20%26%20Tablet%20%26%20Console&device_hidden=desktop%2Bmobile%2Btablet%2Bconsole&multi-device=true&statType_hidden=os_combined&region_hidden=ww&granularity=monthly&statType=Operating%20System&region=Worldwide&fromInt=201807&toInt=201907&fromMonthYear=2018-07&toMonthYear=2019-07&csv=1',\r\n  },\r\n\r\n  \"win-desktop\": {\r\n    //csv: `${C.URL}${C.WIN_DESKTOP}chart.php?device=Desktop&device_hidden=desktop&statType_hidden=windows_version&region_hidden=ww&granularity=monthly&statType=Windows%10Version&region=Worldwide&fromInt=201807&toInt=201907&fromMonthYear=2018-07&toMonthYear=2019-07&csv=1`,\r\n    csv: `${C.URL}${C.WIN_DESKTOP}chart.php?device=Desktop&device_hidden=desktop&statType_hidden=windows_version&granularity=monthly&statType=Windows%10Version&csv=1`,\r\n    link: `${C.URL}${C.WIN_DESKTOP}`\r\n  //'https://gs.statcounter.com/os-version-market-share/windows/desktop/chart.php?device=Desktop&device_hidden=desktop&statType_hidden=windows_version&region_hidden=ww&granularity=monthly&statType=Windows%10Version&region=Worldwide&fromInt=201807&toInt=201907&fromMonthYear=2018-07&toMonthYear=2019-07&csv=1'\r\n  },\r\n  \"mac-desktop\": {\r\n    //csv: `${C.URL}${C.MAC_DESKTOP}chart.php?device=Desktop&device_hidden=desktop&statType_hidden=macos_version&region_hidden=ww&granularity=monthly&statType=macOS%20Version&region=Worldwide&fromInt=201807&toInt=201907&fromMonthYear=2018-07&toMonthYear=2019-07&csv=1`,\r\n    csv: `${C.URL}${C.MAC_DESKTOP}chart.php?device=Desktop&device_hidden=desktop&statType_hidden=macos_version&granularity=monthly&statType=macOS%20Version&csv=1`,\r\n    link: `${C.URL}${C.MAC_DESKTOP}`\r\n    //'https://gs.statcounter.com/os-version-market-share/macos/desktop/chart.php?device=Desktop&device_hidden=desktop&statType_hidden=macos_version&region_hidden=ww&granularity=monthly&statType=macOS%20Version&region=Worldwide&fromInt=201807&toInt=201907&fromMonthYear=2018-07&toMonthYear=2019-07&csv=1',\r\n  },\r\n  \"android-mobile\": {\r\n    //csv: `${C.URL}${C.ANDROID_MOBILE}chart.php?device=Mobile%20%26%20Tablet&device_hidden=mobile%2Btablet&multi-device=true&statType_hidden=android_version&region_hidden=ww&granularity=monthly&statType=Android%20Version&region=Worldwide&fromInt=201807&toInt=201907&fromMonthYear=2018-07&toMonthYear=2019-07&csv=1`,\r\n    csv: `${C.URL}${C.ANDROID_MOBILE}chart.php?device=Mobile%20%26%20Tablet&device_hidden=mobile%2Btablet&multi-device=true&statType_hidden=android_version&granularity=monthly&statType=Android%20Version&csv=1`,\r\n    link: `${C.URL}${C.ANDROID_MOBILE}`\r\n    //'https://gs.statcounter.com/os-version-market-share/android/mobile-tablet/chart.php?device=Mobile%20%26%20Tablet&device_hidden=mobile%2Btablet&multi-device=true&statType_hidden=android_version&region_hidden=ww&granularity=monthly&statType=Android%20Version&region=Worldwide&fromInt=201807&toInt=201907&fromMonthYear=2018-07&toMonthYear=2019-07&csv=1',\r\n  },\r\n  \"ios-mobile\": {\r\n    //csv: `${C.URL}${C.IOS_MOBILE}chart.php?device=Mobile%-49%26%20Tablet&device_hidden=mobile%2Btablet&multi-device=true&statType_hidden=ios_version&region_hidden=US&granularity=monthly&statType=iOS%20Version&region=ww&fromInt=201807&toInt=201907&fromMonthYear=2018-07&toMonthYear=2019-07&csv=1`,\r\n    csv: `${C.URL}${C.IOS_MOBILE}chart.php?device=Mobile%20%26%20Tablet&device_hidden=mobile%2Btablet&multi-device=true&statType_hidden=ios_version&granularity=monthly&statType=iOS%20Version&csv=1`,\r\n    link: `${C.URL}${C.IOS_MOBILE}`\r\n    //'https://gs.statcounter.com/os-version-market-share/ios/mobile-tablet/chart.php?device=Mobile%-49%26%20Tablet&device_hidden=mobile%2Btablet&multi-device=true&statType_hidden=ios_version&region_hidden=US&granularity=monthly&statType=iOS%20Version&region=ww&fromInt=201807&toInt=201907&fromMonthYear=2018-07&toMonthYear=2019-07&csv=1'\r\n  },\r\n  \"browser\": {\r\n    //csv: `${C.URL}chart.php?device=Desktop%20%26%20Mobile%20%26%20Tablet%20%26%20Console&device_hidden=desktop%2Bmobile%2Btablet%2Bconsole&multi-device=true&statType_hidden=browser&region_hidden=ww&granularity=monthly&statType=Browser&region=Worldwide&fromInt=201807&toInt=201907&fromMonthYear=2018-07&toMonthYear=2019-07&csv=1`,\r\n    csv: `${C.URL}chart.php?device=Desktop%20%26%20Mobile%20%26%20Tablet%20%26%20Console&device_hidden=desktop%2Bmobile%2Btablet%2Bconsole&multi-device=true&statType_hidden=browser&granularity=monthly&statType=Browser&csv=1`,\r\n    link: `${C.URL}browser-market-share/all/`\r\n  }\r\n};\r\n\r\nconst _isArr = Array.isArray;\r\n\r\nlet _periodQuery = null;\r\nconst _crPeriodQuery = () => {\r\n  const _d = new Date()\r\n  , _m = _d.getUTCMonth()\r\n  , _strM = _m < 10 ? '0'+_m : ''+_m\r\n  , _toY = _d.getUTCFullYear()\r\n  , _fromY = _toY - 2;\r\n  return _periodQuery\r\n     || ( _periodQuery = `fromInt=${_fromY}${_strM}&toInt=${_toY}${_strM}&fromMonthYear=${_fromY}-${_strM}&toMonthYear=${_toY}-${_strM}`);\r\n};\r\n\r\nconst _crLinks = (option) => {\r\n  const { value, region={} } = option\r\n  , _urlItem = HM_URL[value]\r\n  , _periodQuery = _crPeriodQuery();\r\n  return {\r\n    csv: `${_urlItem.csv}&region=${region.caption}&region_hidden=${region.v2}&${_periodQuery}`,\r\n    link: `${_urlItem.link}${region.value}`\r\n  };\r\n}\r\n\r\nconst StatCounterApi = {\r\n  getRequestUrl: (option) => {\r\n    const { csv, link } =_crLinks(option)\r\n    option.fetchType = 'csv-stream'\r\n    option.sourceLink = link\r\n    return csv;\r\n  },\r\n\r\n\r\n  crKey: (option) => {\r\n    const { value, region } = option\r\n    , { value: vRegion='' } = region || {};\r\n    return `${vRegion}-${value}`;\r\n  },\r\n\r\n  getOnCheckResponse: () => {\r\n    return StatCounterApi.checkResponse;\r\n  },\r\n\r\n  checkResponse: (json, option) => {\r\n    return json && _isArr(json.data);\r\n  }\r\n};\r\n\r\nexport default StatCounterApi\r\n"],"file":"StatCounterApi.js"}