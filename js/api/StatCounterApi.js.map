{"version":3,"file":"StatcounterApi.js","names":["OS_VERSION_MARKET_SHARE","DESKTOP","MOBILE_TABLET","API_URL","OS_DESKTOP_PATH","WIN_DESKTOP_PATH","MAC_DESKTOP_PATH","ANDROID_MOBILE_PATH","IOS_MOBILE_PATH","SOCIAL_MEDIA_PATH","DEVICE_DESKTOP","GRANULARTY_MONTHLY","CSV","DEVICE_MOBILE_TABLET","DEVICE_MOBILE_TABLET_CONSOLE","HM_URL","csv","link","_isArr","Array","isArray","_periodQuery","_crPeriodQuery","_d","Date","_m","getUTCMonth","_strM","_toY","getUTCFullYear","_fromY","_crLinks","option","value","region","_urlItem","caption","v2","StatcounterApi","getRequestUrl","fetchType","sourceLink","crKey","vRegion","checkResponse","json","data","_default","exports","default"],"sources":["../../src/api/StatcounterApi.js"],"sourcesContent":["\r\nconst OS_VERSION_MARKET_SHARE = \"os-version-market-share\"\r\n, DESKTOP = \"desktop\"\r\n, MOBILE_TABLET = \"mobile-tablet\";\r\n\r\n\r\nconst API_URL = 'https://gs.statcounter.com'\r\n, OS_DESKTOP_PATH = `os-market-share/${DESKTOP}`\r\n, WIN_DESKTOP_PATH = `${OS_VERSION_MARKET_SHARE}/windows/${DESKTOP}`\r\n, MAC_DESKTOP_PATH = `${OS_VERSION_MARKET_SHARE}/macos/${DESKTOP}`\r\n, ANDROID_MOBILE_PATH = `${OS_VERSION_MARKET_SHARE}/android/${MOBILE_TABLET}`\r\n, IOS_MOBILE_PATH = `${OS_VERSION_MARKET_SHARE}/ios/${MOBILE_TABLET}`\r\n, SOCIAL_MEDIA_PATH = \"social-media-stats\";\r\n\r\nconst DEVICE_DESKTOP = \"device=Desktop&device_hidden=desktop\"\r\n, GRANULARTY_MONTHLY = \"granularity=monthly\"\r\n, CSV = \"csv=1\"\r\n, DEVICE_MOBILE_TABLET = \"device=Mobile%20%26%20Tablet&device_hidden=mobile%2Btablet&multi-device=true\"\r\n, DEVICE_MOBILE_TABLET_CONSOLE = \"device=Desktop%20%26%20Mobile%20%26%20Tablet%20%26%20Console&device_hidden=desktop%2Bmobile%2Btablet%2Bconsole&multi-device=true\";\r\n\r\nconst HM_URL = {\r\n  \"os\": {\r\n    csv: `${API_URL}/chart.php?device=Desktop%20%26%20Mobile%20%26%20Tablet%20%26%20Console&device_hidden=desktop%2Bmobile%2Btablet%2Bconsole&multi-device=true&statType_hidden=os_combined&granularity=monthly&statType=Operating%20System&${CSV}`,\r\n    link: `${API_URL}/os-market-share/`\r\n  },\r\n\r\n  \"os-desktop\": {\r\n    csv: `${API_URL}/${OS_DESKTOP_PATH}/chart.php?${DEVICE_DESKTOP}&statType_hidden=os_combined&${GRANULARTY_MONTHLY}&statType=Operating%20System&${CSV}`,\r\n    link: `${API_URL}/${OS_DESKTOP_PATH}/`\r\n  },\r\n\r\n  \"win-desktop\": {\r\n    csv: `${API_URL}/${WIN_DESKTOP_PATH}/chart.php?${DEVICE_DESKTOP}&statType_hidden=windows_version&${GRANULARTY_MONTHLY}&statType=Windows%10Version&${CSV}`,\r\n    link: `${API_URL}/${WIN_DESKTOP_PATH}/`\r\n  },\r\n  \"mac-desktop\": {\r\n    csv: `${API_URL}/${MAC_DESKTOP_PATH}/chart.php?${DEVICE_DESKTOP}&statType_hidden=macos_version&${GRANULARTY_MONTHLY}&statType=macOS%20Version&${CSV}`,\r\n    link: `${API_URL}/${MAC_DESKTOP_PATH}/`\r\n  },\r\n  \"android-mobile\": {\r\n    csv: `${API_URL}/${ANDROID_MOBILE_PATH}/chart.php?${DEVICE_MOBILE_TABLET}&statType_hidden=android_version&${GRANULARTY_MONTHLY}&statType=Android%20Version&${CSV}`,\r\n    link: `${API_URL}/${ANDROID_MOBILE_PATH}/`\r\n  },\r\n  \"ios-mobile\": {\r\n    csv: `${API_URL}/${IOS_MOBILE_PATH}/chart.php?${DEVICE_MOBILE_TABLET}&statType_hidden=ios_version&${GRANULARTY_MONTHLY}&statType=iOS%20Version&${CSV}`,\r\n    link: `${API_URL}/${IOS_MOBILE_PATH}/`\r\n  },\r\n  \"browser\": {\r\n    csv: `${API_URL}/chart.php?${DEVICE_MOBILE_TABLET_CONSOLE}&statType_hidden=browser&${GRANULARTY_MONTHLY}&statType=Browser&${CSV}`,\r\n    link: `${API_URL}/browser-market-share/all/`\r\n  },\r\n  \"social-media\": {\r\n    csv: `${API_URL}/chart.php?${DEVICE_MOBILE_TABLET_CONSOLE}&statType_hidden=social_media&region_hidden=ww&${GRANULARTY_MONTHLY}&statType=Social%20Media&${CSV}`,\r\n    link: `${API_URL}${SOCIAL_MEDIA_PATH}/`\r\n  }\r\n};\r\n\r\nconst _isArr = Array.isArray;\r\n\r\nlet _periodQuery = null;\r\nconst _crPeriodQuery = () => {\r\n  const _d = new Date()\r\n  , _m = _d.getUTCMonth()\r\n  , _strM = _m < 10 ? '0'+_m : ''+_m\r\n  , _toY = _d.getUTCFullYear()\r\n  , _fromY = _toY - 2;\r\n  return _periodQuery\r\n     || ( _periodQuery = `fromInt=${_fromY}${_strM}&toInt=${_toY}${_strM}&fromMonthYear=${_fromY}-${_strM}&toMonthYear=${_toY}-${_strM}`);\r\n};\r\n\r\nconst _crLinks = (option) => {\r\n  const { value, region={} } = option\r\n  , _urlItem = HM_URL[value]\r\n  , _periodQuery = _crPeriodQuery();\r\n  return {\r\n    csv: `${_urlItem.csv}&region=${region.caption}&region_hidden=${region.v2}&${_periodQuery}`,\r\n    link: `${_urlItem.link}${region.value}`\r\n  };\r\n};\r\n\r\nconst StatcounterApi = {\r\n  getRequestUrl: (option) => {\r\n    const { csv, link } =_crLinks(option)\r\n    option.fetchType = 'csv-stream'\r\n    option.sourceLink = link\r\n    return csv;\r\n  },\r\n\r\n  crKey: (option) => {\r\n    const { value, region } = option\r\n    , { value: vRegion='' } = region || {};\r\n    return `${vRegion}-${value}`;\r\n  },\r\n\r\n  checkResponse: (json, option) => {\r\n    return json && _isArr(json.data);\r\n  }\r\n};\r\n\r\nexport default StatcounterApi\r\n"],"mappings":";;;;AACA,MAAMA,uBAAuB,GAAG,yBAAyB;EACvDC,OAAO,GAAG,SAAS;EACnBC,aAAa,GAAG,eAAe;AAGjC,MAAMC,OAAO,GAAG,4BAA4B;EAC1CC,eAAe,GAAG,mBAAmBH,OAAO,EAAE;EAC9CI,gBAAgB,GAAG,GAAGL,uBAAuB,YAAYC,OAAO,EAAE;EAClEK,gBAAgB,GAAG,GAAGN,uBAAuB,UAAUC,OAAO,EAAE;EAChEM,mBAAmB,GAAG,GAAGP,uBAAuB,YAAYE,aAAa,EAAE;EAC3EM,eAAe,GAAG,GAAGR,uBAAuB,QAAQE,aAAa,EAAE;EACnEO,iBAAiB,GAAG,oBAAoB;AAE1C,MAAMC,cAAc,GAAG,sCAAsC;EAC3DC,kBAAkB,GAAG,qBAAqB;EAC1CC,GAAG,GAAG,OAAO;EACbC,oBAAoB,GAAG,8EAA8E;EACrGC,4BAA4B,GAAG,kIAAkI;AAEnK,MAAMC,MAAM,GAAG;EACb,IAAI,EAAE;IACJC,GAAG,EAAE,GAAGb,OAAO,2NAA2NS,GAAG,EAAE;IAC/OK,IAAI,EAAE,GAAGd,OAAO;EAClB,CAAC;EAED,YAAY,EAAE;IACZa,GAAG,EAAE,GAAGb,OAAO,IAAIC,eAAe,cAAcM,cAAc,gCAAgCC,kBAAkB,gCAAgCC,GAAG,EAAE;IACrJK,IAAI,EAAE,GAAGd,OAAO,IAAIC,eAAe;EACrC,CAAC;EAED,aAAa,EAAE;IACbY,GAAG,EAAE,GAAGb,OAAO,IAAIE,gBAAgB,cAAcK,cAAc,oCAAoCC,kBAAkB,+BAA+BC,GAAG,EAAE;IACzJK,IAAI,EAAE,GAAGd,OAAO,IAAIE,gBAAgB;EACtC,CAAC;EACD,aAAa,EAAE;IACbW,GAAG,EAAE,GAAGb,OAAO,IAAIG,gBAAgB,cAAcI,cAAc,kCAAkCC,kBAAkB,6BAA6BC,GAAG,EAAE;IACrJK,IAAI,EAAE,GAAGd,OAAO,IAAIG,gBAAgB;EACtC,CAAC;EACD,gBAAgB,EAAE;IAChBU,GAAG,EAAE,GAAGb,OAAO,IAAII,mBAAmB,cAAcM,oBAAoB,oCAAoCF,kBAAkB,+BAA+BC,GAAG,EAAE;IAClKK,IAAI,EAAE,GAAGd,OAAO,IAAII,mBAAmB;EACzC,CAAC;EACD,YAAY,EAAE;IACZS,GAAG,EAAE,GAAGb,OAAO,IAAIK,eAAe,cAAcK,oBAAoB,gCAAgCF,kBAAkB,2BAA2BC,GAAG,EAAE;IACtJK,IAAI,EAAE,GAAGd,OAAO,IAAIK,eAAe;EACrC,CAAC;EACD,SAAS,EAAE;IACTQ,GAAG,EAAE,GAAGb,OAAO,cAAcW,4BAA4B,4BAA4BH,kBAAkB,qBAAqBC,GAAG,EAAE;IACjIK,IAAI,EAAE,GAAGd,OAAO;EAClB,CAAC;EACD,cAAc,EAAE;IACda,GAAG,EAAE,GAAGb,OAAO,cAAcW,4BAA4B,kDAAkDH,kBAAkB,4BAA4BC,GAAG,EAAE;IAC9JK,IAAI,EAAE,GAAGd,OAAO,GAAGM,iBAAiB;EACtC;AACF,CAAC;AAED,MAAMS,MAAM,GAAGC,KAAK,CAACC,OAAO;AAE5B,IAAIC,YAAY,GAAG,IAAI;AACvB,MAAMC,cAAc,GAAGA,CAAA,KAAM;EAC3B,MAAMC,EAAE,GAAG,IAAIC,IAAI,CAAC,CAAC;IACnBC,EAAE,GAAGF,EAAE,CAACG,WAAW,CAAC,CAAC;IACrBC,KAAK,GAAGF,EAAE,GAAG,EAAE,GAAG,GAAG,GAACA,EAAE,GAAG,EAAE,GAACA,EAAE;IAChCG,IAAI,GAAGL,EAAE,CAACM,cAAc,CAAC,CAAC;IAC1BC,MAAM,GAAGF,IAAI,GAAG,CAAC;EACnB,OAAOP,YAAY,KACXA,YAAY,GAAG,WAAWS,MAAM,GAAGH,KAAK,UAAUC,IAAI,GAAGD,KAAK,kBAAkBG,MAAM,IAAIH,KAAK,gBAAgBC,IAAI,IAAID,KAAK,EAAE,CAAC;AACzI,CAAC;AAED,MAAMI,QAAQ,GAAIC,MAAM,IAAK;EAC3B,MAAM;MAAEC,KAAK;MAAEC,MAAM,GAAC,CAAC;IAAE,CAAC,GAAGF,MAAM;IACjCG,QAAQ,GAAGpB,MAAM,CAACkB,KAAK,CAAC;IACxBZ,YAAY,GAAGC,cAAc,CAAC,CAAC;EACjC,OAAO;IACLN,GAAG,EAAE,GAAGmB,QAAQ,CAACnB,GAAG,WAAWkB,MAAM,CAACE,OAAO,kBAAkBF,MAAM,CAACG,EAAE,IAAIhB,YAAY,EAAE;IAC1FJ,IAAI,EAAE,GAAGkB,QAAQ,CAAClB,IAAI,GAAGiB,MAAM,CAACD,KAAK;EACvC,CAAC;AACH,CAAC;AAED,MAAMK,cAAc,GAAG;EACrBC,aAAa,EAAGP,MAAM,IAAK;IACzB,MAAM;MAAEhB,GAAG;MAAEC;IAAK,CAAC,GAAEc,QAAQ,CAACC,MAAM,CAAC;IACrCA,MAAM,CAACQ,SAAS,GAAG,YAAY;IAC/BR,MAAM,CAACS,UAAU,GAAGxB,IAAI;IACxB,OAAOD,GAAG;EACZ,CAAC;EAED0B,KAAK,EAAGV,MAAM,IAAK;IACjB,MAAM;QAAEC,KAAK;QAAEC;MAAO,CAAC,GAAGF,MAAM;MAC9B;QAAEC,KAAK,EAAEU,OAAO,GAAC;MAAG,CAAC,GAAGT,MAAM,IAAI,CAAC,CAAC;IACtC,OAAO,GAAGS,OAAO,IAAIV,KAAK,EAAE;EAC9B,CAAC;EAEDW,aAAa,EAAEA,CAACC,IAAI,EAAEb,MAAM,KAAK;IAC/B,OAAOa,IAAI,IAAI3B,MAAM,CAAC2B,IAAI,CAACC,IAAI,CAAC;EAClC;AACF,CAAC;AAAC,IAAAC,QAAA,GAAAC,OAAA,CAAAC,OAAA,GAEaX,cAAc","ignoreList":[]}