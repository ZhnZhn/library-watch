{"version":3,"sources":["../../src/api/NpmApi.js"],"names":["BASE","NPM_PACKAGE","NPM","REQUEST_PACKAGE","_crPackageLink","name","_addPackageLinkTo","option","repo","packageLink","_rRequestTypeToUrl","NPM_RECENT_VERSION","NPM_DOWNLOADS_RECENT_MONTH","NPM_DOWNLOADS","fromDate","toDate","NpmApi","getRequestUrl","fnFactory","requestType","getOnCheckResponse","checkResponse","crKey","json","error","errCaption","message","StringUtil","setFirstToUpperCase"],"mappings":";;;;;;;AACA;;AAEA,IAAMA,IAAI,GAAG,uBAAb;AACA,IAAMC,WAAW,GAAG,gCAApB;AACA,IAAMC,GAAG,GAAG,uBAAZ;AACA,IAAMC,eAAe,GAAG,iBAAxB,C,CAEA;;AAEA,IAAMC,cAAc,GAAG,SAAjBA,cAAiB,CAAAC,IAAI;AAAA,SAAIA,IAAI,QAC5BJ,WAD4B,GACdI,IADc,GAE/BH,GAFuB;AAAA,CAA3B;;AAIA,IAAMI,iBAAiB,GAAG,SAApBA,iBAAoB,CAACC,MAAD,EAAY;AAAA,MAC5BC,IAD4B,GACnBD,MADmB,CAC5BC,IAD4B;AAEpCD,EAAAA,MAAM,CAACE,WAAP,GAAqBL,cAAc,CAACI,IAAD,CAAnC;AACD,CAHD;;AAKA,IAAME,kBAAkB,GAAG;AACzBC,EAAAA,kBAAkB,EAAG,4BAACJ,MAAD,EAAY;AAC/B,qDAA+CA,MAAM,CAACC,IAAtD;AACD,GAHwB;AAKzBI,EAAAA,0BAA0B,EAAG,oCAACL,MAAD,EAAY;AACvCD,IAAAA,iBAAiB,CAACC,MAAD,CAAjB;;AACA,WAAUP,IAAV,oCAA6CO,MAAM,CAACC,IAApD;AACD,GARwB;AASzBK,EAAAA,aAAa,EAAG,uBAACN,MAAD,EAAY;AAAA,QAClBO,QADkB,GACSP,MADT,CAClBO,QADkB;AAAA,QACRC,MADQ,GACSR,MADT,CACRQ,MADQ;AAAA,QACAP,IADA,GACSD,MADT,CACAC,IADA;;AAE1BF,IAAAA,iBAAiB,CAACC,MAAD,CAAjB;;AACA,WAAUP,IAAV,yBAAkCc,QAAlC,SAA8CC,MAA9C,SAAwDP,IAAxD;AACD;AAbwB,CAA3B;AAgBA,IAAMQ,MAAM,GAAG;AACZC,EAAAA,aADY,yBACEV,MADF,EACS;AACnB,QAAMW,SAAS,GAAGR,kBAAkB,CAACH,MAAM,CAACY,WAAR,CAApC;AACA,WAAOD,SAAS,CAACX,MAAD,CAAhB;AACD,GAJW;AAKZa,EAAAA,kBALY,gCAKQ;AAClB,WAAOJ,MAAM,CAACK,aAAd;AACD,GAPW;AAQZC,EAAAA,KARY,uBAQ2B;AAAA,QAAhCd,IAAgC,QAAhCA,IAAgC;AAAA,QAA1BW,WAA0B,QAA1BA,WAA0B;AAAA,6BAAbL,QAAa;AAAA,QAAbA,QAAa,8BAAJ,EAAI;AACrC,WAAUN,IAAV,SAAkBW,WAAlB,SAAiCL,QAAjC;AACD,GAVW;AAYZO,EAAAA,aAZY,yBAYEE,IAZF,EAYWhB,MAZX,EAYkB;AAAA,QAAhBgB,IAAgB;AAAhBA,MAAAA,IAAgB,GAAX,EAAW;AAAA;;AAAA,gBACTA,IADS;AAAA,QACnBC,KADmB,SACnBA,KADmB;;AAE3B,QAAIA,KAAJ,EAAU;AACR,YAAM;AACHC,QAAAA,UAAU,EAAEtB,eADT;AAEHuB,QAAAA,OAAO,EAAEC,uBAAWC,mBAAX,CAA+BJ,KAA/B;AAFN,OAAN;AAID;;AACD,WAAO,IAAP;AACF;AArBW,CAAf;eAwBeR,M","sourcesContent":["\r\nimport StringUtil from '../utils/StringUtil';\r\n\r\nconst BASE = 'https://api.npmjs.org';\r\nconst NPM_PACKAGE = 'https://www.npmjs.com/package/';\r\nconst NPM = 'https://www.npmjs.com';\r\nconst REQUEST_PACKAGE = 'Request Package';\r\n\r\n//https://api.npmjs.org/downloads/range/last-month\r\n\r\nconst _crPackageLink = name => name\r\n  ? `${NPM_PACKAGE}${name}`\r\n  : NPM;\r\n\r\nconst _addPackageLinkTo = (option) => {\r\n  const { repo } = option;\r\n  option.packageLink = _crPackageLink(repo);\r\n};\r\n\r\nconst _rRequestTypeToUrl = {\r\n  NPM_RECENT_VERSION : (option) => {\r\n    return `https://registry.npmjs.org/-/package/${option.repo}/dist-tags`;\r\n  },\r\n\r\n  NPM_DOWNLOADS_RECENT_MONTH : (option) => {\r\n    _addPackageLinkTo(option);\r\n    return `${BASE}/downloads/range/last-month/${option.repo}`;\r\n  },\r\n  NPM_DOWNLOADS : (option) => {\r\n    const { fromDate, toDate, repo } = option;\r\n    _addPackageLinkTo(option)\r\n    return `${BASE}/downloads/range/${fromDate}:${toDate}/${repo}`;\r\n  }\r\n}\r\n\r\nconst NpmApi = {\r\n   getRequestUrl(option){\r\n     const fnFactory = _rRequestTypeToUrl[option.requestType]\r\n     return fnFactory(option);\r\n   },\r\n   getOnCheckResponse(){\r\n     return NpmApi.checkResponse;\r\n   },\r\n   crKey({repo, requestType, fromDate=''}){\r\n     return `${repo}_${requestType}_${fromDate}`;\r\n   },\r\n\r\n   checkResponse(json={}, option){\r\n      const { error } = json;\r\n      if (error){\r\n        throw {\r\n           errCaption: REQUEST_PACKAGE,\r\n           message: StringUtil.setFirstToUpperCase(error)\r\n         };\r\n      }\r\n      return true;\r\n   }\r\n};\r\n\r\nexport default NpmApi\r\n"],"file":"NpmApi.js"}