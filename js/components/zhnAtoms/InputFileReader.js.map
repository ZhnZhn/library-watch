{"version":3,"sources":["../../../src/components/zhnAtoms/InputFileReader.jsx"],"names":["InputFileReader","state","labelText","_handleChange","e","files","i","target","length","push","Promise","all","map","resolve","reject","reader","FileReader","onload","result","file","props","as","toLowerCase","readAsBinaryString","readAsArrayBuffer","readAsText","readAsDataURL","then","zippedResults","setState","name","onChange","Component","defaultProps"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAAA;;;;;;AAEA;;IAEMA,e;;;;;;;;;;;;;;sNAUHC,K,GAAQ;AACNC,iBAAW;AADL,K,QAITC,a,GAAgB,UAACC,CAAD,EAAO;AACrB,UAAMC,QAAQ,EAAd;AACA,WAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAIF,EAAEG,MAAF,CAASF,KAAT,CAAeG,MAAnC,EAA2CF,GAA3C,EAAgD;AAC9C;AACAD,cAAMI,IAAN,CAAWL,EAAEG,MAAF,CAASF,KAAT,CAAeC,CAAf,CAAX;AACD;;AAED;AACAI,cAAQC,GAAR,CAAYN,MAAMO,GAAN,CAAU;AAAA,eAAQ,IAAIF,OAAJ,CAAY,UAACG,OAAD,EAAUC,MAAV,EAAqB;AAC7D,cAAIC,SAAS,IAAIC,UAAJ,EAAb;;AAEAD,iBAAOE,MAAP,GAAgB,kBAAU;AACxB;AACAJ,oBAAQ,CAACK,MAAD,EAASC,IAAT,CAAR;AACD,WAHD;;AAKA;AACA,kBAAS,MAAKC,KAAL,CAAWC,EAAZ,CAAgBC,WAAhB,EAAR;AACE,iBAAK,QAAL;AACEP,qBAAOQ,kBAAP,CAA0BJ,IAA1B;AACA;AACF,iBAAK,QAAL;AACEJ,qBAAOS,iBAAP,CAAyBL,IAAzB;AACA;AACF,iBAAK,MAAL;AACEJ,qBAAOU,UAAP,CAAkBN,IAAlB;AACA;AACF,iBAAK,KAAL;AACEJ,qBAAOW,aAAP,CAAqBP,IAArB;AACA;AACF;AACEJ,qBAAOU,UAAP,CAAkBN,IAAlB;AAdJ;AAgBD,SAzB6B,CAAR;AAAA,OAAV,CAAZ,EA0BCQ,IA1BD,CA0BM,yBAAiB;;AAErB;AACA,YAAIC,iBAAiBA,cAAc,CAAd,CAArB,EAAuC;AACrC,cAAMT,OAAOS,cAAc,CAAd,EAAiB,CAAjB,CAAb;AACA,gBAAKC,QAAL,CAAc,EAAE3B,WAAWiB,KAAKW,IAAlB,EAAd;AACA,gBAAKV,KAAL,CAAWW,QAAX,CAAoBH,aAApB;AACD,SAJD,MAIO;AACL,gBAAKC,QAAL,CAAc,EAAE3B,WAAW,kBAAb,EAAd;AACA,gBAAKkB,KAAL,CAAWW,QAAX,CAAoBH,aAApB;AACD;AAEF,OAtCD;AAuCD,K;;AA5DD;;;;;;;;;6BA8DS;AACD,UAAEP,EAAF,GAAS,KAAKD,KAAd,CAAEC,EAAF;AAAA,UACEnB,SADF,GACgB,KAAKD,KADrB,CACEC,SADF;;AAEN,aACE;AAAA;AAAA,UAAK,WAAU,0BAAf;AACE;AACE,qBAAU,WADZ;AAEE,gBAAK,MAFP;AAGE,cAAG,MAHL;AAIE,gBAAK,MAJP;AAKE,cAAImB,EALN;AAME,oBAAU,KAAKlB;AANjB,UADF;AASE;AAAA;AAAA,YAAO,SAAQ,MAAf;AACG;AAAA;AAAA,cAAK,OAAM,4BAAX,EAAwC,OAAM,IAA9C,EAAmD,QAAO,IAA1D,EAA+D,SAAQ,WAAvE;AAAmF,oDAAM,GAAE,4PAAR;AAAnF,WADH;AAEG;AAAA;AAAA;AAAOD;AAAP;AAFH;AATF,OADF;AAgBD;;;EAlF2B8B,gB,UAMpBC,Y,GAAe;AACpBZ,MAAI;AADgB,C;kBA+EVrB,e","file":"InputFileReader.js","sourcesContent":["import React, { Component } from 'react';\r\n\r\n//import PropTypes from \"prop-types\";\r\n\r\nclass InputFileReader extends Component {\r\n  /*\r\n   static propTypes = {\r\n     as: PropTypes.oneOf(['binary', 'buffer', 'text', 'url'])\r\n   }\r\n   */\r\n   static defaultProps = {\r\n     as: 'text'\r\n   }\r\n\r\n   state = {\r\n     labelText: \"Choose a file...\"\r\n   }\r\n      \r\n  _handleChange = (e) => {\r\n    const files = [];\r\n    for (let i = 0; i < e.target.files.length; i++) {\r\n      // Convert to Array.\r\n      files.push(e.target.files[i]);\r\n    }\r\n\r\n    // Build Promise List, each promise resolved by FileReader.onload.\r\n    Promise.all(files.map(file => new Promise((resolve, reject) => {\r\n      let reader = new FileReader();\r\n\r\n      reader.onload = result => {\r\n        // Resolve both the FileReader result and its original file.\r\n        resolve([result, file]);\r\n      };\r\n\r\n      // Read the file with format based on this.props.as.\r\n      switch ((this.props.as).toLowerCase()) {\r\n        case 'binary':\r\n          reader.readAsBinaryString(file);\r\n          break;\r\n        case 'buffer':\r\n          reader.readAsArrayBuffer(file);\r\n          break;\r\n        case 'text':\r\n          reader.readAsText(file);\r\n          break;\r\n        case 'url':\r\n          reader.readAsDataURL(file);\r\n          break;\r\n        default:\r\n          reader.readAsText(file);\r\n      }\r\n    })))\r\n    .then(zippedResults => {\r\n\r\n      // Run the callback after all files have been read.\r\n      if (zippedResults && zippedResults[0] ){\r\n        const file = zippedResults[0][1]\r\n        this.setState({ labelText: file.name })\r\n        this.props.onChange(zippedResults);\r\n      } else {\r\n        this.setState({ labelText: 'Choose a file...'});\r\n        this.props.onChange(zippedResults);\r\n      }\r\n\r\n    });\r\n  }\r\n\r\n  render() {\r\n    const { as } = this.props\r\n        , { labelText } = this.state\r\n    return (\r\n      <div className=\"_react-file-reader-input\">\r\n        <input\r\n          className=\"inputfile\"\r\n          type=\"file\"\r\n          id=\"file\"\r\n          name=\"file\"\r\n          as={as}\r\n          onChange={this._handleChange}\r\n        />\r\n        <label htmlFor=\"file\">\r\n           <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"17\" viewBox=\"0 0 20 17\"><path d=\"M10 0l-5.2 4.9h3.3v5.1h3.8v-5.1h3.3l-5.2-4.9zm9.3 11.5l-3.2-2.1h-2l3.4 2.6h-3.5c-.1 0-.2.1-.2.1l-.8 2.3h-6l-.8-2.2c-.1-.1-.1-.2-.2-.2h-3.6l3.4-2.6h-2l-3.2 2.1c-.4.3-.7 1-.6 1.5l.6 3.1c.1.5.7.9 1.2.9h16.3c.6 0 1.1-.4 1.3-.9l.6-3.1c.1-.5-.2-1.2-.7-1.5z\"></path></svg>\r\n           <span>{labelText}</span>\r\n        </label>\r\n       </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default InputFileReader\r\n"]}