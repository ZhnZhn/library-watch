{"version":3,"sources":["../../../src/components/items/GitHubRecentTag.jsx"],"names":["ITEM_DESCRIPTION","_formatDate","strDate","replace","Token","caption","value","CellValue","props","CellValueDate","date","Detail","json","commit","files","stats","html_url","author","message","committer","authorDate","authorName","name","committerDate","committerName","total","additions","deletions","_renderFiles","map","file","index","className","filename","length","GitHubRecentTag","state","isShow","isDetail","_hClickWatch","repo","requestType","version","onWatchItem","tagDate","descr","config","_hClickDetail","onClickDetail","then","setState","_hToggleOpen","prevState","render","onCloseItem","STYLE","ROOT","CL","BT_ITEM","CAPTION_OPEN","SPAN_VERSION","BTN_CIRCLE","Component"],"mappings":"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","sourcesContent":["import React, { Component, Fragment } from 'react'\r\n\r\nimport A from '../zhn-atoms/A'\r\nimport Caption from './ItemCaption'\r\nimport CL from '../styles/CL'\r\nimport STYLE from './Item.Style'\r\n\r\nconst ITEM_DESCRIPTION = \"GitHub Likely Recent Version Tag\";\r\n\r\nconst _formatDate = strDate => (''+strDate)\r\n .replace('T', ' ')\r\n .replace('Z', '');\r\n\r\nconst Token = ({ caption, value }) => (\r\n  <Fragment>\r\n    <span className=\"library__value-title\">\r\n      {caption+':'}\r\n    </span>\r\n    <span className=\"library__value\">\r\n      {value}\r\n    </span>\r\n  </Fragment>\r\n);\r\n\r\nconst CellValue = props => (\r\n  <div>\r\n    <Token {...props} />\r\n  </div>\r\n);\r\n\r\nconst CellValueDate = ({ caption, value, date }) => (\r\n  <div>\r\n    <Token\r\n      caption={caption}\r\n      value={value}\r\n    />\r\n    <Token\r\n      caption=\"Date\"\r\n      value={_formatDate(date)}\r\n    />\r\n  </div>\r\n);\r\n\r\nconst Detail = (props) => {\r\n  const { json } = props\r\n      , { commit, files, stats, html_url } = json\r\n      , { author, message, committer } = commit\r\n      , { date:authorDate, name:authorName } = author\r\n      , { date:committerDate, name:committerName } = committer\r\n      , { total, additions, deletions } = stats\r\n\r\n  const _renderFiles = (files=[]) => {\r\n     return files.map((file, index) => {\r\n       const className = (index % 2)\r\n                ? 'row__topic__even not-selected'\r\n                : 'row__topic__odd not-selected'\r\n          , {filename} = file\r\n        return (\r\n          <div key={index} className={className}>\r\n            {filename}\r\n          </div>\r\n        );\r\n     })\r\n  };\r\n\r\n  return (\r\n    <div className=\"library\">\r\n      <CellValue\r\n        caption=\"Message\"\r\n        value={message}\r\n      />\r\n      <CellValueDate\r\n        caption=\"Author\"\r\n        value={authorName}\r\n        date={authorDate}\r\n      />\r\n      <CellValueDate\r\n        caption=\"Committer\"\r\n        value={committerName}\r\n        date={committerDate}\r\n      />\r\n      <div>\r\n        <Token\r\n          caption=\"Total\"\r\n          value={total}\r\n        />\r\n        <Token\r\n          caption=\"Additions\"\r\n          value={additions}\r\n        />\r\n        <Token\r\n          caption=\"Deletions\"\r\n          value={deletions}\r\n        />\r\n      </div>\r\n      <A.OpenClose2 caption={`Files (${files.length})`} isClose={true}>\r\n        {_renderFiles(files)}\r\n      </A.OpenClose2>\r\n      <a\r\n         href={html_url}\r\n         className=\"github-link\"\r\n      >\r\n         Link to description of commit\r\n      </a>\r\n    </div>\r\n  );\r\n}\r\n\r\nclass GitHubRecentTag extends Component {\r\n  state = {\r\n    isShow: true,\r\n    isDetail: false,\r\n    json: {}\r\n  }\r\n\r\n  _hClickWatch = () => {\r\n    const { repo, requestType, version, onWatchItem } = this.props\r\n        , { tagDate } = this.state\r\n        , caption = `${repo} ${version}`\r\n        , descr = ITEM_DESCRIPTION;\r\n    onWatchItem({\r\n       caption: caption,\r\n       config: { repo, requestType, version, caption, descr, date: tagDate }\r\n    });\r\n  }\r\n\r\n  _hClickDetail = () => {\r\n    this.props.onClickDetail()\r\n     .then(json => {\r\n        const { commit={} } = json\r\n        , { committer={} } = commit\r\n        , { date } = committer\r\n        , tagDate = _formatDate(date)\r\n        this.setState({\r\n          isDetail: true,\r\n          isShow: true,\r\n          json, tagDate\r\n        });\r\n     });\r\n  }\r\n\r\n  _hToggleOpen = () => {\r\n    this.setState(prevState => ({\r\n      isShow: !prevState.isShow\r\n    }))\r\n  }\r\n\r\n  render(){\r\n    const { repo, version, caption, onCloseItem } = this.props\r\n        , { isShow, isDetail, json } = this.state;\r\n    return (\r\n      <div style={STYLE.ROOT}>\r\n        <Caption onClose={onCloseItem}>\r\n          <button\r\n             className={CL.BT_ITEM}\r\n             title={caption}\r\n             style={STYLE.CAPTION_OPEN}\r\n             onClick={this._hToggleOpen}\r\n          >\r\n            <span>\r\n              {repo}\r\n            </span>\r\n            <span style={STYLE.SPAN_VERSION}>\r\n              {version}\r\n            </span>\r\n          </button>\r\n          <A.ButtonCircle\r\n             caption=\"W\"\r\n             title=\"Add to Watch\"\r\n             style={STYLE.BTN_CIRCLE}\r\n             onClick={this._hClickWatch}\r\n          />\r\n          <A.ButtonCircle\r\n             caption=\"D\"\r\n             title=\"Load Tag Details\"\r\n             style={STYLE.BTN_CIRCLE}\r\n             onClick={this._hClickDetail}\r\n          />\r\n        </Caption>\r\n        <A.ShowHide isShow={isShow}>\r\n          {isDetail && <Detail json={json} />}\r\n        </A.ShowHide>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default GitHubRecentTag\r\n"],"file":"GitHubRecentTag.js"}