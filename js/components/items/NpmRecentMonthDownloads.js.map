{"version":3,"sources":["../../../src/components/items/NpmRecentMonthDownloads.jsx"],"names":["BASE_NODEICO","SUFFIX_NODEICO","BASE_NPM","ITEM_DESCRIPTION","styles","rootDiv","lineHeight","marginBottom","marginRight","position","headerDiv","backgroundColor","borderTopLeftRadius","borderTopRightRadius","paddingTop","paddingLeft","width","height","captionSpanOpen","display","color","cursor","maxWidth","fontWeight","whiteSpace","textOverflow","overflow","float","SPAN_SUM","paddingRight","SPAN_START","BTN_CIRCLE","marginLeft","DIV_NODEICO_BADGE","SPAN_NODEICO","BUTTON_DOWN_UP","paddingBottom","SHOW_HIDE_BADGE","marginTop","NpmRecentDownloads","createClass","getInitialState","isShow","isLoadNodeIco","isShowNodeIco","_handlerToggleOpen","setState","state","_handlerClickWatch","props","packageName","requestType","sumDownloads","toDate","onWatchItem","_caption","_descr","caption","config","repo","descr","version","date","_handlerClickNodeIco","_renderButtonWatch","_renderNodeIcoBadge","_href","_imgSrc","render","fromDate","labels","data","onCloseItem","_isButtonWatch","_styleCaption","_lineChartConfig","fLineConfig"],"mappings":"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","file":"NpmRecentMonthDownloads.js","sourcesContent":["import React from 'react'\r\n\r\nimport Chart from '../charts/Chart';\r\n\r\nimport ButtonCircle from '../zhnAtoms/ButtonCircle';\r\nimport FormattedInteger from '../zhnAtoms/FormattedInteger';\r\nimport SvgClose from '../zhnAtoms/SvgClose';\r\nimport ShowHide from '../zhnAtoms/ShowHide';\r\nimport LineChart from '../charts/LineChart';\r\nimport ButtonDownUp from '../zhnAtoms/ButtonDownUp';\r\nimport LinkImg from '../zhnAtoms/LinkImg';\r\n\r\nconst BASE_NODEICO = \"https://nodei.co/npm/\"\r\n    , SUFFIX_NODEICO = \".png?downloads=true&downloadRank=true&stars=true\"\r\n    , BASE_NPM = \"https://www.npmjs.com/package/\"\r\n    , ITEM_DESCRIPTION = \"Npm Recent Month Downloads\";\r\n\r\nconst styles = {\r\n  rootDiv : {\r\n    lineHeight : 1.5,\r\n    marginBottom: '10px',\r\n    marginRight: '25px',\r\n    //marginRight: '10px',\r\n    position : 'relative'\r\n  },\r\n  headerDiv: {\r\n    backgroundColor: '#232F3B',\r\n    borderTopLeftRadius: '10px',\r\n    borderTopRightRadius: '10px',\r\n    paddingTop: '4px',\r\n    paddingLeft: '10px',\r\n    lineHeight: 1.5,\r\n    //height: '25px',\r\n    //width: '600px'\r\n    width : '100%',\r\n    height: '30px'\r\n  },\r\n  captionSpanOpen : {\r\n    display : 'inline-block',\r\n    color: 'rgba(164, 135, 212, 1)',\r\n    cursor: 'pointer',\r\n    maxWidth: '500px',\r\n    fontWeight : 'bold',\r\n    whiteSpace: 'nowrap',\r\n    textOverflow : 'ellipsis',\r\n    overflow : 'hidden',\r\n    float : 'left'\r\n  },\r\n\r\n  SPAN_SUM : {\r\n    color: '#80c040',\r\n    paddingLeft : '10px',\r\n    paddingRight : '10px'\r\n  },\r\n  SPAN_START : {\r\n    paddingRight : '10px'\r\n  },\r\n  BTN_CIRCLE : {\r\n    marginLeft: '10px'\r\n  },\r\n\r\n  DIV_NODEICO_BADGE : {\r\n     marginLeft: '32px'\r\n  },\r\n  SPAN_NODEICO : {\r\n    display: 'block',\r\n    fontWeight: 'bold' ,\r\n    color: '#3399FF',\r\n    cursor: 'pointer'\r\n  },\r\n\r\n  BUTTON_DOWN_UP : {\r\n    paddingTop : '4px',\r\n    paddingBottom : '4px'\r\n  },\r\n\r\n  SHOW_HIDE_BADGE : {\r\n     marginTop: '16px'\r\n  }\r\n\r\n}\r\n\r\n\r\nconst NpmRecentDownloads = React.createClass({\r\n  getInitialState(){\r\n    return {\r\n      isShow : true,\r\n      isLoadNodeIco : false,\r\n      isShowNodeIco : false\r\n    }\r\n  },\r\n\r\n  _handlerToggleOpen(){\r\n    this.setState({ isShow : !this.state.isShow });\r\n  },\r\n  _handlerClickWatch(){\r\n    const { packageName, requestType, sumDownloads, toDate, onWatchItem } = this.props\r\n        , _caption = `${packageName} ${sumDownloads}`\r\n        , _descr = ITEM_DESCRIPTION\r\n    onWatchItem({\r\n       caption : _caption,\r\n       config : {\r\n          requestType,\r\n          repo : packageName,\r\n          descr: _descr,\r\n          version : sumDownloads,\r\n          caption : _caption,\r\n          date : toDate\r\n        }\r\n    });\r\n  },\r\n\r\n  _handlerClickNodeIco(){\r\n    this.setState({\r\n      isLoadNodeIco : true,\r\n      isShowNodeIco : !this.state.isShowNodeIco\r\n    });\r\n  },\r\n\r\n  _renderButtonWatch(){\r\n    return (\r\n      <ButtonCircle\r\n         caption=\"W\"\r\n         title=\"Add to Watch\"\r\n         style={styles.BTN_CIRCLE}\r\n         onClick={this._handlerClickWatch}\r\n      />\r\n    )\r\n  },\r\n\r\n  _renderNodeIcoBadge(packageName){\r\n    const _href = BASE_NPM + packageName\r\n        , _imgSrc = BASE_NODEICO + packageName + SUFFIX_NODEICO\r\n    return (\r\n      <LinkImg\r\n         href={_href}\r\n         imgClass=\"node-ico\"\r\n         imgSrc={_imgSrc}\r\n      />\r\n    );\r\n  },\r\n\r\n  render(){\r\n    const {\r\n            packageName, caption, sumDownloads=0, fromDate, toDate,\r\n            labels, data,\r\n            onCloseItem, onWatchItem\r\n          } = this.props\r\n        , _isButtonWatch = ( typeof onWatchItem === 'function' )\r\n                ? true\r\n                : false\r\n        , _styleCaption = styles.captionSpanOpen\r\n        , { isShow, isLoadNodeIco, isShowNodeIco } = this.state\r\n        , _lineChartConfig = Chart.fLineConfig({ labels, data })\r\n    return (\r\n      <div style={styles.rootDiv}>\r\n        <div style={styles.headerDiv}>\r\n          <span\r\n             className=\"not-selected\"\r\n             title={caption}\r\n             style={_styleCaption}\r\n             onClick={this._handlerToggleOpen}\r\n          >\r\n            <span>\r\n              {packageName}\r\n            </span>\r\n            <FormattedInteger\r\n               value={sumDownloads}\r\n               style={styles.SPAN_SUM}\r\n            />\r\n            {/*\r\n            <span style={styles.SPAN_SUM}>\r\n               {sumDownloads}\r\n            </span>\r\n            */}\r\n            <span style={styles.SPAN_START}>\r\n              {fromDate}\r\n            </span>\r\n            <span>\r\n              {toDate}\r\n            </span>\r\n          </span>\r\n\r\n          { _isButtonWatch && this._renderButtonWatch() }\r\n\r\n          <SvgClose onClose={onCloseItem} />\r\n        </div>\r\n        <ShowHide isShow={isShow}>\r\n          <LineChart\r\n             data={_lineChartConfig}\r\n          />\r\n\r\n          <div style={styles.DIV_NODEICO_BADGE}>\r\n            <ButtonDownUp\r\n               caption=\"NodeICO\"\r\n               title=\"Package badge from Nodei.co\"\r\n               styleRoot={styles.BUTTON_DOWN_UP}\r\n               isUp={isShowNodeIco}\r\n               onClick={this._handlerClickNodeIco}\r\n            />\r\n            <ShowHide isShow={isShowNodeIco} style={styles.SHOW_HIDE_BADGE}>\r\n              {isLoadNodeIco && this._renderNodeIcoBadge(packageName)}\r\n            </ShowHide>\r\n          </div>\r\n\r\n        </ShowHide>\r\n      </div>\r\n    );\r\n  }\r\n});\r\n\r\nexport default NpmRecentDownloads\r\n"]}