{"version":3,"sources":["../../../src/components/items/NpmRecentMonthDownloads.jsx"],"names":["BASE_NODEICO","SUFFIX_NODEICO","BASE_NPM","ITEM_DESCRIPTION","styles","rootDiv","lineHeight","marginBottom","marginRight","position","captionSpanOpen","display","color","cursor","maxWidth","fontWeight","whiteSpace","textOverflow","overflow","float","SPAN_SUM","paddingLeft","paddingRight","SPAN_START","BTN_CIRCLE","marginLeft","DIV_NODEICO_BADGE","SPAN_NODEICO","BUTTON_DOWN_UP","paddingTop","paddingBottom","SHOW_HIDE_BADGE","marginTop","NpmRecentDownloads","state","isShow","isLoadNodeIco","isShowNodeIco","_handlerToggleOpen","setState","_handlerClickWatch","props","packageName","requestType","sumDownloads","toDate","onWatchItem","_caption","_descr","caption","config","repo","descr","version","date","_handlerClickNodeIco","_renderButtonWatch","_renderNodeIcoBadge","_href","_imgSrc","fromDate","labels","data","onCloseItem","_isButtonWatch","_styleCaption","_lineChartConfig","Chart","fLineConfig","Component"],"mappings":"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","file":"NpmRecentMonthDownloads.js","sourcesContent":["import React, { Component } from 'react'\r\n\r\nimport Chart from '../charts/Chart';\r\n\r\nimport Caption from './ItemCaption'\r\nimport ButtonCircle from '../zhnAtoms/ButtonCircle';\r\nimport FormattedInteger from '../zhnAtoms/FormattedInteger';\r\nimport ShowHide from '../zhnAtoms/ShowHide';\r\nimport LineChart from '../charts/LineChart';\r\nimport ButtonDownUp from '../zhnAtoms/ButtonDownUp';\r\nimport LinkImg from '../zhnAtoms/LinkImg';\r\n\r\nconst BASE_NODEICO = \"https://nodei.co/npm/\"\r\n    , SUFFIX_NODEICO = \".png?downloads=true&downloadRank=true&stars=true\"\r\n    , BASE_NPM = \"https://www.npmjs.com/package/\"\r\n    , ITEM_DESCRIPTION = \"Npm Recent Month Downloads\";\r\n\r\nconst styles = {\r\n  rootDiv : {\r\n    lineHeight : 1.5,\r\n    marginBottom: '10px',\r\n    marginRight: '25px',\r\n    //marginRight: '10px',\r\n    position : 'relative'\r\n  },\r\n  captionSpanOpen : {\r\n    display : 'inline-block',\r\n    color: 'rgba(164, 135, 212, 1)',\r\n    cursor: 'pointer',\r\n    maxWidth: '500px',\r\n    fontWeight : 'bold',\r\n    whiteSpace: 'nowrap',\r\n    textOverflow : 'ellipsis',\r\n    overflow : 'hidden',\r\n    float : 'left'\r\n  },\r\n\r\n  SPAN_SUM : {\r\n    color: '#80c040',\r\n    paddingLeft : '10px',\r\n    paddingRight : '10px'\r\n  },\r\n  SPAN_START : {\r\n    paddingRight : '10px'\r\n  },\r\n  BTN_CIRCLE : {\r\n    marginLeft: '10px'\r\n  },\r\n\r\n  DIV_NODEICO_BADGE : {\r\n     marginLeft: '32px'\r\n  },\r\n  SPAN_NODEICO : {\r\n    display: 'block',\r\n    fontWeight: 'bold' ,\r\n    color: '#3399FF',\r\n    cursor: 'pointer'\r\n  },\r\n\r\n  BUTTON_DOWN_UP : {\r\n    paddingTop : '4px',\r\n    paddingBottom : '4px'\r\n  },\r\n\r\n  SHOW_HIDE_BADGE : {\r\n     marginTop: '16px'\r\n  }\r\n\r\n}\r\n\r\n\r\nclass NpmRecentDownloads extends Component {\r\n  state = {\r\n    isShow : true,\r\n    isLoadNodeIco : false,\r\n    isShowNodeIco : false\r\n  }\r\n\r\n  _handlerToggleOpen = () => {\r\n    this.setState({ isShow : !this.state.isShow });\r\n  }\r\n  _handlerClickWatch = () => {\r\n    const { packageName, requestType, sumDownloads, toDate, onWatchItem } = this.props\r\n        , _caption = `${packageName} ${sumDownloads}`\r\n        , _descr = ITEM_DESCRIPTION\r\n    onWatchItem({\r\n       caption : _caption,\r\n       config : {\r\n          requestType,\r\n          repo : packageName,\r\n          descr: _descr,\r\n          version : sumDownloads,\r\n          caption : _caption,\r\n          date : toDate\r\n        }\r\n    });\r\n  }\r\n\r\n  _handlerClickNodeIco = () => {\r\n    this.setState({\r\n      isLoadNodeIco : true,\r\n      isShowNodeIco : !this.state.isShowNodeIco\r\n    });\r\n  }\r\n\r\n  _renderButtonWatch = () => {\r\n    return (\r\n      <ButtonCircle\r\n         caption=\"W\"\r\n         title=\"Add to Watch\"\r\n         style={styles.BTN_CIRCLE}\r\n         onClick={this._handlerClickWatch}\r\n      />\r\n    )\r\n  }\r\n\r\n  _renderNodeIcoBadge = (packageName) => {\r\n    const _href = BASE_NPM + packageName\r\n        , _imgSrc = BASE_NODEICO + packageName + SUFFIX_NODEICO\r\n    return (\r\n      <LinkImg\r\n         href={_href}\r\n         imgClass=\"node-ico\"\r\n         imgSrc={_imgSrc}\r\n      />\r\n    );\r\n  }\r\n\r\n  render(){\r\n    const {\r\n            packageName, caption, sumDownloads=0, fromDate, toDate,\r\n            labels, data,\r\n            onCloseItem, onWatchItem\r\n          } = this.props\r\n        , _isButtonWatch = ( typeof onWatchItem === 'function' )\r\n                ? true\r\n                : false\r\n        , _styleCaption = styles.captionSpanOpen\r\n        , { isShow, isLoadNodeIco, isShowNodeIco } = this.state\r\n        , _lineChartConfig = Chart.fLineConfig({ labels, data })\r\n    return (\r\n      <div style={styles.rootDiv}>\r\n        <Caption onClose={onCloseItem}>\r\n          <span\r\n             className=\"not-selected\"\r\n             title={caption}\r\n             style={_styleCaption}\r\n             onClick={this._handlerToggleOpen}\r\n          >\r\n            <span>\r\n              {packageName}\r\n            </span>\r\n            <FormattedInteger\r\n               value={sumDownloads}\r\n               style={styles.SPAN_SUM}\r\n            />\r\n            <span style={styles.SPAN_START}>\r\n              {fromDate}\r\n            </span>\r\n            <span>\r\n              {toDate}\r\n            </span>\r\n          </span>\r\n          { _isButtonWatch && this._renderButtonWatch() }\r\n        </Caption>\r\n        <ShowHide isShow={isShow}>\r\n          <LineChart\r\n             data={_lineChartConfig}\r\n          />\r\n\r\n          <div style={styles.DIV_NODEICO_BADGE}>\r\n            <ButtonDownUp\r\n               caption=\"NodeICO\"\r\n               title=\"Package badge from Nodei.co\"\r\n               styleRoot={styles.BUTTON_DOWN_UP}\r\n               isUp={isShowNodeIco}\r\n               onClick={this._handlerClickNodeIco}\r\n            />\r\n            <ShowHide isShow={isShowNodeIco} style={styles.SHOW_HIDE_BADGE}>\r\n              {isLoadNodeIco && this._renderNodeIcoBadge(packageName)}\r\n            </ShowHide>\r\n          </div>\r\n\r\n        </ShowHide>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default NpmRecentDownloads\r\n"]}