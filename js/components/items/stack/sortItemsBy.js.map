{"version":3,"file":"sortItemsBy.js","names":["_isTypeFn","require","_clearPrototypeOf","_config","DF_RESULT","_compareNotNumber","a","b","dfR","isB","isNumber","isA","_fCompareMaybeNumber","getMaybeNumber","bN","aN","_notNumberResult","_getReputation","item","owner","PN_REPUTATION","_compareByReputation","_getBountyAmount","PN_BOUNTY_AMOUNT","_routerCompare","clearPrototypeOf","_fCompareBy","propName","sortItemsBy","items","sort","_default","exports","default"],"sources":["../../../../src/components/items/stack/sortItemsBy.js"],"sourcesContent":["import { isNumber } from '../../../utils/isTypeFn';\r\nimport { clearPrototypeOf } from '../../../utils/clearPrototypeOf';\r\n\r\nimport {\r\n  PN_REPUTATION,\r\n  PN_BOUNTY_AMOUNT\r\n} from './config';\r\n\r\nconst DF_RESULT = 2;\r\nconst _compareNotNumber = (\r\n  a,\r\n  b,\r\n  dfR=DF_RESULT\r\n) => {\r\n  const isB = isNumber(b)\r\n  , isA = isNumber(a);\r\n\r\n  if (!isB && !isA) return 0;\r\n  if (isB && !isA) return 1;\r\n  if (!isB && isA) return -1;\r\n  return dfR;\r\n}\r\n\r\nconst _fCompareMaybeNumber = (\r\n  getMaybeNumber\r\n) => (\r\n  a,\r\n  b\r\n) => {\r\n  const bN = getMaybeNumber(b)\r\n  , aN = getMaybeNumber(a)\r\n  , _notNumberResult = _compareNotNumber(aN, bN);\r\n  return _notNumberResult === DF_RESULT\r\n    ? bN - aN\r\n    : _notNumberResult;\r\n};\r\n\r\nconst _getReputation = (\r\n  item\r\n) => {\r\n  const { owner } = item || {};\r\n  return (owner || {})[PN_REPUTATION] || 0;\r\n}\r\n, _compareByReputation = _fCompareMaybeNumber(_getReputation)\r\n, _getBountyAmount = item => (item || {})[PN_BOUNTY_AMOUNT] || 0\r\n, _routerCompare = {\r\n  [PN_REPUTATION]: _compareByReputation,\r\n  [PN_BOUNTY_AMOUNT]: _fCompareMaybeNumber(_getBountyAmount)\r\n};\r\n\r\nclearPrototypeOf(_routerCompare)\r\n\r\nconst _fCompareBy = (\r\n  propName\r\n) => (a, b) => {\r\n  const bN = b[propName]\r\n  , aN = a[propName]\r\n  , _notNumberResult = _compareNotNumber(aN, bN);\r\n  // guard for not numbers\r\n  if (_notNumberResult !== DF_RESULT) {\r\n    return _notNumberResult;\r\n  }\r\n  // secondary sort\r\n  if (bN === aN) {\r\n    return _compareByReputation(a, b);\r\n  }\r\n  return bN - aN;\r\n};\r\n\r\nconst sortItemsBy = (\r\n  items,\r\n  propName\r\n) => propName\r\n  ? items.sort(_routerCompare[propName] || _fCompareBy(propName))\r\n  : items;\r\n\r\nexport default sortItemsBy\r\n"],"mappings":";;;;AAAA,IAAAA,SAAA,GAAAC,OAAA;AACA,IAAAC,iBAAA,GAAAD,OAAA;AAEA,IAAAE,OAAA,GAAAF,OAAA;AAKA,MAAMG,SAAS,GAAG,CAAC;AACnB,MAAMC,iBAAiB,GAAG,SAAAA,CACxBC,CAAC,EACDC,CAAC,EACDC,GAAG,EACA;EAAA,IADHA,GAAG;IAAHA,GAAG,GAACJ,SAAS;EAAA;EAEb,MAAMK,GAAG,GAAG,IAAAC,kBAAQ,EAACH,CAAC,CAAC;IACrBI,GAAG,GAAG,IAAAD,kBAAQ,EAACJ,CAAC,CAAC;EAEnB,IAAI,CAACG,GAAG,IAAI,CAACE,GAAG,EAAE,OAAO,CAAC;EAC1B,IAAIF,GAAG,IAAI,CAACE,GAAG,EAAE,OAAO,CAAC;EACzB,IAAI,CAACF,GAAG,IAAIE,GAAG,EAAE,OAAO,CAAC,CAAC;EAC1B,OAAOH,GAAG;AACZ,CAAC;AAED,MAAMI,oBAAoB,GACxBC,cAAc,IACX,CACHP,CAAC,EACDC,CAAC,KACE;EACH,MAAMO,EAAE,GAAGD,cAAc,CAACN,CAAC,CAAC;IAC1BQ,EAAE,GAAGF,cAAc,CAACP,CAAC,CAAC;IACtBU,gBAAgB,GAAGX,iBAAiB,CAACU,EAAE,EAAED,EAAE,CAAC;EAC9C,OAAOE,gBAAgB,KAAKZ,SAAS,GACjCU,EAAE,GAAGC,EAAE,GACPC,gBAAgB;AACtB,CAAC;AAED,MAAMC,cAAc,GAClBC,IAAI,IACD;IACH,MAAM;MAAEC;IAAM,CAAC,GAAGD,IAAI,IAAI,CAAC,CAAC;IAC5B,OAAO,CAACC,KAAK,IAAI,CAAC,CAAC,EAAEC,qBAAa,CAAC,IAAI,CAAC;EAC1C,CAAC;EACCC,oBAAoB,GAAGT,oBAAoB,CAACK,cAAc,CAAC;EAC3DK,gBAAgB,GAAGJ,IAAI,IAAI,CAACA,IAAI,IAAI,CAAC,CAAC,EAAEK,wBAAgB,CAAC,IAAI,CAAC;EAC9DC,cAAc,GAAG;IACjB,CAACJ,qBAAa,GAAGC,oBAAoB;IACrC,CAACE,wBAAgB,GAAGX,oBAAoB,CAACU,gBAAgB;EAC3D,CAAC;AAED,IAAAG,kCAAgB,EAACD,cAAc,CAAC;AAEhC,MAAME,WAAW,GACfC,QAAQ,IACL,CAACrB,CAAC,EAAEC,CAAC,KAAK;EACb,MAAMO,EAAE,GAAGP,CAAC,CAACoB,QAAQ,CAAC;IACpBZ,EAAE,GAAGT,CAAC,CAACqB,QAAQ,CAAC;IAChBX,gBAAgB,GAAGX,iBAAiB,CAACU,EAAE,EAAED,EAAE,CAAC;EAC9C;EACA,IAAIE,gBAAgB,KAAKZ,SAAS,EAAE;IAClC,OAAOY,gBAAgB;EACzB;EACA;EACA,IAAIF,EAAE,KAAKC,EAAE,EAAE;IACb,OAAOM,oBAAoB,CAACf,CAAC,EAAEC,CAAC,CAAC;EACnC;EACA,OAAOO,EAAE,GAAGC,EAAE;AAChB,CAAC;AAED,MAAMa,WAAW,GAAGA,CAClBC,KAAK,EACLF,QAAQ,KACLA,QAAQ,GACTE,KAAK,CAACC,IAAI,CAACN,cAAc,CAACG,QAAQ,CAAC,IAAID,WAAW,CAACC,QAAQ,CAAC,CAAC,GAC7DE,KAAK;AAAC,IAAAE,QAAA,GAAAC,OAAA,CAAAC,OAAA,GAEKL,WAAW","ignoreList":[]}