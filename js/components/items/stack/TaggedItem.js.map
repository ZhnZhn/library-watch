{"version":3,"sources":["../../../../src/components/items/stack/TaggedItem.jsx"],"names":["CL","S","NONE","display","ITEM_CAPTION","paddingBottom","flexWrap","FISH_BADGE","color","fontSize","paddingRight","GREEN_BADGE","BLACK_BAGDE","SPAN_TAG","backgroundColor","paddingTop","paddingLeft","marginLeft","marginRight","marginTop","marginBottom","borderRadius","DATE_AGO","TITLE","isTouchable","is","HAS_TOUCH","DELTA","MARK_REMOVE","REMOVE_ITEM","REMOVE_UNDER","TOKEN_ANSWER","TOKEN_SCORE","TOKEN_VIEW","TOKEN_REPUTATION","_getTouchesClientX","ev","touches","clientX","_getChangedTouches","changedTouches","TaggedItem","withDnDStyle","props","_dragStart","persist","_clientX","dragStartWithDnDStyle","dataTransfer","effectAllowed","dropEffect","_onTouchStart","_onTouchMove","Math","abs","_dragEnd","preventDefault","dragEndWithDnDStyle","item","onRemoveUnder","_deltaX","_onHide","_onTouchEnd","_preventDefault","onRemoveItem","setState","isClosed","_renderTags","tags","map","tag","index","_itemHandlers","onTouchStart","bind","onTouchMove","onTouchEnd","draggable","onDragStart","onDragEnd","onDrop","onDragOver","onDragEnter","onDragLeave","state","question_id","is_answered","answer_count","score","view_count","title","dateAgo","link","owner","reputation","display_name","_style","Component","defaultProps"],"mappings":"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","file":"TaggedItem.js","sourcesContent":["import React, { Component } from 'react'\r\n\r\nimport is from '../../../utils/is'\r\nimport withDnDStyle from '../decorators/withDnDStyle'\r\nimport A from '../../zhn-atoms/A'\r\n\r\nconst CL = 'row-odd not-selected';\r\n\r\nconst S = {\r\n  NONE: {\r\n    display: 'none'\r\n  },\r\n  ITEM_CAPTION: {\r\n    paddingBottom: 8,\r\n    display: 'flex',\r\n    flexWrap: 'wrap'\r\n  },\r\n  /*\r\n  PURPLE_BADGE : {\r\n    color: '#a487d4',\r\n    fontSize: 18,\r\n    paddingRight: 8\r\n  },\r\n  */\r\n  FISH_BADGE: {\r\n    display: 'inline-block',\r\n    color: '#d7bb52',\r\n    fontSize: 18,\r\n    paddingRight: 8\r\n  },\r\n  GREEN_BADGE : {\r\n    display: 'inline-block',\r\n    color: '#80c040',\r\n    fontSize: 18,\r\n    paddingRight: 8\r\n  },\r\n  BLACK_BAGDE : {\r\n    display: 'inline-block',\r\n    color: 'black',\r\n    fontSize: 18,\r\n    paddingRight: 8\r\n  },\r\n  SPAN_TAG : {\r\n    display: 'inline-block',\r\n    color: 'black',\r\n    backgroundColor: 'gray',\r\n    paddingTop: 4,\r\n    paddingLeft: 8,\r\n    paddingRight: 8,\r\n    paddingBottom: 4,\r\n    marginLeft: 8,\r\n    marginRight: 8,\r\n    marginTop: 6,\r\n    marginBottom: 2,\r\n    borderRadius: 16\r\n  },\r\n  DATE_AGO: {\r\n    display: 'inline-block',\r\n    fontSize: '18px'\r\n  },\r\n  TITLE: {\r\n    paddingBottom: 8,\r\n    fontSize: '18px'\r\n  }\r\n};\r\n\r\n\r\n\r\nconst { isTouchable } = is;\r\nconst HAS_TOUCH = isTouchable();\r\n\r\nconst DELTA = HAS_TOUCH ? {\r\n  MARK_REMOVE: 50,\r\n  REMOVE_ITEM: 90,\r\n  REMOVE_UNDER: 150\r\n} : {\r\n  MARK_REMOVE: 25,\r\n  REMOVE_ITEM: 35,\r\n  REMOVE_UNDER: 150\r\n}\r\n\r\nconst TOKEN_ANSWER = HAS_TOUCH ? 'A' : (\r\n  <span role=\"img\" arial-label=\"hammer and pick\">&#x2692;</span>\r\n);\r\nconst TOKEN_SCORE = HAS_TOUCH ? 'S' : (\r\n  <span role=\"img\" aria-label=\"fish\">&#x1F41F;</span>\r\n);\r\nconst TOKEN_VIEW = HAS_TOUCH ? 'V' : (\r\n  <span role=\"img\" aria-label=\"wheel of dharma\">&#x2638;</span>\r\n);\r\nconst TOKEN_REPUTATION = HAS_TOUCH ? 'R' : (\r\n  <span role=\"img\" arial-label=\"shamrock\">&#x2618;</span>\r\n);\r\n\r\n\r\nconst _getTouchesClientX = (ev) =>\r\n  (((ev || {}).touches || [])[0] || {}).clientX || 0;\r\nconst _getChangedTouches = (ev) =>\r\n  (((ev || {}).changedTouches || [])[0] || {}).clientX || 0;\r\n\r\n\r\n@withDnDStyle\r\nclass TaggedItem extends Component {\r\n  static defaultProps = {\r\n    onRemoveUnder: () => {},\r\n    onRemoveItem: () => {}\r\n  }\r\n\r\n  constructor(props){\r\n    super(props)\r\n    this._itemHandlers = HAS_TOUCH\r\n      ? {\r\n          onTouchStart: this._onTouchStart.bind(this),\r\n          onTouchMove: this._onTouchMove.bind(this),\r\n          onTouchEnd: this._onTouchEnd.bind(this)\r\n        }\r\n      : {\r\n          draggable: true,\r\n          onDragStart: this._dragStart.bind(this),\r\n          onDragEnd: this._dragEnd.bind(this),\r\n          onDrop: this._preventDefault,\r\n          onDragOver: this._preventDefault,\r\n          onDragEnter: this._preventDefault,\r\n          onDragLeave: this._preventDefault\r\n        }\r\n\r\n    this.state = {\r\n      isClosed: false\r\n    }\r\n  }\r\n\r\n  _dragStart = (ev) => {\r\n    ev.persist()\r\n    this._clientX = ev.clientX\r\n    this.dragStartWithDnDStyle(ev)\r\n    if (ev && ev.dataTransfer) {\r\n      ev.dataTransfer.effectAllowed=\"move\"\r\n      ev.dataTransfer.dropEffect=\"move\"\r\n    }\r\n  }\r\n  _onTouchStart = (ev) => {\r\n    ev.persist()\r\n    const _clientX = _getTouchesClientX(ev);\r\n    if (_clientX) {\r\n      this._clientX = _clientX\r\n    }\r\n  }\r\n  _onTouchMove = (ev) => {\r\n    ev.persist()\r\n    const _clientX = _getTouchesClientX(ev);\r\n    if (_clientX\r\n       && Math.abs(this._clientX -  _clientX) > DELTA.MARK_REMOVE) {\r\n      this.dragStartWithDnDStyle(ev)\r\n    }\r\n\r\n  }\r\n  _dragEnd = (ev) => {\r\n    ev.preventDefault()\r\n    ev.persist()\r\n    this.dragEndWithDnDStyle()\r\n    const _deltaX = Math.abs(this._clientX - ev.clientX)\r\n        , { item, onRemoveUnder } = this.props;\r\n    if (_deltaX > DELTA.REMOVE_UNDER) {\r\n      onRemoveUnder(item)\r\n    } else if (_deltaX > DELTA.REMOVE_ITEM){\r\n      this._onHide()\r\n    }\r\n  }\r\n  _onTouchEnd = (ev) => {\r\n    //ev.preventDefault()\r\n    ev.persist()\r\n    this.dragEndWithDnDStyle()\r\n    const _clientX = _getChangedTouches(ev);\r\n    if (_clientX) {\r\n      const _deltaX = Math.abs(this._clientX - _clientX)\r\n          , { item, onRemoveUnder } = this.props;\r\n      if (_deltaX > DELTA.REMOVE_UNDER) {\r\n        onRemoveUnder(item)\r\n      } else if (_deltaX > DELTA.REMOVE_ITEM){\r\n        this._onHide()\r\n      }\r\n    }\r\n  }\r\n  _preventDefault = (ev) => {\r\n    ev.preventDefault()\r\n  }\r\n\r\n  _onHide = () => {\r\n     const { onRemoveItem, item } = this.props;\r\n     onRemoveItem(item)\r\n     this.setState({ isClosed: true })\r\n   }\r\n\r\n  _renderTags = (tags) => {\r\n    return tags.map((tag, index) => {\r\n       return (\r\n         <span key={index} style={S.SPAN_TAG}>\r\n            {tag}\r\n         </span>\r\n       );\r\n    })\r\n  }\r\n\r\n  render(){\r\n    const { item } = this.props\r\n    , {\r\n       question_id,\r\n       is_answered,\r\n       answer_count, score, view_count,\r\n       title, dateAgo, link,\r\n       owner={}, tags=[]\r\n    } = item\r\n    , { reputation, display_name } = owner\r\n    , { isClosed } = this.state\r\n    , _style = isClosed ? S.NONE : void 0;\r\n    return (\r\n      <div\r\n        key={question_id}\r\n        className={CL}\r\n        style={_style}\r\n        {...this._itemHandlers}\r\n      >\r\n         <a href={link}>\r\n         <div style={S.ITEM_CAPTION}>\r\n           <span style={is_answered ? S.GREEN_BADGE: S.FISH_BADGE}>\r\n             {TOKEN_ANSWER}&nbsp;{answer_count}\r\n           </span>\r\n           <span style={S.FISH_BADGE}>\r\n             {TOKEN_SCORE}&nbsp;{score}\r\n           </span>\r\n           <span style={S.BLACK_BAGDE}>\r\n             {TOKEN_VIEW}&nbsp;{view_count}\r\n           </span>\r\n           <span style={S.GREEN_BADGE}>\r\n             {TOKEN_REPUTATION}&nbsp;{reputation}\r\n           </span>\r\n           <span style={S.BLACK_BAGDE}>\r\n             {display_name}\r\n           </span>\r\n           <A.DateAgo\r\n              style={S.DATE_AGO}\r\n              dateAgo={dateAgo}\r\n              date=\"\"\r\n           />\r\n         </div>\r\n           <div style={S.TITLE}>\r\n             {title}\r\n           </div>\r\n           <div>\r\n             {this._renderTags(tags)}\r\n           </div>\r\n         </a>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default TaggedItem\r\n"]}