{"version":3,"sources":["../../../src/components/dialogs/DialogType3A.jsx"],"names":["_initFromDate","DateUtils","getFromDate","_initToDate","getToDate","_onTestDate","isValidDate","DialogType3A","withValidationLoad","props","_handleDefault","datesFragment","setValues","_handleClear","inputRepo","setValue","setState","validationMessages","_handleLoad","_handleLoadWithValidation","_createValidationMessages","_createLoadOption","msg","repo","getValue","concat","oneTitle","getValidation","isValid","datesMsg","length","getValues","fromDate","toDate","requestType","_handleClose","_handleCloseWithValidation","stock","_commandButtons","state","nextProps","nextState","isShow","caption","onShow","onePlaceholder","c","Component"],"mappings":"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","file":"DialogType3A.js","sourcesContent":["import React, { Component } from 'react'\r\n//import PropTypes from \"prop-types\";\r\n\r\nimport DateUtils from '../../utils/DateUtils'\r\n\r\nimport Dialog from '../zhnMoleculs/Dialog'\r\nimport ToolBarButton from '../header/ToolBarButton'\r\nimport RowInputText from './RowInputText'\r\nimport DatesFragment from './DatesFragment'\r\nimport ValidationMessagesFragment from './ValidationMessagesFragment'\r\n\r\nimport withValidationLoad from './decorators/withValidationLoad'\r\n\r\nconst _initFromDate = DateUtils.getFromDate(1)\r\n    , _initToDate = DateUtils.getToDate()\r\n    , _onTestDate = DateUtils.isValidDate;\r\n\r\n@withValidationLoad\r\nclass DialogType3A extends Component {\r\n  /*\r\n  static propTypes = {\r\n    caption: PropTypes.string,\r\n    requestType: PropTypes.string,\r\n    oneTitle: PropTypes.string,\r\n    onePlaceholder: PropTypes.string,\r\n    isShow: PropTypes.bool,\r\n    onShow: PropTypes.func\r\n  }\r\n  */\r\n\r\n  constructor(props){\r\n    super()\r\n    this.stock = null\r\n    this._commandButtons = [\r\n      <ToolBarButton\r\n        type=\"TypeC\"\r\n        caption=\"Default\"\r\n        onClick={this._handleDefault}\r\n      />,\r\n      <ToolBarButton\r\n        type=\"TypeC\"\r\n        caption=\"Clear\"\r\n        onClick={this._handleClear}\r\n      />,\r\n     <ToolBarButton\r\n       type=\"TypeC\"\r\n       caption=\"Load\"\r\n       onClick={this._handleLoad}\r\n     />\r\n    ]\r\n    this.state = {\r\n      validationMessages : []\r\n    }\r\n  }\r\n\r\n  shouldComponentUpdate(nextProps, nextState){\r\n    if (this.props !== nextProps){\r\n       if (this.props.isShow === nextProps.isShow){\r\n          return false;\r\n       }\r\n    }\r\n    return true;\r\n  }\r\n\r\n _handleDefault = () => {\r\n    this.datesFragment.setValues(_initFromDate, _initToDate)\r\n }\r\n\r\n _handleClear = () => {\r\n    this.inputRepo.setValue('')\r\n    this.setState({ validationMessages: []})\r\n }\r\n\r\n  _handleLoad = () => {\r\n     this._handleLoadWithValidation(\r\n       this._createValidationMessages(),\r\n       this._createLoadOption\r\n     )\r\n   }\r\n   _createValidationMessages = () => {\r\n       let msg = [];\r\n\r\n       const repo = this.inputRepo.getValue()\r\n       if (!repo) {\r\n          msg = msg.concat(`${this.props.oneTitle} is required`);\r\n       }\r\n\r\n       const { isValid, datesMsg } = this.datesFragment.getValidation();\r\n       if (!isValid) { msg = msg.concat(datesMsg); }\r\n\r\n       msg.isValid = (msg.length === 0) ? true : false;\r\n       return msg;\r\n   }\r\n   _createLoadOption = () => {\r\n     const repo = this.inputRepo.getValue()\r\n         , { fromDate, toDate } = this.datesFragment.getValues()\r\n         , { requestType } = this.props;\r\n\r\n     return {\r\n       repo, requestType,\r\n       fromDate, toDate\r\n     };\r\n   }\r\n\r\n   _handleClose = () => {\r\n      this._handleCloseWithValidation(\r\n         this._createValidationMessages\r\n      );\r\n    }\r\n\r\n   render(){\r\n     const {\r\n            caption, isShow, onShow,\r\n            oneTitle, onePlaceholder\r\n          } = this.props\r\n        , {validationMessages} = this.state;\r\n\r\n    return (\r\n       <Dialog\r\n           caption={caption}\r\n           isShow={isShow}\r\n           commandButtons={this._commandButtons}\r\n           onShowChart={onShow}\r\n           onClose={this._handleClose}\r\n       >\r\n        <RowInputText\r\n           ref={c => this.inputRepo = c}\r\n           caption={oneTitle}\r\n           placeholder={onePlaceholder}\r\n        />\r\n        <DatesFragment\r\n            ref={c => this.datesFragment = c}\r\n            initFromDate={_initFromDate}\r\n            initToDate={_initToDate}\r\n            onTestDate={_onTestDate}\r\n        />\r\n        <ValidationMessagesFragment\r\n           validationMessages={validationMessages}\r\n        />\r\n      </Dialog>\r\n    );\r\n  }\r\n}\r\n\r\nexport default DialogType3A\r\n"]}