{"version":3,"sources":["../../../src/components/dialogs/DialogType2.jsx"],"names":["dateConfig","helperFns","crMenuMore","crButtons","toUTCSecond","_sortOptions","caption","value","_initFromDate","_initToDate","_onTestDate","DialogType2","Decor","dialog","props","_handleSelectSortBy","item","sortByItem","_handleClear","inputOne","setValue","setState","validationMessages","_handleLoad","_handleLoadWithValidation","_createValidationMessages","_createLoadOption","msg","datesFragment","getValidation","isValid","datesMsg","concat","length","repo","getValue","getValues","fromDate","toDate","_fromDate","_toDate","requestType","sort","fromdate","todate","_handleClose","_handleCloseWithValidation","_refInputOne","c","_refDatesFragment","stock","toolbarButtons","_createType2WithToolbar","hasDate","_menuMore","toggleDates","_clickDateWithToolbar","toggleLabels","_clickLabelWithToolbar","toggleToolBar","_toggleWithToolbar","_commandButtons","inst","state","_withInitialState","shouldComponentUpdate","nextProps","nextState","isShow","render","onShow","oneTitle","onePlaceholder","isToolbar","isShowLabels","isShowDate","Component"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\n//import PropTypes from \"prop-types\";\r\n\r\nimport D from './DialogCell'\r\nimport Decor from './decorators/Decorators'\r\nimport helperFns from './helperFns/helperFns'\r\n\r\nconst {\r\n  dateConfig,\r\n  crMenuMore, crButtons,\r\n  toUTCSecond\r\n} = helperFns;\r\n\r\nconst _sortOptions = [\r\n  { caption: \"Activity, Recent Day\", value: \"activity\" },\r\n  { caption: \"Creation Date\", value: \"creation\"},\r\n  { caption: \"Score\", value: \"votes\" },\r\n  { caption: \"Hot Tab\", value: \"hot\" },\r\n  { caption: \"Hot Week Tab\", value: \"week\" },\r\n  { caption: \"Hot Month Tab\", value: \"month\" }\r\n];\r\n\r\nconst {\r\n  _initFromDate,\r\n  _initToDate,\r\n  _onTestDate\r\n} = dateConfig;\r\n\r\n@Decor.dialog\r\nclass DialogType2 extends Component{\r\n  /*\r\n  static propTypes = {\r\n    caption: PropTypes.string,\r\n    requestType: PropTypes.string,\r\n    oneTitle: PropTypes.string,\r\n    onePlaceholder: PropTypes.string,\r\n    isShow: PropTypes.bool,\r\n    onShow: PropTypes.func\r\n  }\r\n  */\r\n  constructor(props){\r\n    super(props)\r\n    this.stock = null\r\n    this.sortByItem = {}\r\n    this.toolbarButtons = this._createType2WithToolbar(props, {\r\n      hasDate: true\r\n    })\r\n    this._menuMore = crMenuMore(this, {\r\n      toggleDates: this._clickDateWithToolbar,\r\n      toggleLabels: this._clickLabelWithToolbar,\r\n      toggleToolBar: this._toggleWithToolbar,\r\n    })\r\n    this._commandButtons = crButtons({ inst: this })\r\n    this.state = {\r\n      ...this._withInitialState()\r\n    }\r\n  }\r\n\r\n\r\n  shouldComponentUpdate(nextProps, nextState){\r\n    if (this.props !== nextProps){\r\n       if (this.props.isShow === nextProps.isShow){\r\n          return false;\r\n       }\r\n    }\r\n    return true;\r\n  }\r\n\r\n _handleSelectSortBy = (item) => {\r\n   this.sortByItem = item\r\n }\r\n\r\n _handleClear = () => {\r\n    this.inputOne.setValue('')\r\n    this.setState({ validationMessages: [] })\r\n }\r\n\r\n _handleLoad = () => {\r\n    this._handleLoadWithValidation(\r\n      this._createValidationMessages(),\r\n      this._createLoadOption\r\n    )\r\n  }\r\n\r\n  _createValidationMessages = () => {\r\n      let msg = [];\r\n\r\n      const { isValid, datesMsg } = this.datesFragment.getValidation();\r\n      if (!isValid) { msg = msg.concat(datesMsg); }\r\n\r\n      msg.isValid = (msg.length === 0) ? true : false;\r\n      return msg;\r\n  }\r\n _createLoadOption = () => {\r\n   const repo = this.inputOne.getValue()\r\n       , { fromDate, toDate } = this.datesFragment.getValues()\r\n       , _fromDate = toUTCSecond(fromDate)\r\n       , _toDate = toUTCSecond(toDate)\r\n       , { requestType } = this.props\r\n       , { value } = this.sortByItem;\r\n\r\n   return {\r\n     repo, requestType,\r\n     sort: value,\r\n     fromdate: _fromDate,\r\n     todate: _toDate\r\n   };\r\n }\r\n\r\n _handleClose = () => {\r\n    this._handleCloseWithValidation(\r\n       this._createValidationMessages\r\n    )\r\n  }\r\n\r\n  _refInputOne = c => this.inputOne = c\r\n  _refDatesFragment = c => this.datesFragment = c\r\n\r\n  render(){\r\n    const {\r\n        caption, isShow, onShow,\r\n        oneTitle, onePlaceholder\r\n      } = this.props\r\n    , {\r\n      isToolbar,\r\n      isShowLabels,\r\n      isShowDate,\r\n      validationMessages\r\n    } = this.state;\r\n\r\n    return (\r\n       <D.DraggableDialog\r\n           isShow={isShow}\r\n           caption={caption}\r\n           menuModel={this._menuMore}\r\n           commandButtons={this._commandButtons}\r\n           onShowChart={onShow}\r\n           onClose={this._handleClose}\r\n       >\r\n         <D.Toolbar\r\n            isShow={isToolbar}\r\n            buttons={this.toolbarButtons}\r\n         />\r\n        <D.RowInputText\r\n           ref={this._refInputOne}\r\n           isShowLabel={isShowLabels}\r\n           caption={oneTitle}\r\n           placeholder={onePlaceholder}\r\n           onEnter={this._handleLoad}\r\n        />\r\n        <D.RowInputSelect\r\n           isShowLabel={isShowLabels}\r\n           caption=\"Sort By\"\r\n           placeholder=\"Default: Hot Week Tab\"\r\n           options={_sortOptions}\r\n           onSelect={this._handleSelectSortBy}\r\n        />\r\n        <D.ShowHide isShow={isShowDate}>\r\n          <D.Dates\r\n              ref={this._refDatesFragment}\r\n              isShowLabels={isShowLabels}\r\n              initFromDate={_initFromDate}\r\n              initToDate={_initToDate}\r\n              onTestDate={_onTestDate}\r\n          />\r\n        </D.ShowHide>\r\n        <D.ValidationMessages\r\n           validationMessages={validationMessages}\r\n        />\r\n      </D.DraggableDialog>\r\n    );\r\n  }\r\n}\r\n\r\nexport default DialogType2\r\n"],"file":"DialogType2.js"}