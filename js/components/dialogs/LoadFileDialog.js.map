{"version":3,"file":"LoadFileDialog.js","names":["_uiApi","require","_memoFn","_useDialogButtons","_interopRequireDefault","_ModalDialog","_InputFileReader","_DialogCell","_jsxRuntime","MSG_FILE_NOT_CHOOSED","S_MODAL_DIALOG","minWidth","S_ROW_INPUT_FILE","margin","S_ROW_VALIDATION","width","marginRight","LoadFileDialog","memoIsShow","_ref","isShow","data","onClose","onLoad","_refTupleEventFile","useRef","_hChange","useCallback","results","_results","_tupleEventFile","setRefValue","validationMessages","COMMAND_BUTTONS","hClose","useDialogButtons","setValidationMessages","clearValidationMessages","progressEvent","file","getRefValue","jsxs","default","style","caption","commandButtons","children","jsx","Row","as","onChange","ValidationMessages","_default","exports"],"sources":["../../../src/components/dialogs/LoadFileDialog.jsx"],"sourcesContent":["import {\r\n  useRef,\r\n  useCallback,\r\n  getRefValue,\r\n  setRefValue\r\n} from '../uiApi';\r\n\r\nimport { memoIsShow } from '../hoc/memoFn';\r\n\r\nimport useDialogButtons from './useDialogButtons';\r\nimport ModalDialog from '../zhn-moleculs/ModalDialog';\r\nimport InputFileReader from '../zhn/InputFileReader';\r\nimport D from './DialogCell';\r\n\r\nconst MSG_FILE_NOT_CHOOSED = 'Please choose file for loading.'\r\n, S_MODAL_DIALOG = { minWidth: 320 }\r\n, S_ROW_INPUT_FILE = { margin: '16px 0' }\r\n, S_ROW_VALIDATION = {\r\n  width: '100%',\r\n  marginRight: 16\r\n};\r\n\r\nconst LoadFileDialog = memoIsShow(({\r\n  isShow,\r\n  data,\r\n  onClose\r\n}) => {\r\n  const { onLoad } = data\r\n  , _refTupleEventFile = useRef(null)\r\n  , _hChange = useCallback(results => {\r\n    const [_results] = results || []\r\n    , _tupleEventFile = _results\r\n         //progressEvent, file\r\n       ? [_results[0], _results[1]]\r\n       : null\r\n    setRefValue(_refTupleEventFile, _tupleEventFile)\r\n  }, [])\r\n  , [\r\n    validationMessages,\r\n    COMMAND_BUTTONS,\r\n    hClose\r\n  ] = useDialogButtons((\r\n    setValidationMessages,\r\n    clearValidationMessages\r\n  ) => {\r\n    const [\r\n      progressEvent,\r\n      file\r\n    ] = getRefValue(_refTupleEventFile) || [];\r\n    if (progressEvent && file){\r\n      onLoad({ progressEvent });\r\n      clearValidationMessages()\r\n    } else {\r\n      setValidationMessages([MSG_FILE_NOT_CHOOSED])\r\n    }\r\n  }, onClose);\r\n\r\n  return (\r\n    <ModalDialog\r\n      style={S_MODAL_DIALOG}\r\n      caption=\"Load Watch Items from File\"\r\n      isShow={isShow}\r\n      commandButtons={COMMAND_BUTTONS}\r\n      onClose={hClose}\r\n    >\r\n       <D.Row style={S_ROW_INPUT_FILE}>\r\n          <InputFileReader\r\n             as=\"text\"\r\n             onChange={_hChange}\r\n          />\r\n       </D.Row>\r\n       <D.Row style={S_ROW_VALIDATION}>\r\n         <D.ValidationMessages\r\n            validationMessages={validationMessages}\r\n         />\r\n       </D.Row>\r\n    </ModalDialog>\r\n  );\r\n});\r\n\r\nexport default LoadFileDialog\r\n"],"mappings":";;;;;AAAA,IAAAA,MAAA,GAAAC,OAAA;AAOA,IAAAC,OAAA,GAAAD,OAAA;AAEA,IAAAE,iBAAA,GAAAC,sBAAA,CAAAH,OAAA;AACA,IAAAI,YAAA,GAAAD,sBAAA,CAAAH,OAAA;AACA,IAAAK,gBAAA,GAAAF,sBAAA,CAAAH,OAAA;AACA,IAAAM,WAAA,GAAAH,sBAAA,CAAAH,OAAA;AAA6B,IAAAO,WAAA,GAAAP,OAAA;AAE7B,MAAMQ,oBAAoB,GAAG,iCAAiC;EAC5DC,cAAc,GAAG;IAAEC,QAAQ,EAAE;EAAI,CAAC;EAClCC,gBAAgB,GAAG;IAAEC,MAAM,EAAE;EAAS,CAAC;EACvCC,gBAAgB,GAAG;IACnBC,KAAK,EAAE,MAAM;IACbC,WAAW,EAAE;EACf,CAAC;AAED,MAAMC,cAAc,GAAG,IAAAC,kBAAU,EAACC,IAAA,IAI5B;EAAA,IAJ6B;IACjCC,MAAM;IACNC,IAAI;IACJC;EACF,CAAC,GAAAH,IAAA;EACC,MAAM;MAAEI;IAAO,CAAC,GAAGF,IAAI;IACrBG,kBAAkB,GAAG,IAAAC,aAAM,EAAC,IAAI,CAAC;IACjCC,QAAQ,GAAG,IAAAC,kBAAW,EAACC,OAAO,IAAI;MAClC,MAAM,CAACC,QAAQ,CAAC,GAAGD,OAAO,IAAI,EAAE;QAC9BE,eAAe,GAAGD;QACf;QAAA,EACA,CAACA,QAAQ,CAAC,CAAC,CAAC,EAAEA,QAAQ,CAAC,CAAC,CAAC,CAAC,GAC1B,IAAI;MACT,IAAAE,kBAAW,EAACP,kBAAkB,EAAEM,eAAe,CAAC;IAClD,CAAC,EAAE,EAAE,CAAC;IACJ,CACAE,kBAAkB,EAClBC,eAAe,EACfC,MAAM,CACP,GAAG,IAAAC,yBAAgB,EAAC,CACnBC,qBAAqB,EACrBC,uBAAuB,KACpB;MACH,MAAM,CACJC,aAAa,EACbC,IAAI,CACL,GAAG,IAAAC,kBAAW,EAAChB,kBAAkB,CAAC,IAAI,EAAE;MACzC,IAAIc,aAAa,IAAIC,IAAI,EAAC;QACxBhB,MAAM,CAAC;UAAEe;QAAc,CAAC,CAAC;QACzBD,uBAAuB,CAAC,CAAC;MAC3B,CAAC,MAAM;QACLD,qBAAqB,CAAC,CAAC3B,oBAAoB,CAAC,CAAC;MAC/C;IACF,CAAC,EAAEa,OAAO,CAAC;EAEX,oBACE,IAAAd,WAAA,CAAAiC,IAAA,EAACpC,YAAA,CAAAqC,OAAW;IACVC,KAAK,EAAEjC,cAAe;IACtBkC,OAAO,EAAC,4BAA4B;IACpCxB,MAAM,EAAEA,MAAO;IACfyB,cAAc,EAAEZ,eAAgB;IAChCX,OAAO,EAAEY,MAAO;IAAAY,QAAA,gBAEf,IAAAtC,WAAA,CAAAuC,GAAA,EAACxC,WAAA,CAAAmC,OAAC,CAACM,GAAG;MAACL,KAAK,EAAE/B,gBAAiB;MAAAkC,QAAA,eAC5B,IAAAtC,WAAA,CAAAuC,GAAA,EAACzC,gBAAA,CAAAoC,OAAe;QACbO,EAAE,EAAC,MAAM;QACTC,QAAQ,EAAExB;MAAS,CACrB;IAAC,CACE,CAAC,eACR,IAAAlB,WAAA,CAAAuC,GAAA,EAACxC,WAAA,CAAAmC,OAAC,CAACM,GAAG;MAACL,KAAK,EAAE7B,gBAAiB;MAAAgC,QAAA,eAC7B,IAAAtC,WAAA,CAAAuC,GAAA,EAACxC,WAAA,CAAAmC,OAAC,CAACS,kBAAkB;QAClBnB,kBAAkB,EAAEA;MAAmB,CACzC;IAAC,CACG,CAAC;EAAA,CACE,CAAC;AAElB,CAAC,CAAC;AAAC,IAAAoB,QAAA,GAAAC,OAAA,CAAAX,OAAA,GAEYzB,cAAc","ignoreList":[]}