{"version":3,"sources":["../../../src/components/dialogs/DialogType3.jsx"],"names":["_sortOptions","caption","value","_initFromDate","DateUtils","getFromDate","_initToDate","getToDate","_onTestDate","isValidDate","DialogType3","withValidationLoad","props","_handleSelectSortBy","item","sortByItem","_handleDefault","datesFragment","setValues","setState","validationMessages","_handleClear","inputRepo","setValue","inputTwo","_handleLoad","_handleLoadWithValidation","_createValidationMessages","_createLoadOption","msg","getValidation","isValid","datesMsg","concat","length","getValue","intitle","getValues","fromDate","toDate","_fromDate","toUTCMillis","_toDate","requestType","repo","sort","fromdate","todate","_handleClose","_handleCloseWithValidation","stock","_commandButtons","state","nextProps","nextState","isShow","onShow","oneTitle","onePlaceholder","twoTitle","twoPlaceholder","c","Component"],"mappings":"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","file":"DialogType3.js","sourcesContent":["import React, { Component } from 'react'\r\n//import PropTypes from \"prop-types\";\r\n\r\nimport DateUtils from '../../utils/DateUtils'\r\n\r\nimport Dialog from '../zhnMoleculs/Dialog'\r\nimport ToolBarButton from '../header/ToolBarButton'\r\nimport RowInputText from './RowInputText'\r\nimport RowInputSelect from './RowInputSelect'\r\nimport DatesFragment from './DatesFragment'\r\nimport ValidationMessagesFragment from './ValidationMessagesFragment'\r\n\r\nimport withValidationLoad from './decorators/withValidationLoad'\r\n\r\nconst _sortOptions = [\r\n  { caption: \"Activity, Recent Day\", value: \"activity\" },\r\n  { caption: \"Creation Date\", value: \"creation\"},\r\n  { caption: \"Score\", value: \"votes\" },\r\n  { caption: \"Relevance\", value: \"relevance\" }\r\n]\r\n\r\nconst _initFromDate = DateUtils.getFromDate(1)\r\n    , _initToDate = DateUtils.getToDate()\r\n    , _onTestDate = DateUtils.isValidDate;\r\n\r\n\r\n@withValidationLoad\r\nclass DialogType3 extends Component {\r\n  /*\r\n  static propTypes = {\r\n    caption: PropTypes.string,\r\n    requestType: PropTypes.string,\r\n    oneTitle: PropTypes.string,\r\n    onePlaceholder: PropTypes.string,\r\n    twoTitle: PropTypes.string,\r\n    twoPlaceholder: PropTypes.string,\r\n    isShow: PropTypes.bool,\r\n    onShow: PropTypes.func\r\n  }\r\n  */\r\n\r\n  constructor(props){\r\n    super()\r\n    this.stock = null\r\n    this.sortByItem = {}\r\n    this._commandButtons = [\r\n      <ToolBarButton\r\n        type=\"TypeC\"\r\n        caption=\"Default\"\r\n        onClick={this._handleDefault}\r\n       />,\r\n      <ToolBarButton\r\n        type=\"TypeC\"\r\n        caption=\"Clear\"\r\n        onClick={this._handleClear}\r\n       />,\r\n       <ToolBarButton\r\n         type=\"TypeC\"\r\n         caption=\"Load\"\r\n         onClick={this._handleLoad}\r\n        />\r\n    ]\r\n    this.state = {\r\n      validationMessages : []\r\n    }\r\n  }\r\n\r\n  shouldComponentUpdate(nextProps, nextState){\r\n    if (this.props !== nextProps){\r\n       if (this.props.isShow === nextProps.isShow){\r\n          return false;\r\n       }\r\n    }\r\n    return true;\r\n  }\r\n\r\n _handleSelectSortBy = (item) => {\r\n   this.sortByItem = item\r\n }\r\n\r\n _handleDefault = () => {\r\n   this.datesFragment.setValues(_initFromDate, _initToDate)\r\n   this.setState({ validationMessages: [] })\r\n }\r\n\r\n _handleClear = () => {\r\n    this.inputRepo.setValue('')\r\n    this.inputTwo.setValue('')\r\n    this.setState({ validationMessages: [] })\r\n }\r\n\r\n _handleLoad = () => {\r\n    this._handleLoadWithValidation(\r\n      this._createValidationMessages(),\r\n      this._createLoadOption\r\n    )\r\n  }\r\n\r\n  _createValidationMessages = () => {\r\n      let msg = [];\r\n\r\n      const { isValid, datesMsg } = this.datesFragment.getValidation();\r\n      if (!isValid) { msg = msg.concat(datesMsg) }\r\n\r\n      msg.isValid = (msg.length === 0) ? true : false;\r\n      return msg;\r\n  }\r\n _createLoadOption = () => {\r\n   const repo = this.inputRepo.getValue()\r\n       , intitle = this.inputTwo.getValue()\r\n       , { fromDate, toDate } = this.datesFragment.getValues()\r\n       , _fromDate = DateUtils.toUTCMillis(fromDate)/1000\r\n       , _toDate = DateUtils.toUTCMillis(toDate)/1000\r\n       , { requestType } = this.props\r\n       , { value } = this.sortByItem;\r\n\r\n   return {\r\n     repo, requestType, intitle,\r\n     sort : value,\r\n     fromdate : _fromDate,\r\n     todate : _toDate\r\n   };\r\n }\r\n\r\n _handleClose = () => {\r\n    this._handleCloseWithValidation(\r\n       this._createValidationMessages\r\n    )\r\n  }\r\n\r\n  render(){\r\n    const {\r\n            caption, isShow, onShow,\r\n            oneTitle, onePlaceholder,\r\n            twoTitle, twoPlaceholder\r\n          } = this.props\r\n        , { validationMessages } = this.state;\r\n\r\n    return (\r\n       <Dialog\r\n           caption={caption}\r\n           isShow={isShow}\r\n           commandButtons={this._commandButtons}\r\n           onShowChart={onShow}\r\n           onClose={this._handleClose}\r\n       >\r\n        <RowInputText\r\n           ref={c => this.inputRepo = c}\r\n           caption={oneTitle}\r\n           placeholder={onePlaceholder}\r\n        />\r\n        <RowInputText\r\n           ref={c => this.inputTwo = c}\r\n           caption={twoTitle}\r\n           placeholder={twoPlaceholder}\r\n        />\r\n        <RowInputSelect\r\n           caption=\"Sort By:\"\r\n           placeholder=\"Default: Activity\"\r\n           options={_sortOptions}\r\n           onSelect={this._handleSelectSortBy}\r\n        />\r\n        <DatesFragment\r\n            ref={c => this.datesFragment = c}\r\n            initFromDate={_initFromDate}\r\n            initToDate={_initToDate}\r\n            onTestDate={_onTestDate}\r\n        />\r\n        <ValidationMessagesFragment\r\n           validationMessages={validationMessages}\r\n        />\r\n      </Dialog>\r\n    );\r\n  }\r\n}\r\n\r\nexport default DialogType3\r\n"]}