{"version":3,"file":"useStepHandlers.js","names":["_uiApi","require","_useProperty","_interopRequireDefault","_useOptionDecorator","_getItemLength","element","children","length","useStepHandlers","refOptionsElement","useRef","refIndexElement","setActiveIndexOption","getActiveIndexOption","useProperty","getActiveElement","useMemo","getRefValue","childNodes","decorateActiveElement","undecorateActiveElement","useOptionDecorator","prevComp","_optionsElement","scrollTop","nextComp","offsetTop","bottomComp","_default","exports","default"],"sources":["../../../src/components/zhn-select/useStepHandlers.js"],"sourcesContent":["import {\r\n  useRef,\r\n  useMemo,\r\n  getRefValue\r\n} from '../uiApi';\r\n\r\nimport useProperty from '../hooks/useProperty';\r\nimport useOptionDecorator from './useOptionDecorator';\r\n\r\nconst _getItemLength = (\r\n  element\r\n) => (element.children || {}).length;\r\n\r\n/*eslint-disable react-hooks/exhaustive-deps */\r\nconst useStepHandlers = () => {\r\n  const refOptionsElement = useRef()\r\n  , refIndexElement = useRef()\r\n  , [\r\n    setActiveIndexOption,\r\n    getActiveIndexOption\r\n  ] = useProperty(0)\r\n  , getActiveElement = useMemo(\r\n    () => () => ((getRefValue(refOptionsElement) || {}).childNodes || [])[getActiveIndexOption()],\r\n    []\r\n  )\r\n  , [\r\n    decorateActiveElement,\r\n    undecorateActiveElement\r\n  ] = useOptionDecorator(\r\n    refIndexElement,\r\n    getActiveElement\r\n  );\r\n\r\n  return [\r\n    refOptionsElement,\r\n    refIndexElement,\r\n    setActiveIndexOption,\r\n    getActiveIndexOption,\r\n    getActiveElement,\r\n    decorateActiveElement,\r\n    undecorateActiveElement,\r\n    ...useMemo(() => [\r\n      //stepDownOption\r\n      () => {\r\n        const prevComp = getActiveElement();\r\n\r\n        if (prevComp){\r\n           undecorateActiveElement(prevComp);\r\n           const _optionsElement = getRefValue(refOptionsElement);\r\n\r\n           setActiveIndexOption(getActiveIndexOption()+1)\r\n           if (getActiveIndexOption() >= _getItemLength(_optionsElement)){\r\n              setActiveIndexOption(0)\r\n              _optionsElement.scrollTop = 0\r\n           }\r\n\r\n           const nextComp = getActiveElement();\r\n           decorateActiveElement(nextComp)\r\n\r\n           const offsetTop = nextComp.offsetTop\r\n           , scrollTop = _optionsElement.scrollTop;\r\n           if ((offsetTop - scrollTop) > 70){\r\n              _optionsElement.scrollTop += (offsetTop - scrollTop - 70);\r\n           }\r\n        }\r\n      },\r\n      //stepUpOption\r\n      () => {\r\n        const prevComp = getActiveElement();\r\n        if (prevComp){\r\n          undecorateActiveElement(prevComp);\r\n          const _optionsElement = getRefValue(refOptionsElement);\r\n\r\n          setActiveIndexOption(getActiveIndexOption() - 1)\r\n\r\n          if (getActiveIndexOption() < 0){\r\n            setActiveIndexOption(_getItemLength(_optionsElement) - 1)\r\n            const bottomComp = getActiveElement();\r\n            _optionsElement.scrollTop = bottomComp.offsetTop\r\n          }\r\n\r\n          const nextComp = getActiveElement();\r\n          decorateActiveElement(nextComp);\r\n\r\n          const offsetTop = nextComp.offsetTop\r\n          , scrollTop = _optionsElement.scrollTop;\r\n          if ((offsetTop - scrollTop) < 70){\r\n            _optionsElement.scrollTop -= (70 - (offsetTop - scrollTop) );\r\n          }\r\n        }\r\n      }\r\n    ], [])\r\n ];\r\n}\r\n// getActiveIndexOption, setActiveIndexOption, getActiveItemElement,\r\n// decorateActiveElement, undecorateActiveElement,\r\n/*eslint-enable react-hooks/exhaustive-deps */\r\n\r\n\r\nexport default useStepHandlers\r\n"],"mappings":"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","ignoreList":[]}