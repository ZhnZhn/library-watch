{"version":3,"sources":["../../../src/components/zhn-select/InputSelect.jsx"],"names":["CLASS_ROW_ACTIVE","NO_ITEM","caption","value","styles","rootDiv","position","display","backgroundColor","width","inputText","background","border","outline","height","paddingLeft","color","fontSize","fontWeight","rootOptionDiv","left","zIndex","borderBottomLeftRadius","borderBottomRightRadius","optionDiv","minHeight","maxHeight","paddingBottom","overflow","spinnerCell","top","spinnerFailedCell","borderColor","cursor","arrowCell","textAlign","verticalAlign","paddingRight","marginLeft","arrow","borderStyle","borderWidth","arrowShow","inputHr","borderImage","margin","marginBottom","itemDiv","paddingTop","itemOdd","itemEven","optionsFooter","fileredSpan","InputSelect","props","domOptionsCache","indexActiveOption","optionName","optionNames","_optionNames","state","isShowOption","options","isValidDomOptionsCache","isLocalMode","nextProps","isUpdateOptions","_setStateToInit","nextState","comp","_getActiveItemComp","_decorateActiveRowComp","_makeVisibleActiveRowComp","_styleDivWidth","_styleInputWidth","_styleHr","_crAfterInputEl","afterInputEl","placeholder","_domOptions","renderOptions","Object","assign","domInputText","c","_handleInputChange","_handleInputKeyDown","focus","Component","defaultProps","onSelect","onLoadOption","setState","classList","add","_undecorateActiveRowComp","remove","offsetTop","scrollTop","optionsComp","_filterOptions","valueFor","toLowerCase","filter","option","i","indexOf","event","target","tokenLn","token","length","valueLn","arr","push","keyCode","item","preventDefault","prevComp","nextComp","bottomComp","_handleToggleOptions","_handleClickItem","index","map","_styleDiv","bind","_styleOptions","_numberFilteredItems","_numberAllItems","isLoading","isLoadingFailed","_placeholder","_afterInputEl","_styleArrow"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAAA;;;;;;AAEA;;AAEA,IAAMA,mBAAmB,oBAAzB;AACA,IAAMC,UAAU;AACdC,WAAS,kBADK;AAEdC,SAAO;AAFO,CAAhB;;AAKA,IAAMC,SAAS;AACbC,WAAS;AACPC,cAAU,UADH;AAEPC,aAAS,cAFF;AAGPC,qBAAiB,SAHV;AAIPC,WAAO;;AAJA,GADI;AAQbC,aAAW;AACTC,gBAAY,oCADH;AAETC,YAAQ,aAFC;AAGTC,aAAS,aAHA;AAITC,YAAQ,MAJC;AAKTC,iBAAa,MALJ;AAMTC,WAAO,OANE;AAOTP,WAAO,OAPE;AAQTQ,cAAU,MARD;AASTC,gBAAY;AATH,GARE;AAmBbC,iBAAe;AACbb,cAAU,UADG;AAEbc,UAAM,CAFO;AAGbZ,qBAAiB,SAHJ;AAIbQ,WAAO,OAJM;AAKbP,WAAO,OALM;AAMb;AACAY,YAAQ,IAPK;AAQbC,4BAAyB,KARZ;AASbC,6BAA0B;AATb,GAnBF;AA8BbC,aAAW;AACT;AACAC,eAAW,OAFF;AAGTC,eAAW,OAHF;AAITC,mBAAe,KAJN;AAKTC,cAAU;AALD,GA9BE;AAqCbC,eAAc;AACZvB,cAAU,UADE;AAEZc,UAAM,KAFM;AAGZU,SAAK,KAHO;AAIZvB,aAAS,cAJG;AAKZE,WAAO,MALK;AAMZK,YAAQ;AANI,GArCD;AA6CbiB,qBAAoB;AAClBzB,cAAU,UADQ;AAElBc,UAAM,KAFY;AAGlBU,SAAK,KAHa;AAIlBvB,aAAS,cAJS;AAKlBE,WAAO,MALW;AAMlBK,YAAQ,MANU;AAOlBkB,iBAAc,SAPI;AAQlBC,YAAS;AARS,GA7CP;AAuDbC,aAAU;AACRD,YAAQ,SADA;AAER;AACA3B,cAAU,UAHF;AAIR6B,eAAW,QAJH;AAKRC,mBAAe,QALP;AAMR;AACA3B,WAAO,MAPC;AAQR4B,kBAAc,KARN;AASRC,gBAAY;;AATJ,GAvDG;AAmEbC,SAAQ;AACPP,iBAAa,8BADN;AAEPQ,iBAAa,OAFN;AAGPC,iBAAa,eAHN;AAIP;AACAlC,aAAS,cALF;AAMPO,YAAQ,KAND;AAOPL,WAAO;AAPA,GAnEK;AA4EdiC,aAAW;AACRV,iBAAa;AADL,GA5EG;AA+EdW,WAAS;AACPF,iBAAa,mBADN;AAEPD,iBAAa,iBAFN;AAGPR,iBAAa,SAHN;AAIPY,iBAAa,MAJN;AAKPC,YAAQ,CALD;AAMPP,gBAAY,MANL;AAOPQ,kBAAc,KAPP;AAQPrC,WAAO;;AARA,GA/EK;AA0FbsC,WAAQ;AACNd,YAAQ,SADF;AAENe,gBAAY,KAFN;AAGNjC,iBAAa,KAHP;AAINY,mBAAe;AACf;AALM,GA1FK;AAiGbsB,WAAS;AACPzC,qBAAiB;AADV,GAjGI;AAoGb0C,YAAU;AACR1C,qBAAiB;AADT,GApGG;AAuGb2C,iBAAgB;AACd3C,qBAAiB,QADH;AAEdc,4BAAyB,KAFX;AAGdC,6BAA0B;AAHZ,GAvGH;AA4Gb6B,eAAc;AACZ7C,aAAS,cADG;AAEZS,WAAO,MAFK;AAGZE,gBAAa,MAHD;AAIZ;AACAH,iBAAa,MALD;AAMZiC,gBAAY,KANA;AAOZrB,mBAAgB;AAPJ;AA5GD,CAAf;;IAuHM0B,W;;;AAgCJ,uBAAYC,KAAZ,EAAkB;AAAA;;AAAA;;AAAA;;AAEhB,UAAKC,eAAL,GAAuB,IAAvB;AACA,UAAKC,iBAAL,GAAyB,CAAzB;;AAHgB,QAIRC,UAJQ,GAIoBH,KAJpB,CAIRG,UAJQ;AAAA,QAIIC,WAJJ,GAIoBJ,KAJpB,CAIII,WAJJ;AAAA,QAKVC,YALU,GAKMD,WAAD,GACTA,WADS,GAERD,UAAD,GAAeA,UAAf,GAA4B,EAPxB;;AAShB,UAAKG,KAAL,GAAa;AACXzD,aAAO,EADI;AAEX0D,oBAAc,KAFH;AAGXC,eAASR,MAAMQ,OAHJ;AAIXL,kBAAaA,UAJF;AAKXC,mBAAcC,YALH;AAMXI,8BAAwB,KANb;AAOXC,mBAAa;AAPF,KAAb;AATgB;AAkBjB;AAjDD;;;;;;;;;;;;;;;;;;;;;;;;8CAmD0BC,S,EAAU;AAClC,UAAI,KAAKX,KAAL,KAAeW,SAAnB,EAA6B;AAC3B,YAAI,KAAKX,KAAL,CAAWQ,OAAX,KAAuBG,UAAUH,OAAjC,IACGG,UAAUC,eADjB,EACiC;AAC/B;AACA,eAAKC,eAAL,CAAqBF,UAAUH,OAA/B;AACD;AACF;AACF;;;0CAEqBG,S,EAAWG,S,EAAU;AACzC,UAAI,KAAKd,KAAL,KAAeW,SAAf,IAA4BA,UAAUC,eAA1C,EAA2D;AACzDE,kBAAUJ,WAAV,GAAwB,KAAxB;AACD,OAFD,MAEO;AACLI,kBAAUJ,WAAV,GAAwB,IAAxB;AACD;;AAED,aAAO,IAAP;AACD;;;yCAEmB;AACjB;AACA,UAAI,KAAKJ,KAAL,CAAWC,YAAf,EAA4B;AAC1B,YAAMQ,OAAO,KAAKC,kBAAL,EAAb;AACA,aAAKC,sBAAL,CAA4BF,IAA5B;AACA,aAAKG,yBAAL,CAA+BH,IAA/B;AACF;AACF;;;6BAoRO;AAAA;;AACA,UAAE5D,KAAF,GAAY,KAAK6C,KAAjB,CAAE7C,KAAF;AAAA,mBACuC,KAAKmD,KAD5C;AAAA,UACEzD,KADF,UACEA,KADF;AAAA,UACS6D,WADT,UACSA,WADT;AAAA,UACsBH,YADtB,UACsBA,YADtB;;;AAGN,UAAIY,iBAAiB,IAArB;AACA,UAAIC,mBAAmB,IAAvB;AACA,UAAIC,WAAW,IAAf;AACA,UAAIlE,KAAJ,EAAU;AACRgE,yBAAiB,EAAEhE,OAAOA,QAAQ,IAAjB,EAAjB;AACAiE,2BAAmB,EAAEjE,OAAQA,QAAM,EAAP,GAAa,IAAtB,EAAnB;AACAkE,mBAAW,EAAElE,OAAQA,QAAM,EAAP,GAAa,IAAtB,EAAX;AACD;;AAXK,4BAagC,KAAKmE,eAAL,EAbhC;AAAA,UAaEC,YAbF,mBAaEA,YAbF;AAAA,UAagBC,WAbhB,mBAagBA,WAbhB;;AAcN,UAAMC,cAAef,eAAeH,YAAhB,GACR,KAAKmB,aAAL,EADQ,GAER,IAFZ;;AAIA,aACE;AAAA;AAAA,UAAK,OAAOC,OAAOC,MAAP,CAAc,EAAd,EAAiB9E,OAAOC,OAAxB,EAAiCoE,cAAjC,CAAZ;AACE;AACG,eAAK;AAAA,mBAAK,OAAKU,YAAL,GAAoBC,CAAzB;AAAA,WADR;AAEG,gBAAK,MAFR;AAGG,gBAAK,QAHR;AAIG,wBAAa,YAJhB;AAKG,uBAAY,KALf;AAMG,0BAAe,KANlB;AAOG,sBAAY,KAPf;AAQG,iBAAOjF,KARV;AASG,iBAAO8E,OAAOC,MAAP,CAAc,EAAd,EAAiB9E,OAAOM,SAAxB,EAAmCgE,gBAAnC,CATV;AAUG,uBAAaI,WAVhB;AAWG,oBAAU,KAAKO,kBAXlB;AAYG,qBAAW,KAAKC,mBAZnB,GADF;AAeGT,oBAfH;AAgBE,8CAAI,OAAOI,OAAOC,MAAP,CAAc,EAAd,EAAiB9E,OAAOuC,OAAxB,EAAiCgC,QAAjC,CAAX,GAhBF;AAiBGI;AAjBH,OADF;AAqBD;;;iCAEW;AACV,WAAKI,YAAL,CAAkBI,KAAlB;AACD;;;yCACmB;AAClB,WAAKJ,YAAL,CAAkBI,KAAlB;AACD;;;EAjZuBC,gB,UAuBjBC,Y,GAAe;AACpB3B,WAAU,EADU;AAEpBL,cAAa,EAFO;AAGpBC,eAAc,EAHM;AAIpBQ,mBAAkB,KAJE;AAKpBwB,YAAU,oBAAM,CAAE,CALE;AAMpBC,gBAAc,wBAAM,CAAE;AANF,C;;;OA0DtBxB,e,GAAkB,UAACL,OAAD,EAAa;AAC7B,WAAKN,iBAAL,GAAyB,CAAzB;AACA,WAAKoC,QAAL,CAAc;AACZzF,aAAQ,EADI;AAEZ0D,oBAAe,KAFH;AAGZC,eAAUA,OAHE;AAIZC,8BAAyB;AAJb,KAAd;AAMD,G;;OAEDO,kB,GAAqB,YAAM;AACzB,WAAO,aAAS,OAAKd,iBAAd,CAAP;AACD,G;;OACDe,sB,GAAyB,UAACF,IAAD,EAAU;AACjC,QAAIA,IAAJ,EAAS;AACPA,WAAKwB,SAAL,CAAeC,GAAf,CAAmB9F,gBAAnB;AACD;AACF,G;;OACD+F,wB,GAA2B,UAAC1B,IAAD,EAAU;AAClC,QAAI,CAACA,IAAL,EAAU;AACRA,aAAO,OAAKC,kBAAL,EAAP;AACD;AACD,QAAID,IAAJ,EAAS;AACPA,WAAKwB,SAAL,CAAeG,MAAf,CAAsBhG,gBAAtB;AACD;AACH,G;;OAEDwE,yB,GAA4B,UAACH,IAAD,EAAU;AACpC,QAAIA,IAAJ,EAAS;AACP,UAAM4B,YAAY5B,KAAK4B,SAAvB;AACA,UAAMC,YAAY,OAAKC,WAAL,CAAiBD,SAAnC;AACA,UAAMD,YAAYC,SAAb,GAA0B,EAA/B,EAAkC;AAC/B,eAAKC,WAAL,CAAiBD,SAAjB,IAA+BD,YAAYC,SAAZ,GAAwB,EAAvD;AACF;AACD,UAAMD,YAAYC,SAAb,GAA0B,CAA/B,EAAiC;AAC/B,eAAKC,WAAL,CAAiBD,SAAjB,GAA4B,CAA5B;AACD;AACF;AACF,G;;OAEDE,c,GAAiB,UAACtC,OAAD,EAAU3D,KAAV,EAAoB;AAClC,QAAMkG,WAAWlG,MAAMmG,WAAN,EAAjB;AACA,WAAOxC,QAAQyC,MAAR,CAAgB,UAACC,MAAD,EAASC,CAAT,EAAe;AACpC,aAAOD,OAAOtG,OAAP,CAAeoG,WAAf,GAA6BI,OAA7B,CAAqCL,QAArC,MAAmD,CAAC,CAA3D;AACD,KAFM,CAAP;AAGF,G;;OAEDhB,kB,GAAqB,UAACsB,KAAD,EAAW;AACxB,gBAAQA,MAAMC,MAAN,CAAazG,KAArB;AAAA,QACA0G,OADA,GACUC,MAAMC,MADhB;AAAA,QAEE5G,KAFF,GAEY,OAAKyD,KAFjB,CAEEzD,KAFF;AAAA,QAGA6G,OAHA,GAGU7G,MAAM4G,MAHhB;;AAIN,QAAIE,MAAM,EAAV;AACA,QAAIJ,YAAYG,OAAhB,EAAwB;AACtB,UAAIH,UAAUG,OAAd,EAAsB;AACpBC,cAAM,OAAKb,cAAL,CAAoB,OAAKxC,KAAL,CAAWE,OAA/B,EAAwCgD,KAAxC,CAAN;AACD,OAFD,MAEO,IAAID,UAAUG,OAAd,EAAuB;AAC5BC,cAAM,OAAKb,cAAL,CAAoB,OAAK9C,KAAL,CAAWQ,OAA/B,EAAwCgD,KAAxC,CAAN;AACD;AACD,UAAIG,IAAIF,MAAJ,KAAe,CAAnB,EAAqB;AACnBE,YAAIC,IAAJ,CAASjH,OAAT;AACD;AACD,aAAK8F,wBAAL;AACA,aAAKvC,iBAAL,GAAyB,CAAzB;AACA,aAAKoC,QAAL,CAAc;AACZzF,eAAQ2G,KADI;AAEZjD,sBAAe,IAFH;AAGZE,gCAAyB,KAHb;AAIZD,iBAAUmD;AAJE,OAAd;AAMD;AACF,G;;OAED3B,mB,GAAsB,UAACqB,KAAD,EAAW;AAC/B,YAAOA,MAAMQ,OAAb;AACE;AACA,WAAK,EAAL;AAAQ;AACL,cAAMC,OAAO,OAAKxD,KAAL,CAAWE,OAAX,CAAmB,OAAKN,iBAAxB,CAAb;;AAEA,cAAI4D,QAAQA,KAAKlH,OAAjB,EAAyB;AACvB,mBAAK0F,QAAL,CAAc;AACZzF,qBAAQiH,KAAKlH,OADD;AAEZ2D,4BAAe,KAFH;AAGZE,sCAAyB;AAHb,aAAd;;AAMA,gBAAIqD,KAAKjH,KAAL,KAAe,UAAnB,EAA8B;AAC5B,qBAAKmD,KAAL,CAAWoC,QAAX,CAAoB0B,IAApB;AACD,aAFD,MAEO;AACL,qBAAK9D,KAAL,CAAWoC,QAAX,CAAoB,IAApB;AACD;AACF;AACJ;AAAQ;AACR;AACA,WAAK,EAAL;AAAQ;AACN,cAAI,OAAK9B,KAAL,CAAWC,YAAf,EAA4B;AAC1B,mBAAK+B,QAAL,CAAc,EAAE/B,cAAe,KAAjB,EAAd;AACD,WAFD,MAEO;AACL,mBAAKkC,wBAAL;AACA,mBAAK5B,eAAL,CAAqB,OAAKb,KAAL,CAAWQ,OAAhC;AACA,mBAAKR,KAAL,CAAWoC,QAAX,CAAoB,IAApB;AACD;AACH;AAAO;AACP;AACA,WAAK,EAAL;AAAQ;AACN,cAAI,CAAC,OAAK9B,KAAL,CAAWC,YAAhB,EAA6B;AAC3B,mBAAK+B,QAAL,CAAc,EAAE/B,cAAe,IAAjB,EAAd;AACD,WAFD,MAEO;AACL8C,kBAAMU,cAAN;;AAEA,gBAAMC,WAAW,OAAKhD,kBAAL,EAAjB;;AAEA,gBAAIgD,QAAJ,EAAa;AACV,qBAAKvB,wBAAL,CAA8BuB,QAA9B;;AAEA,qBAAK9D,iBAAL,IAA0B,CAA1B;AACA,kBAAI,OAAKA,iBAAL,IAAwB,OAAKI,KAAL,CAAWE,OAAX,CAAmBiD,MAA/C,EAAsD;AACnD,uBAAKvD,iBAAL,GAAyB,CAAzB;AACA,uBAAK2C,WAAL,CAAiBD,SAAjB,GAA6B,CAA7B;AACF;;AAED,kBAAMqB,WAAW,OAAKjD,kBAAL,EAAjB;AACA,qBAAKC,sBAAL,CAA4BgD,QAA5B;;AAEA,kBAAMtB,YAAYsB,SAAStB,SAA3B;AACA,kBAAMC,YAAY,OAAKC,WAAL,CAAiBD,SAAnC;AACA,kBAAMD,YAAYC,SAAb,GAA0B,EAA/B,EAAkC;AAC/B,uBAAKC,WAAL,CAAiBD,SAAjB,IAA+BD,YAAYC,SAAZ,GAAwB,EAAvD;AACF;AACH;AACF;AACH;AAAO;AACP;AACA,WAAK,EAAL;AACE,YAAI,OAAKtC,KAAL,CAAWC,YAAf,EAA4B;AAC1B8C,gBAAMU,cAAN;;AAEA,cAAMC,YAAW,OAAKhD,kBAAL,EAAjB;AACA,cAAIgD,SAAJ,EAAa;AACX,mBAAKvB,wBAAL,CAA8BuB,SAA9B;;AAEA,mBAAK9D,iBAAL,IAA0B,CAA1B;AACA,gBAAI,OAAKA,iBAAL,GAAyB,CAA7B,EAA+B;AAC7B,qBAAKA,iBAAL,GAAyB,OAAKI,KAAL,CAAWE,OAAX,CAAmBiD,MAAnB,GAA4B,CAArD;AACA,kBAAMS,aAAa,OAAKlD,kBAAL,EAAnB;AACA,qBAAK6B,WAAL,CAAiBD,SAAjB,GAA6BsB,WAAWvB,SAAxC;AACD;;AAED,gBAAMsB,YAAW,OAAKjD,kBAAL,EAAjB;AACA,mBAAKC,sBAAL,CAA4BgD,SAA5B;;AAEA,gBAAMtB,aAAYsB,UAAStB,SAA3B;AACA,gBAAMC,aAAY,OAAKC,WAAL,CAAiBD,SAAnC;AACA,gBAAMD,aAAYC,UAAb,GAA0B,EAA/B,EAAkC;AAChC,qBAAKC,WAAL,CAAiBD,SAAjB,IAAgC,MAAMD,aAAYC,UAAlB,CAAhC;AACD;AACF;AACF;AACH;AACA;AAAS,uCAAgC;AArF3C;AAuFD,G;;OAEDuB,oB,GAAuB,YAAM;AAC3B,WAAK7B,QAAL,CAAc,EAAE/B,cAAc,CAAC,OAAKD,KAAL,CAAWC,YAA5B,EAAd;AACD,G;;OAED6D,gB,GAAmB,UAACN,IAAD,EAAOO,KAAP,EAAchB,KAAd,EAAwB;AACzC,WAAKnD,iBAAL,GAAyBmE,KAAzB;AACA,WAAK/B,QAAL,CAAc;AACZzF,aAAQiH,KAAKlH,OADD;AAEZ2D,oBAAe;AAFH,KAAd;AAIA,WAAKP,KAAL,CAAWoC,QAAX,CAAoB0B,IAApB;AACD,G;;OAEDpC,a,GAAgB,YAAM;AAAA,kBACoC,OAAKpB,KADzC;AAAA,QACbC,YADa,WACbA,YADa;AAAA,QACCC,OADD,WACCA,OADD;AAAA,QACUC,sBADV,WACUA,sBADV;;;AAGpB,QAAIgB,oBAAJ;AACA,QAAIjB,OAAJ,EAAY;AACV,UAAI,CAACC,sBAAL,EAA4B;AACzBgB,sBAAcjB,QAAQ8D,GAAR,CAAY,UAACR,IAAD,EAAOO,KAAP,EAAe;AACvC,cAAME,YAAaF,QAAQ,CAAR,KAAc,CAAf,GAAoBvH,OAAO6C,OAA3B,GAAqC7C,OAAO8C,QAA9D;AACA,iBACE;AAAA;AAAA;AACG,yBAAU,YADb;AAEG,qBAAO+B,OAAOC,MAAP,CAAc,EAAd,EAAkB9E,OAAO2C,OAAzB,EAAkC8E,SAAlC,CAFV;AAGG,mBAAKF;AACL;AAJH,gBAKG,KAAK;AAAA,uBAAK,aAASA,KAAT,IAAoBvC,CAAzB;AAAA,eALR;AAMG,uBAAS,OAAKsC,gBAAL,CAAsBI,IAAtB,CAA2B,MAA3B,EAAiCV,IAAjC,EAAuCO,KAAvC;AANZ;AAQIP,iBAAKlH;AART,WADF;AAYF,SAdc,CAAd;AAeD,eAAKqD,eAAL,GAAuBwB,WAAvB;AACD,OAjBD,MAiBO;AACLA,sBAAc,OAAKxB,eAAnB;AACD;AACF;;AAEK,QAAC9C,KAAD,GAAU,OAAK6C,KAAf,CAAC7C,KAAD;AAAA,QACCsH,aADD,GACiBlE,eACX,EAACtD,SAAS,OAAV,EADW,GACU,EAAEA,SAAS,MAAX,EAF3B;AAAA,QAGAkE,cAHA,GAGkBhE,KAAD,GACX,EAAEA,OAAOA,QAAM,IAAf,EADW,GACY,IAJ7B;AAAA,QAKAuH,oBALA,GAKwBlE,QAAQ,CAAR,KAAeA,QAAQ,CAAR,EAAW3D,KAAX,KAAqB,UAArC,GACjB2D,QAAQiD,MADS,GACA,CANvB;AAAA,QAOAkB,eAPA,GAOkB,OAAK3E,KAAL,CAAWQ,OAAX,GACZ,OAAKR,KAAL,CAAWQ,OAAX,CAAmBiD,MADP,GACgB,CARlC;;;AAUN,WACI;AAAA;AAAA,QAAK,OAAO9B,OAAOC,MAAP,CAAc,EAAd,EAAkB9E,OAAOe,aAAzB,EAAwC4G,aAAxC,EAAuDtD,cAAvD,CAAZ;AACE;AAAA;AAAA;AACG;AACA,eAAK;AAAA,mBAAK,OAAK0B,WAAL,GAAmBf,CAAxB;AAAA,WAFR;AAGG,iBAAOH,OAAOC,MAAP,CAAc,EAAd,EAAkB9E,OAAOoB,SAAzB,EAAoCuG,aAApC,EAAmDtD,cAAnD;AAHV;AAKGM;AALH,OADF;AAQE;AAAA;AAAA,UAAK,OAAO3E,OAAO+C,aAAnB;AACE;AAAA;AAAA,YAAM,OAAO/C,OAAOgD,WAApB;AAAA;AACY4E,8BADZ;AAAA;AACqCC;AADrC;AADF;AARF,KADJ;AAgBD,G;;OAEDrD,e,GAAkB,YAAM;AAAA,iBAC8B,OAAKtB,KADnC;AAAA,QACd4E,SADc,UACdA,SADc;AAAA,QACHC,eADG,UACHA,eADG;AAAA,QACcrD,WADd,UACcA,WADd;AAAA,kBAE4B,OAAKlB,KAFjC;AAAA,QAEdC,YAFc,WAEdA,YAFc;AAAA,QAEAJ,UAFA,WAEAA,UAFA;AAAA,QAEYC,WAFZ,WAEYA,WAFZ;;;AAItB,QAAI0E,qBAAJ;AAAA,QAAkBC,sBAAlB;AACA,QAAI,CAACH,SAAD,IAAc,CAACC,eAAnB,EAAmC;AAChC,UAAMG,cAAczE,eAAezD,OAAOsC,SAAtB,GAAkC,IAAtD;AACD0F,qBAAgBtD,WAAD,GACTA,WADS,eAECrB,UAFD,QAAf;AAGA4E,sBACE;AAAA;AAAA;AACG,iBAAOjI,OAAO8B,SADjB;AAEG,mBAAS,OAAKuF,oBAFjB;AAGE,gDAAM,OAAOxC,OAAOC,MAAP,CAAc,EAAd,EAAkB9E,OAAOmC,KAAzB,EAAgC+F,WAAhC,CAAb;AAHF,OADF;AAOD,KAZD,MAYO,IAAIJ,SAAJ,EAAc;AACnBE,kCAA0B1E,WAA1B;AACA2E,sBACE;AACE,eAAOjI,OAAOyB,WADhB;AAEE,uBAAY;AAFd,QADF;AAOD,KATM,MASA,IAAIsG,eAAJ,EAAqB;AACzBC,kCAAwB1E,WAAxB;AACA2E,sBACC;AACE,eAAOjI,OAAO2B,iBADhB;AAEE,uBAAY,eAFd;AAGE,iBAAS,OAAKuB,KAAL,CAAWqC;AAHtB,QADD;AAQF;AACD,WAAO;AACLb,mBAAasD,YADR;AAELvD,oBAAcwD;AAFT,KAAP;AAID,G;;kBAoDYhF,W","file":"InputSelect.js","sourcesContent":["import React, { Component } from 'react';\r\n\r\n//import PropTypes from \"prop-types\";\r\n\r\nconst CLASS_ROW_ACTIVE = \"option-row__active\"\r\nconst NO_ITEM = {\r\n  caption: 'No results found',\r\n  value: 'noresult'\r\n}\r\n\r\nconst styles = {\r\n  rootDiv: {\r\n    position: 'relative',\r\n    display: 'inline-block',\r\n    backgroundColor: '#E1E1CB',\r\n    width: '160px'\r\n\r\n  },\r\n  inputText: {\r\n    background: 'transparent none repeat scroll 0 0',\r\n    border: 'medium none',\r\n    outline: 'medium none',\r\n    height: '30px',\r\n    paddingLeft: '10px',\r\n    color: 'green',\r\n    width: '140px',\r\n    fontSize: '16px',\r\n    fontWeight: 'bold'\r\n  },\r\n  rootOptionDiv: {\r\n    position: 'absolute',\r\n    left: 0,\r\n    backgroundColor: '#E1E1CB',\r\n    color: 'green',\r\n    width: '160px',\r\n    //height: '160px',\r\n    zIndex: '10',\r\n    borderBottomLeftRadius : '5px',\r\n    borderBottomRightRadius : '5px'\r\n  },\r\n  optionDiv: {\r\n    //height: '160px',\r\n    minHeight: '160px',\r\n    maxHeight: '200px',\r\n    paddingBottom: '2px',\r\n    overflow: 'auto'\r\n  },\r\n  spinnerCell : {\r\n    position: 'relative',\r\n    left: '8px',\r\n    top: '4px',\r\n    display: 'inline-block',\r\n    width: '16px',\r\n    height: '16px'\r\n  },\r\n  spinnerFailedCell : {\r\n    position: 'relative',\r\n    left: '8px',\r\n    top: '4px',\r\n    display: 'inline-block',\r\n    width: '16px',\r\n    height: '16px',\r\n    borderColor : '#F44336',\r\n    cursor : 'pointer'\r\n  },\r\n  arrowCell:{\r\n    cursor: 'pointer',\r\n    //display: table-cell\r\n    position: 'relative',\r\n    textAlign: 'center',\r\n    verticalAlign: 'middle',\r\n    //width: '25px',\r\n    width: '35px',\r\n    paddingRight: '5px',\r\n    marginLeft: '10px'\r\n\r\n  },\r\n  arrow : {\r\n   borderColor: '#999 transparent transparent',\r\n   borderStyle: 'solid',\r\n   borderWidth: '5px 5px 2.5px',\r\n   //borderWidth: '10px 10px 5px',\r\n   display: 'inline-block',\r\n   height: '0px',\r\n   width: '0px'\r\n },\r\n arrowShow: {\r\n    borderColor: '#1B75BB transparent transparent'\r\n },\r\n inputHr: {\r\n   borderWidth: 'medium medium 1px',\r\n   borderStyle: 'none none solid',\r\n   borderColor: '#1B75BB',\r\n   borderImage: 'none',\r\n   margin: 0,\r\n   marginLeft: '10px',\r\n   marginBottom: '5px',\r\n   width: '150px'\r\n\r\n },\r\n  itemDiv:{\r\n    cursor: 'pointer',\r\n    paddingTop: '4px',\r\n    paddingLeft: '5px',\r\n    paddingBottom: '4px'\r\n    //lineHeight: '14px'\r\n  },\r\n  itemOdd: {\r\n    backgroundColor: '#C3C3AC'\r\n  },\r\n  itemEven: {\r\n    backgroundColor: '#D5D5BC'\r\n  },\r\n  optionsFooter : {\r\n    backgroundColor: 'silver',\r\n    borderBottomLeftRadius : '5px',\r\n    borderBottomRightRadius : '5px'\r\n  },\r\n  fileredSpan : {\r\n    display: 'inline-block',\r\n    color: 'gray',\r\n    fontWeight : 'bold',\r\n    //height: '20px',\r\n    paddingLeft: '10px',\r\n    paddingTop: '4px',\r\n    paddingBottom : '4px'\r\n  }\r\n}\r\n\r\nclass InputSelect extends Component {\r\n  /*\r\n  static propTypes = {\r\n     width: PropTypes.string,\r\n     options: PropTypes.arrayOf(PropTypes.shape({\r\n        caption: PropTypes.string,\r\n        value: PropTypes.oneOfType([\r\n          PropTypes.string,\r\n          PropTypes.number\r\n        ])\r\n     })),\r\n     optionName: PropTypes.string,\r\n     optionNames: PropTypes.string,\r\n     isUpdateOptions: PropTypes.bool,\r\n     placeholder: PropTypes.string,\r\n\r\n     isLoading: PropTypes.bool,\r\n     isLoadingFailed: PropTypes.bool,\r\n\r\n     onSelect: PropTypes.func,\r\n     onLoadOption: PropTypes.func\r\n  }\r\n  */\r\n  static defaultProps = {\r\n    options : [],\r\n    optionName : '',\r\n    optionNames : '',\r\n    isUpdateOptions : false,\r\n    onSelect: () => {},\r\n    onLoadOption: () => {}\r\n  }\r\n\r\n  constructor(props){\r\n    super()\r\n    this.domOptionsCache = null;\r\n    this.indexActiveOption = 0;\r\n    const { optionName, optionNames } = props\r\n        , _optionNames = (optionNames)\r\n              ? optionNames\r\n              : (optionName) ? optionName : '';\r\n\r\n    this.state = {\r\n      value: '',\r\n      isShowOption: false,\r\n      options: props.options,\r\n      optionName : optionName,\r\n      optionNames : _optionNames,\r\n      isValidDomOptionsCache: false,\r\n      isLocalMode: false\r\n    }\r\n  }\r\n\r\n  componentWillReceiveProps(nextProps){\r\n    if (this.props !== nextProps){\r\n      if (this.props.options !== nextProps.options\r\n          || nextProps.isUpdateOptions){\r\n        //New options come from Parent - Clear domCache, Init State\r\n        this._setStateToInit(nextProps.options);\r\n      }\r\n    }\r\n  }\r\n\r\n  shouldComponentUpdate(nextProps, nextState){\r\n    if (this.props !== nextProps || nextProps.isUpdateOptions) {\r\n      nextState.isLocalMode = false;\r\n    } else {\r\n      nextState.isLocalMode = true;\r\n    }\r\n\r\n    return true;\r\n  }\r\n\r\n  componentDidUpdate(){\r\n     //Decorate Active Option\r\n     if (this.state.isShowOption){\r\n       const comp = this._getActiveItemComp();\r\n       this._decorateActiveRowComp(comp);\r\n       this._makeVisibleActiveRowComp(comp);\r\n    }\r\n  }\r\n\r\n  _setStateToInit = (options) => {\r\n    this.indexActiveOption = 0;\r\n    this.setState({\r\n      value : '',\r\n      isShowOption : false,\r\n      options : options,\r\n      isValidDomOptionsCache : false\r\n    });\r\n  }\r\n\r\n  _getActiveItemComp = () => {\r\n    return this[`v${this.indexActiveOption}`];\r\n  }\r\n  _decorateActiveRowComp = (comp) => {\r\n    if (comp){\r\n      comp.classList.add(CLASS_ROW_ACTIVE);\r\n    }\r\n  }\r\n  _undecorateActiveRowComp = (comp) => {\r\n     if (!comp){\r\n       comp = this._getActiveItemComp()\r\n     }\r\n     if (comp){\r\n       comp.classList.remove(CLASS_ROW_ACTIVE);\r\n     }\r\n  }\r\n\r\n  _makeVisibleActiveRowComp = (comp) => {\r\n    if (comp){\r\n      const offsetTop = comp.offsetTop;\r\n      const scrollTop = this.optionsComp.scrollTop;\r\n      if ( (offsetTop - scrollTop) > 70){\r\n         this.optionsComp.scrollTop += (offsetTop - scrollTop - 70);\r\n      }\r\n      if ( (offsetTop - scrollTop) < 0){\r\n        this.optionsComp.scrollTop= 0;\r\n      }\r\n    }\r\n  }\r\n\r\n  _filterOptions = (options, value) => {\r\n     const valueFor = value.toLowerCase();\r\n     return options.filter( (option, i) => {\r\n       return option.caption.toLowerCase().indexOf(valueFor) !== -1\r\n     })\r\n  }\r\n\r\n  _handleInputChange = (event) => {\r\n    const token = event.target.value\r\n        , tokenLn = token.length\r\n        , { value } = this.state\r\n        , valueLn = value.length;\r\n    let arr = [];\r\n    if (tokenLn !== valueLn){\r\n      if (tokenLn > valueLn){\r\n        arr = this._filterOptions(this.state.options, token);\r\n      } else if (tokenLn < valueLn) {\r\n        arr = this._filterOptions(this.props.options, token);\r\n      }\r\n      if (arr.length === 0){\r\n        arr.push(NO_ITEM);\r\n      }\r\n      this._undecorateActiveRowComp()\r\n      this.indexActiveOption = 0;\r\n      this.setState({\r\n        value : token,\r\n        isShowOption : true,\r\n        isValidDomOptionsCache : false,\r\n        options : arr\r\n      })\r\n    }\r\n  }\r\n\r\n  _handleInputKeyDown = (event) => {\r\n    switch(event.keyCode){\r\n      // enter\r\n      case 13:{\r\n         const item = this.state.options[this.indexActiveOption];\r\n\r\n         if (item && item.caption){\r\n           this.setState({\r\n             value : item.caption,\r\n             isShowOption : false,\r\n             isValidDomOptionsCache : true\r\n           });\r\n\r\n           if (item.value !== 'noresult'){\r\n             this.props.onSelect(item);\r\n           } else {\r\n             this.props.onSelect(null);\r\n           }\r\n         }\r\n      break; }\r\n      //escape\r\n      case 27:{\r\n        if (this.state.isShowOption){\r\n          this.setState({ isShowOption : false });\r\n        } else {\r\n          this._undecorateActiveRowComp();\r\n          this._setStateToInit(this.props.options);\r\n          this.props.onSelect(null);\r\n        }\r\n      break;}\r\n      //down\r\n      case 40:{\r\n        if (!this.state.isShowOption){\r\n          this.setState({ isShowOption : true });\r\n        } else {\r\n          event.preventDefault();\r\n\r\n          const prevComp = this._getActiveItemComp();\r\n\r\n          if (prevComp){\r\n             this._undecorateActiveRowComp(prevComp);\r\n\r\n             this.indexActiveOption += 1;\r\n             if (this.indexActiveOption>=this.state.options.length){\r\n                this.indexActiveOption = 0;\r\n                this.optionsComp.scrollTop = 0;\r\n             }\r\n\r\n             const nextComp = this._getActiveItemComp();\r\n             this._decorateActiveRowComp(nextComp)\r\n\r\n             const offsetTop = nextComp.offsetTop\r\n             const scrollTop = this.optionsComp.scrollTop;\r\n             if ( (offsetTop - scrollTop) > 70){\r\n                this.optionsComp.scrollTop += (offsetTop - scrollTop - 70);\r\n             }\r\n          }\r\n        }\r\n      break;}\r\n      //up\r\n      case 38:\r\n        if (this.state.isShowOption){\r\n          event.preventDefault();\r\n\r\n          const prevComp = this._getActiveItemComp();\r\n          if (prevComp){\r\n            this._undecorateActiveRowComp(prevComp);\r\n\r\n            this.indexActiveOption -= 1;\r\n            if (this.indexActiveOption < 0){\r\n              this.indexActiveOption = this.state.options.length - 1;\r\n              const bottomComp = this._getActiveItemComp()\r\n              this.optionsComp.scrollTop = bottomComp.offsetTop\r\n            }\r\n\r\n            const nextComp = this._getActiveItemComp();\r\n            this._decorateActiveRowComp(nextComp);\r\n\r\n            const offsetTop = nextComp.offsetTop;\r\n            const scrollTop = this.optionsComp.scrollTop;\r\n            if ( (offsetTop - scrollTop) < 70){\r\n              this.optionsComp.scrollTop -= ( 70 - (offsetTop - scrollTop) );\r\n            }\r\n          }\r\n        }\r\n      break;\r\n      default: /*console.log(event.keyCode);*/ return;\r\n    }\r\n  }\r\n\r\n  _handleToggleOptions = () => {\r\n    this.setState({ isShowOption: !this.state.isShowOption });\r\n  }\r\n\r\n  _handleClickItem = (item, index, event) => {\r\n    this.indexActiveOption = index;\r\n    this.setState({\r\n      value : item.caption,\r\n      isShowOption : false\r\n    });\r\n    this.props.onSelect(item);\r\n  }\r\n\r\n  renderOptions = () => {\r\n    const {isShowOption, options, isValidDomOptionsCache} = this.state;\r\n\r\n    let _domOptions;\r\n    if (options){\r\n      if (!isValidDomOptionsCache){\r\n         _domOptions = options.map((item, index)=>{\r\n           const _styleDiv = (index % 2 === 0) ? styles.itemOdd : styles.itemEven;\r\n           return (\r\n             <div\r\n                className=\"option-row\"\r\n                style={Object.assign({}, styles.itemDiv, _styleDiv)}\r\n                key={index}\r\n                //ref={\"v\"+index}\r\n                ref={c => this[`v${index}`] = c}\r\n                onClick={this._handleClickItem.bind(this, item, index)}\r\n              >\r\n                {item.caption}\r\n            </div>\r\n           )\r\n        });\r\n        this.domOptionsCache = _domOptions;\r\n      } else {\r\n        _domOptions = this.domOptionsCache;\r\n      }\r\n    }\r\n\r\n    const {width} = this.props\r\n        ,  _styleOptions = isShowOption\r\n              ? {display: 'block'} : { display: 'none'}\r\n        , _styleDivWidth = (width)\r\n              ? { width: width+'px'} : null\r\n        , _numberFilteredItems = (options[0] && (options[0].value !== 'noresult') )\r\n              ? options.length : 0\r\n        , _numberAllItems = this.props.options\r\n              ? this.props.options.length : 0;\r\n\r\n    return (\r\n        <div style={Object.assign({}, styles.rootOptionDiv, _styleOptions, _styleDivWidth)}>\r\n          <div\r\n             //ref={c => this.domOptions = c}\r\n             ref={c => this.optionsComp = c}\r\n             style={Object.assign({}, styles.optionDiv, _styleOptions, _styleDivWidth)}\r\n           >\r\n            {_domOptions}\r\n          </div>\r\n          <div style={styles.optionsFooter}>\r\n            <span style={styles.fileredSpan}>\r\n              Filtered {_numberFilteredItems} : {_numberAllItems}\r\n            </span>\r\n          </div>\r\n        </div>\r\n    )\r\n  }\r\n\r\n  _crAfterInputEl = () => {\r\n    const { isLoading, isLoadingFailed, placeholder } = this.props\r\n        , { isShowOption, optionName, optionNames } = this.state;\r\n\r\n    let _placeholder, _afterInputEl\r\n    if (!isLoading && !isLoadingFailed){\r\n       const _styleArrow = isShowOption ? styles.arrowShow : null;\r\n      _placeholder = (placeholder)\r\n          ? placeholder\r\n          : `Select ${optionName}...`;\r\n      _afterInputEl = (\r\n        <span\r\n           style={styles.arrowCell}\r\n           onClick={this._handleToggleOptions}>\r\n          <span style={Object.assign({}, styles.arrow, _styleArrow)}></span>\r\n        </span>\r\n      );\r\n    } else if (isLoading){\r\n      _placeholder = `Loading ${optionNames}...`;\r\n      _afterInputEl = (\r\n        <span\r\n          style={styles.spinnerCell}\r\n          data-loader=\"circle\"\r\n        >\r\n        </span>\r\n      );\r\n    } else if (isLoadingFailed) {\r\n       _placeholder=`Loading ${optionNames} Failed`;\r\n       _afterInputEl = (\r\n        <span\r\n          style={styles.spinnerFailedCell}\r\n          data-loader=\"circle-failed\"\r\n          onClick={this.props.onLoadOption}\r\n         >\r\n        </span>\r\n      )\r\n    }\r\n    return {\r\n      placeholder: _placeholder,\r\n      afterInputEl: _afterInputEl\r\n    };\r\n  }\r\n\r\n  render(){\r\n    const { width } = this.props\r\n        , { value, isLocalMode, isShowOption } = this.state;\r\n\r\n    let _styleDivWidth = null;\r\n    let _styleInputWidth = null;\r\n    let _styleHr = null;\r\n    if (width){\r\n      _styleDivWidth = { width: width + 'px' };\r\n      _styleInputWidth = { width: (width-30) + 'px'};\r\n      _styleHr = { width: (width-40) + 'px'};\r\n    }\r\n\r\n    const { afterInputEl, placeholder } = this._crAfterInputEl()\r\n    const _domOptions = (isLocalMode || isShowOption)\r\n              ? this.renderOptions()\r\n              : null;\r\n\r\n    return (\r\n      <div style={Object.assign({},styles.rootDiv, _styleDivWidth)}>\r\n        <input\r\n           ref={c => this.domInputText = c}\r\n           type=\"text\"\r\n           name=\"select\"\r\n           autoComplete=\"new-select\"\r\n           autoCorrect=\"off\"\r\n           autoCapitalize=\"off\"\r\n           spellCheck={false}\r\n           value={value}\r\n           style={Object.assign({},styles.inputText, _styleInputWidth)}\r\n           placeholder={placeholder}\r\n           onChange={this._handleInputChange}\r\n           onKeyDown={this._handleInputKeyDown}>\r\n        </input>\r\n        {afterInputEl}\r\n        <hr style={Object.assign({},styles.inputHr, _styleHr)}></hr>\r\n        {_domOptions}\r\n      </div>\r\n    )\r\n  }\r\n\r\n  focusInput(){\r\n    this.domInputText.focus()\r\n  }\r\n  focusNotValidInput(){\r\n    this.domInputText.focus()\r\n  }\r\n\r\n}\r\n\r\nexport default InputSelect\r\n"]}