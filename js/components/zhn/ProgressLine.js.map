{"version":3,"file":"ProgressLine.js","names":["_uiApi","require","_useRerender","_interopRequireDefault","_jsxRuntime","CL","DF_COLOR","TM_PERIOD","WIDTH_TRANSITION","_crLineStyle","backgroundColor","width","transition","opacity","_crCompleted","completed","_refWasCompleted","setRefValue","_crStyle","color","getRefValue","ProgressLine","_ref","rerender","useRerender","useRef","_refIdCompleted","useEffect","setTimeout","clearTimeout","_style","jsx","className","style","_default","exports","default"],"sources":["../../../src/components/zhn/ProgressLine.jsx"],"sourcesContent":["import {\r\n  useRef,\r\n  useEffect,\r\n  getRefValue,\r\n  setRefValue\r\n} from '../uiApi';\r\n\r\nimport useRerender from '../hooks/useRerender';\r\n\r\nconst CL = \"progress-line\"\r\n, DF_COLOR = '#2f7ed8'\r\n, TM_PERIOD = 800\r\n, WIDTH_TRANSITION = 'width 350ms linear';\r\n\r\nconst _crLineStyle = (\r\n  backgroundColor,\r\n  width,\r\n  transition\r\n) => ({\r\n   backgroundColor,\r\n   width: width + '%',\r\n   transition,\r\n   opacity: 1\r\n});\r\n\r\nconst _crCompleted = (\r\n  completed,\r\n  _refWasCompleted\r\n) => completed < 0\r\n  ? 0\r\n  : completed >= 100\r\n     ? (setRefValue(_refWasCompleted, true), 100)\r\n     : completed;\r\n\r\nconst _crStyle = (\r\n  _refWasCompleted,\r\n  color,\r\n  completed\r\n) => getRefValue(_refWasCompleted)\r\n  ? (setRefValue(_refWasCompleted, false), _crLineStyle(color, 0))\r\n  : _crLineStyle(color, _crCompleted(completed, _refWasCompleted), WIDTH_TRANSITION);\r\n\r\nconst ProgressLine = ({\r\n  color=DF_COLOR,\r\n  completed\r\n}) => {\r\n  const rerender = useRerender()\r\n  , _refWasCompleted = useRef(false)\r\n  , _refIdCompleted= useRef(null);\r\n\r\n  useEffect(()=>{\r\n    if (getRefValue(_refWasCompleted)){\r\n      setRefValue(_refIdCompleted, setTimeout(rerender, TM_PERIOD))\r\n    }\r\n  })\r\n\r\n  useEffect(()=>{\r\n    return () => {\r\n      clearTimeout(getRefValue(_refIdCompleted))\r\n    }\r\n  }, [])\r\n\r\n  const _style = _crStyle(\r\n    _refWasCompleted,\r\n    color,\r\n    completed\r\n  );\r\n\r\n  return (\r\n    <div\r\n      className={CL}\r\n      style={_style}\r\n    />\r\n  );\r\n};\r\n\r\nexport default ProgressLine\r\n"],"mappings":";;;;;AAAA,IAAAA,MAAA,GAAAC,OAAA;AAOA,IAAAC,YAAA,GAAAC,sBAAA,CAAAF,OAAA;AAA+C,IAAAG,WAAA,GAAAH,OAAA;AAE/C,MAAMI,EAAE,GAAG,eAAe;EACxBC,QAAQ,GAAG,SAAS;EACpBC,SAAS,GAAG,GAAG;EACfC,gBAAgB,GAAG,oBAAoB;AAEzC,MAAMC,YAAY,GAAGA,CACnBC,eAAe,EACfC,KAAK,EACLC,UAAU,MACN;EACHF,eAAe;EACfC,KAAK,EAAEA,KAAK,GAAG,GAAG;EAClBC,UAAU;EACVC,OAAO,EAAE;AACZ,CAAC,CAAC;AAEF,MAAMC,YAAY,GAAGA,CACnBC,SAAS,EACTC,gBAAgB,KACbD,SAAS,GAAG,CAAC,GACd,CAAC,GACDA,SAAS,IAAI,GAAG,IACZ,IAAAE,kBAAW,EAACD,gBAAgB,EAAE,IAAI,CAAC,EAAE,GAAG,IACzCD,SAAS;AAEhB,MAAMG,QAAQ,GAAGA,CACfF,gBAAgB,EAChBG,KAAK,EACLJ,SAAS,KACN,IAAAK,kBAAW,EAACJ,gBAAgB,CAAC,IAC7B,IAAAC,kBAAW,EAACD,gBAAgB,EAAE,KAAK,CAAC,EAAEP,YAAY,CAACU,KAAK,EAAE,CAAC,CAAC,IAC7DV,YAAY,CAACU,KAAK,EAAEL,YAAY,CAACC,SAAS,EAAEC,gBAAgB,CAAC,EAAER,gBAAgB,CAAC;AAEpF,MAAMa,YAAY,GAAGC,IAAA,IAGf;EAAA,IAHgB;IACpBH,KAAK,GAACb,QAAQ;IACdS;EACF,CAAC,GAAAO,IAAA;EACC,MAAMC,QAAQ,GAAG,IAAAC,oBAAW,EAAC,CAAC;IAC5BR,gBAAgB,GAAG,IAAAS,aAAM,EAAC,KAAK,CAAC;IAChCC,eAAe,GAAE,IAAAD,aAAM,EAAC,IAAI,CAAC;EAE/B,IAAAE,gBAAS,EAAC,MAAI;IACZ,IAAI,IAAAP,kBAAW,EAACJ,gBAAgB,CAAC,EAAC;MAChC,IAAAC,kBAAW,EAACS,eAAe,EAAEE,UAAU,CAACL,QAAQ,EAAEhB,SAAS,CAAC,CAAC;IAC/D;EACF,CAAC,CAAC;EAEF,IAAAoB,gBAAS,EAAC,MAAI;IACZ,OAAO,MAAM;MACXE,YAAY,CAAC,IAAAT,kBAAW,EAACM,eAAe,CAAC,CAAC;IAC5C,CAAC;EACH,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMI,MAAM,GAAGZ,QAAQ,CACrBF,gBAAgB,EAChBG,KAAK,EACLJ,SACF,CAAC;EAED,oBACE,IAAAX,WAAA,CAAA2B,GAAA;IACEC,SAAS,EAAE3B,EAAG;IACd4B,KAAK,EAAEH;EAAO,CACf,CAAC;AAEN,CAAC;AAAC,IAAAI,QAAA,GAAAC,OAAA,CAAAC,OAAA,GAEaf,YAAY","ignoreList":[]}