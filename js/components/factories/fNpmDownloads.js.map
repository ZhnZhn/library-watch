{"version":3,"sources":["../../../src/components/factories/fNpmDownloads.js"],"names":["MAX_ITEMS","_fnTransformDownloads","downloads","day","labels","data","itemLen","length","fromDate","toDate","itemStep","Math","round","sumDownloads","forEach","item","index","date","value","split","y","m","d","DateUtils","isWeekend","push","fNpmDownloads","factory","option","json","parentProps","onMoveToTop","onCloseItem","onWatchItem","repo","requestType","chartType","browserType","key","packageName","package","createElement","NpmRecentMonthDownloads","caption","bind"],"mappings":"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","file":"fNpmDownloads.js","sourcesContent":["\r\nimport DateUtils from '../../utils/DateUtils';\r\n\r\nimport NpmRecentMonthDownloads from '../items/NpmRecentMonthDownloads';\r\n\r\nconst MAX_ITEMS = 30;\r\n\r\n/* Irregular Time Inrevals */\r\nconst _fnTransformDownloads = (downloads=[{ day: '1970-01-01', downloads : 0}]) => {\r\n    const labels = []\r\n        , data = []\r\n        , itemLen = downloads.length\r\n        , fromDate = downloads[0].day\r\n        , toDate = itemLen > 0\r\n            ? downloads[itemLen-1].day\r\n            : fromDate\r\n        , itemStep = itemLen > MAX_ITEMS\r\n            ? Math.round(itemLen/MAX_ITEMS)\r\n            : 1;\r\n    let sumDownloads = 0;\r\n\r\n    downloads.forEach((item, index) => {\r\n      const { day:date, downloads:value } = item\r\n          , [ y, m, d ] = date.split('-');\r\n\r\n      if ( index % itemStep === 0) {\r\n         if ( !DateUtils.isWeekend(y, m, d) ){\r\n           labels.push(`${m}-${d}`);\r\n           data.push(value);\r\n         } else if (index-2>-1) {\r\n           const item = downloads[index-2]\r\n              , { day:date, downloads:value } = item\r\n           /* eslint-disable no-unused-vars */\r\n              , [ y, m, d ] = date.split('-');\r\n           /* eslint-disable no-unused-vars */\r\n           labels.push(`${m}-${d}`);\r\n           data.push(value);\r\n         }\r\n      }\r\n\r\n      sumDownloads += value;\r\n    })\r\n\r\n    return {sumDownloads, fromDate, toDate, labels, data};\r\n}\r\n\r\n\r\nconst fNpmDownloads = function({\r\n  factory, option, json, parentProps,\r\n  onMoveToTop, onCloseItem,\r\n  onWatchItem\r\n}){\r\n  const { repo, requestType, chartType, browserType, key } = option\r\n  , { downloads, package:packageName } = json\r\n  , { sumDownloads, fromDate, toDate, labels, data } = _fnTransformDownloads(downloads)\r\n\r\n  return factory.createElement(NpmRecentMonthDownloads, {\r\n     key,\r\n     packageName,\r\n     caption: packageName,\r\n     requestType,\r\n     sumDownloads,\r\n     fromDate,\r\n     toDate,\r\n     labels,\r\n     data,\r\n     onMoveToTop,\r\n     onCloseItem: onCloseItem.bind(null, chartType, browserType, key),     \r\n     ...parentProps\r\n  })\r\n};\r\n\r\nexport default fNpmDownloads\r\n"]}