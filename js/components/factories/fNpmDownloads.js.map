{"version":3,"sources":["../../../src/components/factories/fNpmDownloads.js"],"names":["MAX_ITEMS","_fnTransformDownloads","downloads","day","labels","data","itemLen","length","fromDate","toDate","itemStep","Math","round","sumDownloads","forEach","item","index","date","value","split","y","m","d","DateUtils","isWeekend","push","fNpmDownloads","factory","option","json","parentProps","onMoveToTop","onCloseItem","onWatchItem","repo","requestType","chartType","browserType","key","packageLink","packageName","createElement","NpmDownloads","caption","bind"],"mappings":"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","sourcesContent":["\r\nimport DateUtils from '../../utils/DateUtils';\r\n\r\nimport NpmDownloads from '../items/NpmDownloads';\r\n\r\nconst MAX_ITEMS = 30;\r\n\r\n/* Irregular Time Inrevals */\r\nconst _fnTransformDownloads = (downloads=[{ day: '1970-01-01', downloads : 0}]) => {\r\n    const labels = []\r\n        , data = []\r\n        , itemLen = downloads.length\r\n        , fromDate = downloads[0].day\r\n        , toDate = itemLen > 0\r\n            ? downloads[itemLen-1].day\r\n            : fromDate\r\n        , itemStep = itemLen > MAX_ITEMS\r\n            ? Math.round(itemLen/MAX_ITEMS)\r\n            : 1;\r\n    let sumDownloads = 0;\r\n\r\n    downloads.forEach((item, index) => {\r\n      const { day:date, downloads:value } = item\r\n          , [ y, m, d ] = date.split('-');\r\n\r\n      if ( index % itemStep === 0) {\r\n         if ( !DateUtils.isWeekend(y, m, d) ){\r\n           labels.push(`${m}-${d}`);\r\n           data.push(value);\r\n         } else if (index-2>-1) {\r\n           const item = downloads[index-2]\r\n              , { day:date, downloads:value } = item\r\n           /* eslint-disable no-unused-vars */\r\n              , [ y, m, d ] = date.split('-');\r\n           /* eslint-disable no-unused-vars */\r\n           labels.push(`${m}-${d}`);\r\n           data.push(value);\r\n         }\r\n      }\r\n\r\n      sumDownloads += value;\r\n    })\r\n\r\n    return {sumDownloads, fromDate, toDate, labels, data};\r\n}\r\n\r\n\r\nconst fNpmDownloads = function({\r\n  factory, option, json, parentProps,\r\n  onMoveToTop, onCloseItem,\r\n  onWatchItem\r\n}){\r\n  const { repo, requestType, chartType, browserType, key, packageLink } = option\r\n  , { downloads, package:packageName } = json\r\n  , { sumDownloads, fromDate, toDate, labels, data } = _fnTransformDownloads(downloads)\r\n\r\n  return factory.createElement(NpmDownloads, {\r\n     key,\r\n     packageName,\r\n     packageLink,\r\n     caption: packageName,\r\n     requestType,\r\n     sumDownloads,\r\n     fromDate,\r\n     toDate,\r\n     labels,\r\n     data,\r\n     onMoveToTop,\r\n     onCloseItem: onCloseItem.bind(null, chartType, browserType, key),\r\n     ...parentProps\r\n  })\r\n};\r\n\r\nexport default fNpmDownloads\r\n"],"file":"fNpmDownloads.js"}