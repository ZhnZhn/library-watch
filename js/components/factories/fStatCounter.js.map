{"version":3,"file":"fStatcounter.js","names":["_StatcounterShare","_interopRequireDefault","require","_helperFn","_jsxRuntime","_filterEmptyDate","json","data","filter","item","Boolean","Date","_crArrFromObj","obj","getObjectKeys","map","propName","caption","value","parseFloat","_compareByValue","a","b","_crTopN","arr","top","rest","length","_arrRecent","sort","_arrTop","_toIndex","i","push","_crLabelsDataTuple","labels","_arrTop5","_maxSeria","arrSeries","seriaName","_arr","forEach","row","_crCaption","_ref","region","fStatcounter","_ref2","option","parentProps","onMoveToTop","onCloseItem","onWatchItem","jsx","default","requestType","fromDate","toDate","sourceLink","key","_default","exports"],"sources":["../../../src/components/factories/fStatcounter.jsx"],"sourcesContent":["import StatcounterShare from \"../items/StatcounterShare\";\r\nimport { getObjectKeys } from \"./helperFn\";\r\n\r\nconst _filterEmptyDate = (\r\n  json\r\n) => json.data.filter(item => Boolean(item.Date));\r\n\r\nconst _crArrFromObj = obj => getObjectKeys(obj)\r\n  .map(propName => ({\r\n    caption: propName,\r\n    value: parseFloat(obj[propName])\r\n  }));\r\n\r\nconst _compareByValue = (a, b) => b.value - a.value;\r\nconst _crTopN = (arr, top=5) => {\r\n  /*eslint-disable no-unused-vars */\r\n  const { Date, ...rest } = arr[arr.length-1]\r\n  /*eslint-enable no-unused-vars */\r\n  , _arrRecent = _crArrFromObj(rest);\r\n  _arrRecent.sort(_compareByValue)\r\n\r\n  const _arrTop = []\r\n  , _toIndex = _arrRecent.length;\r\n  for(let i=0; i<_toIndex; i++){\r\n    const caption = _arrRecent[i].caption;\r\n    if (caption) {\r\n      _arrTop.push(caption)\r\n    }\r\n  }\r\n  return _arrTop;\r\n}\r\n\r\nconst _crLabelsDataTuple = (json) => {\r\n  const labels = []\r\n  , _arrTop5 = _crTopN(json)\r\n  , _maxSeria = _arrTop5.length\r\n  , arrSeries = _arrTop5.map(seriaName => {\r\n    const _arr = [];\r\n    _arr.seriaName = seriaName\r\n    return _arr;\r\n  });\r\n\r\n  json.forEach(row => {\r\n    labels.push(row.Date)\r\n    for(let i=0; i<_maxSeria; i++){\r\n      const _arr = arrSeries[i];\r\n      _arr.push(row[_arr.seriaName])\r\n    }\r\n  })\r\n\r\n  return [\r\n    labels,\r\n    arrSeries\r\n  ];\r\n};\r\n\r\nconst _crCaption = ({\r\n  caption,\r\n  region\r\n}) => `${(region || {}).caption || \"\"}: ${caption}`;\r\n\r\nconst fStatcounter = ({\r\n  option,\r\n  json,\r\n  parentProps,\r\n  onMoveToTop,\r\n  onCloseItem,\r\n  onWatchItem\r\n}) => {\r\n  const [\r\n    labels,\r\n    data\r\n  ] = _crLabelsDataTuple(_filterEmptyDate(json));\r\n\r\n  return (<StatcounterShare\r\n    key={option.key}\r\n    caption={_crCaption(option)}\r\n    requestType={option.requestType}\r\n    fromDate={labels[0]}\r\n    toDate={labels[labels.length - 1]}\r\n    labels={labels}\r\n    data={data}\r\n    sourceLink={option.sourceLink}\r\n    onMoveToTop={onMoveToTop}\r\n    onCloseItem={onCloseItem}\r\n    {...parentProps}\r\n  />);\r\n};\r\n\r\nexport default fStatcounter\r\n"],"mappings":"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","ignoreList":[]}