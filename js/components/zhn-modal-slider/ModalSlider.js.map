{"version":3,"file":"ModalSlider.js","names":["_uiApi","require","_useInitStateFromProps","_interopRequireDefault","_useThrottleCallback","_ModalPane","_ShowHide","_MenuPage","_MenuPages","_jsxRuntime","S_SHOW_HIDE","position","overflow","S_PAGES","display","flexFlow","alignItems","overflowX","transition","DF_INIT_ID","DF_MODEL","pageWidth","maxPages","initId","p0","_crWidthStyle","v","width","_addPage","model","pages","id","title","push","jsx","default","items","titleCl","itemCl","_initState","_pW","_maxP","_initId","addPage","bindTo","pagesStyle","pageStyle","pageCurrent","_crTransformStyle","_dX","transform","ModalSlider","_ref","isShow","className","rootStyle","style","onClose","state","setState","useInitStateFromProps","hPrevPage","useThrottleCallback","pageNumber","prevState","hNextPage","_max","length","key","splice","_showHideStyle","_divStyle","children","onNextPage","onPrevPage","_default","exports"],"sources":["../../../src/components/zhn-modal-slider/ModalSlider.jsx"],"sourcesContent":["import { bindTo } from '../uiApi';\r\n\r\nimport useInitStateFromProps from '../hooks/useInitStateFromProps';\r\nimport useThrottleCallback from '../hooks/useThrottleCallback';\r\n\r\nimport ModalPane from '../zhn-moleculs/ModalPane';\r\nimport ShowHide from '../zhn/ShowHide';\r\n\r\nimport MenuPage from './MenuPage';\r\nimport MenuPages from './MenuPages';\r\n\r\nconst S_SHOW_HIDE = {\r\n  position: 'absolute',\r\n  overflow: 'hidden'\r\n},\r\nS_PAGES = {\r\n  display: 'flex',\r\n  flexFlow: 'row nowrap',\r\n  alignItems: 'flex-start',\r\n  overflowX: 'hidden',\r\n  transition: 'all 750ms ease-out'\r\n}\r\n\r\n, DF_INIT_ID = 'p0'\r\n, DF_MODEL = {\r\n  pageWidth: 100,\r\n  maxPages: 2,\r\n  initId: DF_INIT_ID,\r\n  p0: []\r\n};\r\n\r\nconst _crWidthStyle = (v) => ({\r\n  width: v\r\n});\r\n\r\nconst _addPage = (\r\n  model,\r\n  pages,\r\n  id,\r\n  title\r\n) => {\r\n  pages.push((\r\n    <MenuPage\r\n      key={id}\r\n      title={title}\r\n      items={model[id]}\r\n      titleCl={model.titleCl}\r\n      itemCl={model.itemCl}\r\n    />\r\n  ))\r\n};\r\n\r\nconst _initState = model => {\r\n  const _pW = model.pageWidth\r\n  , _maxP = model.maxPages\r\n  , _initId = model.initId || DF_INIT_ID;\r\n\r\n  return {\r\n    addPage: bindTo(_addPage, model),\r\n    pageWidth: _pW,\r\n    pagesStyle: _crWidthStyle(_maxP*_pW),\r\n    pageStyle: _crWidthStyle(_pW),\r\n    pageCurrent: 1,\r\n    pages: [\r\n      <MenuPage\r\n        key={_initId}\r\n        items={model[_initId]}\r\n        titleCl={model.titleCl}\r\n        itemCl={model.itemCl}\r\n      />\r\n    ]\r\n  };\r\n};\r\n\r\nconst _crTransformStyle = (\r\n  pageWidth,\r\n  pageCurrent\r\n) => {\r\n  const _dX = -1*pageWidth*(pageCurrent - 1)+0;\r\n  return {\r\n    transform: `translateX(${_dX}px)`\r\n  };\r\n};\r\n\r\nconst ModalSlider = ({\r\n  model=DF_MODEL,\r\n  isShow,\r\n  className,\r\n  rootStyle,\r\n  style,\r\n  onClose\r\n}) => {\r\n  const [\r\n    state,\r\n    setState\r\n  ] = useInitStateFromProps(\r\n    _initState,\r\n    model\r\n  )\r\n  , {\r\n     pageWidth,\r\n     pagesStyle,\r\n     pageStyle,\r\n     pageCurrent,\r\n     pages\r\n   } = state\r\n  , hPrevPage = useThrottleCallback(pageNumber => {\r\n     setState(prevState => {\r\n       prevState.pageCurrent = pageNumber - 1\r\n       return {...prevState};\r\n     })\r\n  })\r\n  , hNextPage = useThrottleCallback((\r\n      id,\r\n      title,\r\n      pageNumber\r\n    ) => {\r\n     setState(prevState => {\r\n       const {\r\n         addPage,\r\n         pages\r\n       } = prevState\r\n       , _max = pages.length-1;\r\n\r\n       if ( (_max+1) > pageNumber) {\r\n         if (pages[pageNumber] && pages[pageNumber].key !== id) {\r\n           if (pageNumber>0) {\r\n             prevState.pages.splice(pageNumber)\r\n           } else {\r\n             prevState.pages = []\r\n           }\r\n           addPage(prevState.pages, id, title)\r\n         }\r\n       } else {\r\n         addPage(pages, id, title)\r\n       }\r\n\r\n       prevState.pageCurrent = pageNumber + 1\r\n       return {...prevState};\r\n     })\r\n  });\r\n\r\n  const _showHideStyle = {\r\n    ...style,\r\n    ...S_SHOW_HIDE,\r\n    ...pageStyle\r\n  }, _divStyle = {\r\n    ...S_PAGES,\r\n    ...pagesStyle,\r\n    ..._crTransformStyle(pageWidth, pageCurrent)\r\n  };\r\n\r\n  return (\r\n      <ModalPane\r\n        isShow={isShow}\r\n        style={rootStyle}\r\n        onClose={onClose}\r\n      >\r\n        <ShowHide\r\n          className={className}\r\n          style={_showHideStyle}\r\n          isShow={isShow}\r\n        >\r\n          <div style={_divStyle}>\r\n            <MenuPages\r\n              isShow={isShow}\r\n              style={pageStyle}\r\n              pages={pages}\r\n              pageCurrent={pageCurrent}\r\n              onNextPage={hNextPage}\r\n              onPrevPage={hPrevPage}\r\n              onClose={onClose}\r\n            />\r\n          </div>\r\n        </ShowHide>\r\n      </ModalPane>\r\n  );\r\n};\r\n\r\nexport default ModalSlider\r\n"],"mappings":"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","ignoreList":[]}