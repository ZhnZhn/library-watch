{"version":3,"sources":["../../../src/components/browser-watch/WatchBrowser.jsx"],"names":["DRAG","GROUP","LIST","ITEM","CL","BROWSER_WATCH","BROWSER_WATCH__30","BROWSER_WATCH__60","BT_BAR","BT_CAPTION","styles","browser","paddingRight","maxWidth","captionRoot","minWidth","captionRootDouble","editBarDiv","marginBottom","btCircle","marginLeft","btCircleRight","marginRight","btEditBarList","wrapperSearch","paddingBottom","width","scrollDiv","overflowY","height","groupDiv","lineHeight","listDiv","paddingLeft","borderLeft","itemNotSelected","borderBottom","WatchBrowser","WithDnDStyle","WatchActions","getInitialState","props","isShow","isEditMode","store","isShouldUpdateFind","isModeEdit","isShowFind","scrollClass","_calcScrollClass","watchList","getWatchList","componentDidMount","unsubscribe","listen","_onStore","componentWillUnmount","actionType","data","browserType","showAction","updateAction","_handlerShow","state","setState","_handlerHide","isDoubleWatch","BrowserActions","toggleWatchDbBrowser","_handlerToggleEditMode","_isModeEdit","_handlerToggleFindInput","_isShowFind","_handlerEditGroup","ComponentActions","showModalDialog","ModalDialog","EDIT_WATCH_GROUP","_handlerEditList","EDIT_WATCH_LIST","_handlerDouble","_renderWatchList","groups","map","group","index","caption","lists","_handlerDragStartGroup","_handlerDragEnterGroup","_handlerDragOverGroup","_handlerDragLeaveGroup","_handlerDropGroup","_renderLists","groupCaption","list","items","_handlerDragStartList","_handlerDragEnterList","_handlerDragOverList","_handlerDragLeaveList","_handlerDropList","_renderItems","_handlerClickItem","item","LOAD_WATCH_ITEM","_handlerRemoveItem","option","event","stopPropagation","removeItem","listCaption","_className","_handlerDragStartItem","_handlerDragOverItem","_handlerDragEnterItem","_handlerDragLeaveItem","_handlerDropItem","_renderEditBar","_renderFindInput","_isShouldUpdate","render","_styleCaption","_captionEV","_titleEV","backupToJson","bind","LOAD_FILE","onLoad","loadFromJson"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport createReactClass from 'create-react-class'\r\nimport classNames from 'classnames';\r\n\r\nimport WithDnDStyle from './with/WithDnDStyle';\r\nimport createHandlerDnDGroup from './with/createHandlerDnDGroup';\r\nimport createHandlerDnDList from './with/createHandlerDnDList';\r\nimport createHandlerDnDItem from './with/createHandlerDnDItem';\r\n\r\nimport { ModalDialog } from '../../constants/Type';\r\nimport ComponentActions from '../../flux/actions/ComponentActions';\r\nimport BrowserActions from '../../flux/actions/BrowserActions';\r\nimport WatchActions from '../../flux/actions/WatchActions';\r\n\r\nimport Browser from '../zhn-atoms/Browser';\r\nimport CaptionRow from '../zhn-atoms/CaptionRow';\r\nimport ButtonSave from '../zhn-moleculs/ButtonSave';\r\nimport ButtonCircle from '../zhn-atoms/ButtonCircle';\r\nimport ShowHide from '../zhn-atoms/ShowHide';\r\nimport WrapperInputSearch from './WrapperInputSearch';\r\n\r\nimport ScrollPane from '../zhn-atoms/ScrollPane';\r\nimport OpenClose2 from '../zhn-atoms/OpenClose2';\r\nimport WatchItem from './WatchItem';\r\n\r\n\r\nconst DRAG = {\r\n  GROUP : 'GROUP',\r\n  LIST : 'LIST',\r\n  ITEM : 'ITEM'\r\n};\r\n\r\nconst CL = {\r\n  BROWSER_WATCH : \"browser-watch\",\r\n  BROWSER_WATCH__30 : \"browser-watch--1r\",\r\n  BROWSER_WATCH__60 : \"browser-watch--2r\",\r\n  BT_BAR: \"bt__watch__bar\",\r\n  BT_CAPTION: \"bt__watch__caption\",\r\n};\r\n\r\n\r\nconst styles = {\r\n  browser : {\r\n    paddingRight: 0,\r\n    maxWidth: 500\r\n  },\r\n  captionRoot : {\r\n     minWidth: 340\r\n  },\r\n  captionRootDouble : {\r\n     minWidth: 310\r\n  },\r\n  editBarDiv : {\r\n    marginBottom: 10\r\n  },\r\n  btCircle : {\r\n    marginLeft: 20\r\n  },\r\n  btCircleRight : {\r\n    marginLeft: 20,\r\n    marginRight: 20\r\n  },\r\n  btEditBarList : {\r\n    marginLeft: 20\r\n  },\r\n  wrapperSearch : {\r\n     paddingBottom: 8,\r\n     width: '100%',\r\n     paddingRight: 24\r\n  },\r\n  scrollDiv : {\r\n    overflowY: 'auto',\r\n    height: '92%',\r\n    paddingRight: 10\r\n  },\r\n  groupDiv : {\r\n    lineHeight : 2\r\n  },\r\n  listDiv : {\r\n    marginLeft : 8,\r\n    paddingLeft : 12,\r\n    borderLeft : '1px solid yellow',\r\n    lineHeight : 2\r\n  },\r\n  itemNotSelected : {\r\n    borderBottom : '1px solid rgba(128, 192, 64, 0.6)',\r\n    marginRight : 10\r\n  }\r\n};\r\n\r\nconst WatchBrowser = createReactClass({\r\n  ...WithDnDStyle,\r\n  ...createHandlerDnDGroup(DRAG, WatchActions),\r\n  ...createHandlerDnDList(DRAG, WatchActions),\r\n  ...createHandlerDnDItem(DRAG, WatchActions),\r\n\r\n  getInitialState(){\r\n    const { isShow=false, isEditMode=false, store } = this.props;\r\n\r\n    this.isShouldUpdateFind = false;\r\n\r\n    return {\r\n      isShow : isShow,\r\n      isModeEdit : isEditMode,\r\n      isShowFind : false,\r\n      scrollClass : this._calcScrollClass(false, isEditMode),\r\n      watchList : store.getWatchList()\r\n    }\r\n  },\r\n\r\n  _calcScrollClass(isShowFind, isModeEdit){\r\n    return classNames({\r\n      [CL.BROWSER_WATCH] : !(isShowFind && isModeEdit),\r\n      [CL.BROWSER_WATCH__30] : (isShowFind && !isModeEdit) || (!isShowFind && isModeEdit),\r\n      [CL.BROWSER_WATCH__60] : (isShowFind && isModeEdit)\r\n    });\r\n  },\r\n\r\n  componentDidMount(){\r\n    this.unsubscribe = this.props.store.listen(this._onStore);\r\n  },\r\n  componentWillUnmount(){\r\n    this.unsubscribe();\r\n  },\r\n  _onStore(actionType, data){\r\n     const { browserType, showAction, updateAction } = this.props;\r\n     if (actionType === showAction && data === browserType ){\r\n       this._handlerShow();\r\n     } else if (actionType === updateAction) {\r\n       const { isModeEdit } = this.state\r\n       this.isShouldUpdateFind = true;\r\n       this.setState({\r\n         watchList: data,\r\n         isShowFind : false,\r\n         scrollClass : this._calcScrollClass(false, isModeEdit)\r\n      })\r\n    }\r\n  },\r\n\r\n  _handlerHide(){\r\n     if (!this.props.isDoubleWatch){\r\n       this.setState({ isShow : false });\r\n     } else {\r\n       BrowserActions.toggleWatchDbBrowser();\r\n     }\r\n  },\r\n  _handlerShow(){\r\n    if (!this.props.isDoubleWatch){\r\n     this.setState({ isShow : true });\r\n    }\r\n  },\r\n\r\n  _handlerToggleEditMode(){\r\n    const { isShowFind, isModeEdit } = this.state\r\n         , _isModeEdit = !isModeEdit\r\n    this.setState({\r\n      isModeEdit : _isModeEdit,\r\n      scrollClass : this._calcScrollClass(isShowFind, _isModeEdit)\r\n    });\r\n  },\r\n\r\n  _handlerToggleFindInput(){\r\n    const { isShowFind, isModeEdit } = this.state\r\n         , _isShowFind = !isShowFind\r\n    this.setState({\r\n      isShowFind : _isShowFind,\r\n      scrollClass : this._calcScrollClass(_isShowFind, isModeEdit)\r\n    })\r\n  },\r\n\r\n  _handlerEditGroup(){\r\n    ComponentActions.showModalDialog(ModalDialog.EDIT_WATCH_GROUP);\r\n  },\r\n  _handlerEditList(){\r\n    ComponentActions.showModalDialog(ModalDialog.EDIT_WATCH_LIST);\r\n  },\r\n  _handlerDouble(){\r\n    BrowserActions.toggleWatchDbBrowser();\r\n  },\r\n\r\n  _renderWatchList(watchList){\r\n     const { isModeEdit } = this.state;\r\n     return watchList.groups.map((group, index) => {\r\n       const {caption, lists} = group;\r\n       return (\r\n               <OpenClose2\r\n                  key={caption}\r\n                  style={styles.groupDiv}\r\n                  caption={caption}\r\n                  isClose={true}\r\n                  isDraggable={isModeEdit}\r\n                  option={{ caption }}\r\n                  onDragStart={this._handlerDragStartGroup}\r\n                  onDragEnter={this._handlerDragEnterGroup}\r\n                  onDragOver={this._handlerDragOverGroup}\r\n                  onDragLeave={this._handlerDragLeaveGroup}\r\n                  onDrop={this._handlerDropGroup}\r\n                >\r\n                  {lists && this._renderLists(lists, caption)}\r\n                </OpenClose2>\r\n              )\r\n     })\r\n  },\r\n\r\n  _renderLists(lists, groupCaption){\r\n    const { isModeEdit } = this.state;\r\n    return lists.map((list) => {\r\n      const { caption, items } = list;\r\n      return (\r\n        <OpenClose2\r\n           key={caption}\r\n           fillOpen={'#80c040'}\r\n           style={styles.listDiv}\r\n           styleNotSelected={styles.itemNotSelected}\r\n           caption={caption}\r\n           isClose={true}\r\n           isDraggable={isModeEdit}\r\n           option={{ groupCaption, caption }}\r\n           onDragStart={this._handlerDragStartList}\r\n           onDragEnter={this._handlerDragEnterList}\r\n           onDragOver={this._handlerDragOverList}\r\n           onDragLeave={this._handlerDragLeaveList}\r\n           onDrop={this._handlerDropList}\r\n        >\r\n          {items && this._renderItems(items, groupCaption, caption)}\r\n        </OpenClose2>\r\n      )\r\n    })\r\n  },\r\n\r\n  _handlerClickItem(item){\r\n    ComponentActions.showModalDialog(ModalDialog.LOAD_WATCH_ITEM, item);\r\n  },\r\n  _handlerRemoveItem(option, event){\r\n    event.stopPropagation();\r\n    WatchActions.removeItem(option);\r\n  },\r\n\r\n  _renderItems(items, groupCaption, listCaption) {\r\n      const {isModeEdit} = this.state;\r\n      return items.map((item, index) => {\r\n        const { caption } = item\r\n            , _className = (index % 2)\r\n                 ? 'row__topic__even not-selected'\r\n                 : 'row__topic__odd not-selected'\r\n        return (\r\n           <WatchItem\r\n              key={caption}\r\n              className={_className}\r\n              isModeEdit={isModeEdit}\r\n              item={item}\r\n              option={{ groupCaption, listCaption, caption }}\r\n              onClick={this._handlerClickItem}\r\n              onClose={this._handlerRemoveItem}\r\n              onDragStart={this._handlerDragStartItem}\r\n              onDragOver={this._handlerDragOverItem}\r\n              onDragEnter={this._handlerDragEnterItem}\r\n              onDragLeave={this._handlerDragLeaveItem}\r\n              onDrop={this._handlerDropItem}\r\n           />\r\n        );\r\n      })\r\n  },\r\n\r\n  _renderEditBar(isModeEdit){\r\n    if (isModeEdit){\r\n      return (\r\n        <div style={styles.editBarDiv}>\r\n           <ButtonCircle\r\n             caption=\"GROUP\"\r\n             title=\"Edit Group\"\r\n             className={CL.BT_BAR}\r\n             isWithoutDefault={true}\r\n             onClick={this._handlerEditGroup}\r\n          />\r\n          <ButtonCircle\r\n             caption=\"LIST\"\r\n             title=\"Edit Group List\"\r\n             className={CL.BT_BAR}\r\n             isWithoutDefault={true}\r\n             style={styles.btEditBarList}\r\n             onClick={this._handlerEditList}\r\n          />\r\n          <ButtonCircle\r\n             caption=\"DB\"\r\n             title=\"Double Watch Browser\"\r\n             className={CL.BT_BAR}\r\n             isWithoutDefault={true}\r\n             style={styles.btEditBarList}\r\n             onClick={this._handlerDouble}\r\n          />\r\n        </div>\r\n      )\r\n    } else {\r\n      return null;\r\n    }\r\n  },\r\n\r\n  _renderFindInput(watchList){\r\n    const { isShowFind } = this.state\r\n    const _isShouldUpdate = (isShowFind && this.isShouldUpdateFind)\r\n             ? (()=>{ this.isShouldUpdateFind = false; return true; })\r\n             : false;\r\n\r\n    return (\r\n      <ShowHide isShow={isShowFind}>\r\n        <WrapperInputSearch\r\n            style={styles.wrapperSearch}\r\n            data={watchList}\r\n            isShouldUpdate={_isShouldUpdate}\r\n            onSelect={this._handlerClickItem}\r\n        />\r\n      </ShowHide>\r\n    );\r\n  },\r\n\r\n  render(){\r\n    const { caption, isDoubleWatch, store } = this.props\r\n        , {\r\n            isShow, isModeEdit,\r\n            scrollClass, watchList\r\n          } = this.state\r\n        , _styleCaption = (isDoubleWatch)\r\n               ? styles.captionRootDouble\r\n               : styles.captionRoot\r\n        , _captionEV = (isModeEdit) ? 'V' : 'E'\r\n        , _titleEV = (isModeEdit)\r\n              ? \"Toggle to View Mode\"\r\n              : \"Toggle to Edit Mode\";\r\n\r\n    return (\r\n       <Browser\r\n          isShow={isShow}\r\n          style={styles.browser}\r\n        >\r\n         <CaptionRow\r\n            styleRoot={_styleCaption}\r\n            caption={caption}\r\n            onClose={this._handlerHide}\r\n         >\r\n           <ButtonSave\r\n             className={CL.BT_CAPTION}\r\n             store={store}\r\n           />\r\n           <ButtonCircle\r\n              className={CL.BT_CAPTION}\r\n              caption={_captionEV}\r\n              title={_titleEV}\r\n              isWithoutDefault={true}\r\n              onClick={this._handlerToggleEditMode}\r\n           />\r\n           <ButtonCircle\r\n             className={CL.BT_CAPTION}\r\n             caption=\"F\"\r\n             title=\"Show/Hide : Find Item Input\"\r\n             isWithoutDefault={true}\r\n             onClick={this._handlerToggleFindInput}\r\n           />\r\n           { !isDoubleWatch &&\r\n             <ButtonCircle\r\n                className={CL.BT_CAPTION}\r\n                caption=\"B\"\r\n                title=\"BackUp Watch Items to JSON File\"\r\n                isWithoutDefault={true}\r\n                onClick={WatchActions.backupToJson}\r\n              />\r\n           }\r\n           { !isDoubleWatch &&\r\n             <ButtonCircle\r\n                className={CL.BT_CAPTION}\r\n                caption=\"L\"\r\n                title=\"Load Watch Items from JSON File\"\r\n                isWithoutDefault={true}\r\n                onClick={ComponentActions.showModalDialog.bind(null, ModalDialog.LOAD_FILE, {\r\n                   onLoad : WatchActions.loadFromJson\r\n                })}\r\n              />\r\n           }\r\n         </CaptionRow>\r\n         {this._renderEditBar(isModeEdit)}\r\n         {watchList && this._renderFindInput(watchList)}\r\n         <ScrollPane className={scrollClass}>\r\n           {watchList && this._renderWatchList(watchList)}\r\n         </ScrollPane>\r\n      </Browser>\r\n    )\r\n  }\r\n});\r\n\r\nexport default WatchBrowser\r\n"],"file":"WatchBrowser.js"}