{"version":3,"sources":["../../../src/components/browser-watch/WatchBrowser.jsx"],"names":["DRAG","GROUP","LIST","ITEM","CLASS","BROWSER_WATCH","BROWSER_WATCH__30","BROWSER_WATCH__60","styles","browser","paddingRight","maxWidth","captionRoot","minWidth","captionRootDouble","editBarDiv","marginBottom","btCircle","marginLeft","btCircleRight","marginRight","btEditBarList","wrapperSearch","paddingBottom","width","scrollDiv","overflowY","height","groupDiv","lineHeight","listDiv","paddingLeft","borderLeft","itemNotSelected","borderBottom","WatchBrowser","createClass","getInitialState","props","isShow","isEditMode","store","isShouldUpdateFind","isModeEdit","isShowFind","scrollClass","_calcScrollClass","watchList","getWatchList","componentWillMount","unsubscribe","listen","_onStore","componentWillUnmount","actionType","data","browserType","showAction","updateAction","_handlerShow","state","setState","_handlerHide","isDoubleWatch","toggleWatchDbBrowser","_handlerSaveWatch","saveWatch","_handlerToggleEditMode","_isModeEdit","_handlerToggleFindInput","_isShowFind","_handlerEditGroup","showModalDialog","EDIT_WATCH_GROUP","_handlerEditList","EDIT_WATCH_LIST","_handlerDouble","_renderWatchList","groups","map","group","index","caption","lists","_handlerDragStartGroup","_handlerDragEnterGroup","_handlerDragOverGroup","_handlerDragLeaveGroup","_handlerDropGroup","_renderLists","groupCaption","list","items","_handlerDragStartList","_handlerDragEnterList","_handlerDragOverList","_handlerDragLeaveList","_handlerDropList","_renderItems","_handlerClickItem","item","LOAD_WATCH_ITEM","_handlerRemoveItem","option","event","stopPropagation","removeItem","listCaption","_className","_handlerDragStartItem","_handlerDragOverItem","_handlerDragEnterItem","_handlerDragLeaveItem","_handlerDropItem","_renderEditBar","_renderFindInput","_isShouldUpdate","render","_styleCaption","_captionEV","_titleEV","backupToJson","bind","LOAD_FILE","onLoad","loadFromJson"],"mappings":"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","file":"WatchBrowser.js","sourcesContent":["import React from 'react';\r\nimport classNames from 'classnames';\r\n\r\nimport WithDnDStyle from './with/WithDnDStyle';\r\nimport createHandlerDnDGroup from './with/createHandlerDnDGroup';\r\nimport createHandlerDnDList from './with/createHandlerDnDList';\r\nimport createHandlerDnDItem from './with/createHandlerDnDItem';\r\n\r\nimport { ModalDialog } from '../../constants/Type';\r\nimport ComponentActions from '../../flux/actions/ComponentActions';\r\nimport BrowserActions from '../../flux/actions/BrowserActions';\r\nimport WatchActions from '../../flux/actions/WatchActions';\r\n\r\nimport Browser from '../zhnAtoms/Browser';\r\nimport CaptionRow from '../zhnAtoms/CaptionRow';\r\nimport ButtonCircle from '../zhnAtoms/ButtonCircle';\r\n\r\nimport ShowHide from '../zhnAtoms/ShowHide';\r\nimport WrapperInputSearch from './WrapperInputSearch';\r\n\r\nimport ScrollPane from '../zhnAtoms/ScrollPane';\r\nimport OpenClose2 from '../zhnAtoms/OpenClose2';\r\nimport WatchItem from './WatchItem';\r\n\r\n\r\nconst DRAG = {\r\n  GROUP : 'GROUP',\r\n  LIST : 'LIST',\r\n  ITEM : 'ITEM'\r\n}\r\n\r\nconst CLASS = {\r\n  BROWSER_WATCH : \"browser-watch\",\r\n  BROWSER_WATCH__30 : \"browser-watch--1r\",\r\n  BROWSER_WATCH__60 : \"browser-watch--2r\"\r\n}\r\n\r\n\r\nconst styles = {\r\n  browser : {\r\n    paddingRight: '0px',\r\n    maxWidth: '500px'\r\n  },\r\n  captionRoot : {\r\n     minWidth: '340px'\r\n  },\r\n  captionRootDouble : {\r\n     minWidth: '310px'\r\n  },\r\n  editBarDiv : {\r\n    marginBottom: '10px'\r\n  },\r\n  btCircle : {\r\n    marginLeft: '20px'\r\n  },\r\n  btCircleRight : {\r\n    marginLeft: '20px',\r\n    marginRight: '20px'\r\n  },\r\n  btEditBarList : {\r\n    marginLeft: '20px'\r\n  },\r\n  wrapperSearch : {\r\n     paddingBottom: '8px',\r\n     width: '100%',\r\n     paddingRight: '24px'\r\n  },\r\n  scrollDiv : {\r\n    overflowY: 'auto',\r\n    height: '92%',\r\n    paddingRight: '10px'\r\n  },\r\n  groupDiv : {\r\n    lineHeight : 2\r\n  },\r\n  listDiv : {\r\n    marginLeft : '8px',\r\n    paddingLeft : '12px',\r\n    borderLeft : '1px solid yellow',\r\n    lineHeight : 2\r\n  },\r\n  itemNotSelected : {\r\n    borderBottom : '1px solid rgba(128, 192, 64, 0.6)',\r\n    marginRight : '10px'\r\n  }\r\n};\r\n\r\nconst WatchBrowser = React.createClass({\r\n  ...WithDnDStyle,\r\n  ...createHandlerDnDGroup(DRAG, WatchActions),\r\n  ...createHandlerDnDList(DRAG, WatchActions),\r\n  ...createHandlerDnDItem(DRAG, WatchActions),\r\n\r\n  getInitialState(){\r\n    const { isShow=false, isEditMode=false, store } = this.props;\r\n\r\n    this.isShouldUpdateFind = false;\r\n\r\n    return {\r\n      isShow : isShow,\r\n      isModeEdit : isEditMode,\r\n      isShowFind : false,\r\n      scrollClass : this._calcScrollClass(false, isEditMode),\r\n      watchList : store.getWatchList()\r\n    }\r\n  },\r\n\r\n  _calcScrollClass(isShowFind, isModeEdit){\r\n    return classNames({\r\n      [CLASS.BROWSER_WATCH] : !(isShowFind && isModeEdit),\r\n      [CLASS.BROWSER_WATCH__30] : (isShowFind && !isModeEdit) || (!isShowFind && isModeEdit),\r\n      [CLASS.BROWSER_WATCH__60] : (isShowFind && isModeEdit)\r\n    })\r\n  },\r\n\r\n  componentWillMount(){\r\n    this.unsubscribe = this.props.store.listen(this._onStore);\r\n  },\r\n  componentWillUnmount(){\r\n    this.unsubscribe();\r\n  },\r\n  _onStore(actionType, data){\r\n     const { browserType, showAction, updateAction } = this.props;\r\n     if (actionType === showAction && data === browserType ){\r\n       this._handlerShow();\r\n     } else if (actionType === updateAction) {\r\n       const { isModeEdit } = this.state\r\n       this.isShouldUpdateFind = true;\r\n       this.setState({\r\n         watchList: data,\r\n         isShowFind : false,\r\n         scrollClass : this._calcScrollClass(false, isModeEdit)\r\n      })\r\n    }\r\n  },\r\n\r\n  _handlerHide(){\r\n     if (!this.props.isDoubleWatch){\r\n       this.setState({ isShow : false });\r\n     } else {\r\n       BrowserActions.toggleWatchDbBrowser();\r\n     }\r\n  },\r\n  _handlerShow(){\r\n    if (!this.props.isDoubleWatch){\r\n     this.setState({ isShow : true });\r\n    }\r\n  },\r\n\r\n  _handlerSaveWatch(){\r\n    WatchActions.saveWatch();\r\n  },\r\n  _handlerToggleEditMode(){\r\n    const { isShowFind, isModeEdit } = this.state\r\n         , _isModeEdit = !isModeEdit\r\n    this.setState({\r\n      isModeEdit : _isModeEdit,\r\n      scrollClass : this._calcScrollClass(isShowFind, _isModeEdit)\r\n    });\r\n  },\r\n\r\n  _handlerToggleFindInput(){\r\n    const { isShowFind, isModeEdit } = this.state\r\n         , _isShowFind = !isShowFind\r\n    this.setState({\r\n      isShowFind : _isShowFind,\r\n      scrollClass : this._calcScrollClass(_isShowFind, isModeEdit)\r\n    })\r\n  },\r\n\r\n  _handlerEditGroup(){\r\n    ComponentActions.showModalDialog(ModalDialog.EDIT_WATCH_GROUP);\r\n  },\r\n  _handlerEditList(){\r\n    ComponentActions.showModalDialog(ModalDialog.EDIT_WATCH_LIST);\r\n  },\r\n  _handlerDouble(){\r\n    BrowserActions.toggleWatchDbBrowser();\r\n  },\r\n\r\n  _renderWatchList(watchList){\r\n     const { isModeEdit } = this.state;\r\n     return watchList.groups.map((group, index) => {\r\n       const {caption, lists} = group;\r\n       return (\r\n               <OpenClose2\r\n                  key={caption}\r\n                  style={styles.groupDiv}\r\n                  caption={caption}\r\n                  isClose={true}\r\n                  isDraggable={isModeEdit}\r\n                  option={{ caption }}\r\n                  onDragStart={this._handlerDragStartGroup}\r\n                  onDragEnter={this._handlerDragEnterGroup}\r\n                  onDragOver={this._handlerDragOverGroup}\r\n                  onDragLeave={this._handlerDragLeaveGroup}\r\n                  onDrop={this._handlerDropGroup}\r\n                >\r\n                  {lists && this._renderLists(lists, caption)}\r\n                </OpenClose2>\r\n              )\r\n     })\r\n  },\r\n\r\n  _renderLists(lists, groupCaption){\r\n    const { isModeEdit } = this.state;\r\n    return lists.map((list) => {\r\n      const { caption, items } = list;\r\n      return (\r\n        <OpenClose2\r\n           key={caption}\r\n           fillOpen={'#80c040'}\r\n           style={styles.listDiv}\r\n           styleNotSelected={styles.itemNotSelected}\r\n           caption={caption}\r\n           isClose={true}\r\n           isDraggable={isModeEdit}\r\n           option={{ groupCaption, caption }}\r\n           onDragStart={this._handlerDragStartList}\r\n           onDragEnter={this._handlerDragEnterList}\r\n           onDragOver={this._handlerDragOverList}\r\n           onDragLeave={this._handlerDragLeaveList}\r\n           onDrop={this._handlerDropList}\r\n        >\r\n          {items && this._renderItems(items, groupCaption, caption)}\r\n        </OpenClose2>\r\n      )\r\n    })\r\n  },\r\n\r\n  _handlerClickItem(item){\r\n    ComponentActions.showModalDialog(ModalDialog.LOAD_WATCH_ITEM, item);\r\n  },\r\n  _handlerRemoveItem(option, event){\r\n    event.stopPropagation();\r\n    WatchActions.removeItem(option);\r\n  },\r\n\r\n  _renderItems(items, groupCaption, listCaption) {\r\n      const {isModeEdit} = this.state;\r\n      return items.map((item, index) => {\r\n        const { caption } = item\r\n            , _className = (index % 2)\r\n                 ? 'row__topic__even not-selected'\r\n                 : 'row__topic__odd not-selected'\r\n        return (\r\n           <WatchItem\r\n              key={caption}\r\n              className={_className}\r\n              isModeEdit={isModeEdit}\r\n              item={item}\r\n              option={{ groupCaption, listCaption, caption }}\r\n              onClick={this._handlerClickItem}\r\n              onClose={this._handlerRemoveItem}\r\n              onDragStart={this._handlerDragStartItem}\r\n              onDragOver={this._handlerDragOverItem}\r\n              onDragEnter={this._handlerDragEnterItem}\r\n              onDragLeave={this._handlerDragLeaveItem}\r\n              onDrop={this._handlerDropItem}\r\n           />\r\n        );\r\n      })\r\n  },\r\n\r\n  _renderEditBar(isModeEdit){\r\n    if (isModeEdit){\r\n      return (\r\n        <div style={styles.editBarDiv}>\r\n           <ButtonCircle\r\n             caption={'GROUP'}\r\n             title=\"Edit Group\"\r\n             className={'bt__watch__bar'}\r\n             isWithoutDefault={true}\r\n             onClick={this._handlerEditGroup}\r\n          />\r\n          <ButtonCircle\r\n             caption={'LIST'}\r\n             title=\"Edit Group List\"\r\n             className={'bt__watch__bar'}\r\n             isWithoutDefault={true}\r\n             style={styles.btEditBarList}\r\n             onClick={this._handlerEditList}\r\n          />\r\n          <ButtonCircle\r\n             caption={'DB'}\r\n             title=\"Double Watch Browser\"\r\n             className={'bt__watch__bar'}\r\n             isWithoutDefault={true}\r\n             style={styles.btEditBarList}\r\n             onClick={this._handlerDouble}\r\n          />\r\n        </div>\r\n      )\r\n    } else {\r\n      return null;\r\n    }\r\n  },\r\n\r\n  _renderFindInput(watchList){\r\n    const { isShowFind } = this.state\r\n    const _isShouldUpdate = (isShowFind && this.isShouldUpdateFind)\r\n             ? (()=>{ this.isShouldUpdateFind = false; return true; })\r\n             : false;\r\n\r\n    return (\r\n      <ShowHide isShow={isShowFind}>\r\n        <WrapperInputSearch\r\n            style={styles.wrapperSearch}\r\n            data={watchList}\r\n            isShouldUpdate={_isShouldUpdate}\r\n            onSelect={this._handlerClickItem}\r\n        />\r\n      </ShowHide>\r\n    );\r\n  },\r\n\r\n  render(){\r\n    const { caption, isDoubleWatch } = this.props\r\n        , {\r\n            isShow, isModeEdit,\r\n            scrollClass, watchList\r\n          } = this.state\r\n        , _styleCaption = (isDoubleWatch)\r\n               ? styles.captionRootDouble\r\n               : styles.captionRoot\r\n        , _captionEV = (isModeEdit) ? 'V' : 'E'\r\n        , _titleEV = (isModeEdit)\r\n              ? \"Toggle to View Mode\"\r\n              : \"Toggle to Edit Mode\";\r\n\r\n    return (\r\n       <Browser\r\n          isShow={isShow}\r\n          style={styles.browser}\r\n        >\r\n         <CaptionRow\r\n            styleRoot={_styleCaption}\r\n            caption={caption}\r\n            onClose={this._handlerHide}\r\n         >\r\n           <ButtonCircle\r\n             caption={'S'}\r\n             title=\"Save Watch Items to Locale Storage\"\r\n             style={styles.btCircle}\r\n             onClick={this._handlerSaveWatch}\r\n           />\r\n           <ButtonCircle\r\n              caption={_captionEV}\r\n              title={_titleEV}\r\n              style={styles.btCircle}\r\n              onClick={this._handlerToggleEditMode}\r\n           />\r\n           <ButtonCircle\r\n             caption={'F'}\r\n             title=\"Show/Hide : Find Item Input\"\r\n             style={styles.btCircle}\r\n             onClick={this._handlerToggleFindInput}\r\n           />\r\n           { !isDoubleWatch &&\r\n             <ButtonCircle\r\n                caption={'B'}\r\n                title=\"BackUp Watch Items to JSON File\"\r\n                style={styles.btCircle}\r\n                onClick={WatchActions.backupToJson}\r\n              />\r\n           }\r\n           { !isDoubleWatch &&\r\n             <ButtonCircle\r\n                caption={'L'}\r\n                title=\"Load Watch Items from JSON File\"\r\n                style={styles.btCircleRight}\r\n                onClick={ComponentActions.showModalDialog.bind(null, ModalDialog.LOAD_FILE, {\r\n                   onLoad : WatchActions.loadFromJson\r\n                })}\r\n              />\r\n           }\r\n         </CaptionRow>\r\n         {this._renderEditBar(isModeEdit)}\r\n         { watchList && this._renderFindInput(watchList)}\r\n         <ScrollPane className={scrollClass}>\r\n           {watchList && this._renderWatchList(watchList)}\r\n         </ScrollPane>\r\n      </Browser>\r\n    )\r\n  }\r\n});\r\n\r\nexport default WatchBrowser\r\n"]}