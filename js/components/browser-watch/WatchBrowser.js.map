{"version":3,"sources":["../../../src/components/browser-watch/WatchBrowser.jsx"],"names":["Browser","Comp","CaptionRow","ButtonCircle","ButtonSave","ShowHide","ScrollPane","OpenClose2","C_GROUP_OPEN","C_LIST_OPEN","DRAG","GROUP","C_GROUP_ENTER","LIST","C_LIST_ENTER","ITEM","CL","BROWSER_WATCH","BROWSER_WATCH__30","BROWSER_WATCH__60","BT_BAR","BT_CAPTION","styles","browser","paddingRight","maxWidth","captionRoot","minWidth","captionRootDouble","editBarDiv","marginBottom","btCircle","marginLeft","btCircleRight","marginRight","btEditBarList","wrapperSearch","paddingBottom","width","scrollDiv","overflowY","height","groupDiv","lineHeight","listDiv","paddingLeft","borderLeft","itemNotSelected","borderBottom","_calcScrollClass","isShowFind","isModeEdit","WatchBrowser","withWatchDnD","props","_onStore","actionType","data","browserType","showAction","updateAction","_handlerShow","state","isShouldUpdateFind","setState","watchList","scrollClass","_handlerHide","isDoubleWatch","isShow","BrowserActions","toggleWatchDbBrowser","_handlerToggleEditMode","_isModeEdit","_handlerToggleFindInput","_isShowFind","_renderWatchList","groups","map","group","index","caption","lists","_hDragStartGroup","_hDragEnterGroup","_hDragOverGroup","_hDragLeaveGroup","_hDropGroup","_renderLists","groupCaption","list","items","_hDragStartList","_hDragEnterList","_hDragOverList","_hDragLeaveList","_hDropList","_renderItems","listCaption","item","_className","_handlerClickItem","_handlerRemoveItem","_hDragStartItem","_hDragOverItem","_hDragEnterItem","_hDragLeaveItem","_hDropItem","_renderEditBar","_handlerEditGroup","_handlerEditList","_handlerDouble","_renderFindInput","_isShouldUpdate","isEditMode","store","_bindDnDGroup","WatchActions","_bindDnDList","_bindDnDItem","getWatchList","componentDidMount","unsubscribe","listen","componentWillUnmount","ComponentActions","showModalDialog","ModalDialog","EDIT_WATCH_GROUP","EDIT_WATCH_LIST","LOAD_WATCH_ITEM","option","event","stopPropagation","removeItem","render","_styleCaption","_captionEV","_titleEV","backupToJson","bind","LOAD_FILE","onLoad","loadFromJson","Component"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport clsx from 'clsx'\r\n\r\nimport withWatchDnD from './decorators/withWatchDnD';\r\n\r\nimport { ModalDialog } from '../../constants/Type';\r\nimport ComponentActions from '../../flux/actions/ComponentActions';\r\nimport BrowserActions from '../../flux/actions/BrowserActions';\r\nimport WatchActions from '../../flux/actions/WatchActions';\r\n\r\nimport Comp from '../Comp'\r\n\r\nimport WrapperInputSearch from './WrapperInputSearch';\r\nimport WatchItem from './WatchItem';\r\n\r\nconst {\r\n  Browser,\r\n  CaptionRow,\r\n  ButtonCircle,\r\n  ButtonSave,\r\n  ShowHide,\r\n  ScrollPane,\r\n  OpenClose2\r\n} = Comp;\r\n\r\nconst C_GROUP_OPEN = '#1b2836';\r\nconst C_LIST_OPEN = '#80c040';\r\nconst DRAG = {\r\n  GROUP: 'GROUP',\r\n  C_GROUP_ENTER: C_GROUP_OPEN,\r\n  LIST: 'LIST',\r\n  C_LIST_ENTER: C_LIST_OPEN,\r\n  ITEM: 'ITEM'\r\n};\r\n\r\nconst CL = {\r\n  BROWSER_WATCH : \"browser-watch\",\r\n  BROWSER_WATCH__30 : \"browser-watch--1r\",\r\n  BROWSER_WATCH__60 : \"browser-watch--2r\",\r\n  BT_BAR: \"bt__watch__bar\",\r\n  BT_CAPTION: \"bt__watch__caption\",\r\n};\r\n\r\n\r\nconst styles = {\r\n  browser : {\r\n    paddingRight: 0,\r\n    maxWidth: 500\r\n  },\r\n  captionRoot : {\r\n     minWidth: 340\r\n  },\r\n  captionRootDouble : {\r\n     minWidth: 310\r\n  },\r\n  editBarDiv : {\r\n    marginBottom: 10\r\n  },\r\n  btCircle : {\r\n    marginLeft: 20\r\n  },\r\n  btCircleRight : {\r\n    marginLeft: 20,\r\n    marginRight: 20\r\n  },\r\n  btEditBarList : {\r\n    marginLeft: 20\r\n  },\r\n  wrapperSearch : {\r\n     paddingBottom: 8,\r\n     width: '100%',\r\n     paddingRight: 24\r\n  },\r\n  scrollDiv : {\r\n    overflowY: 'auto',\r\n    height: '92%',\r\n    paddingRight: 10\r\n  },\r\n  groupDiv : {\r\n    lineHeight : 2\r\n  },\r\n  listDiv : {\r\n    marginLeft : 8,\r\n    paddingLeft : 12,\r\n    borderLeft : '1px solid yellow',\r\n    lineHeight : 2\r\n  },\r\n  itemNotSelected : {\r\n    borderBottom : '1px solid rgba(128, 192, 64, 0.6)',\r\n    marginRight : 10\r\n  }\r\n};\r\n\r\nconst _calcScrollClass = (isShowFind, isModeEdit) => clsx({\r\n  [CL.BROWSER_WATCH] : !(isShowFind && isModeEdit),\r\n  [CL.BROWSER_WATCH__30] : (isShowFind && !isModeEdit) || (!isShowFind && isModeEdit),\r\n  [CL.BROWSER_WATCH__60] : (isShowFind && isModeEdit)\r\n});\r\n\r\n@withWatchDnD\r\nclass WatchBrowser extends Component {\r\n\r\n  constructor(props){\r\n    super(props)\r\n    const { isShow=false, isEditMode=false, store } = props;\r\n\r\n    this._bindDnDGroup(DRAG, WatchActions)\r\n    this._bindDnDList(DRAG, WatchActions)\r\n    this._bindDnDItem(DRAG, WatchActions)\r\n\r\n    this.isShouldUpdateFind = false;\r\n\r\n    this.state = {\r\n      isShow : isShow,\r\n      isModeEdit : isEditMode,\r\n      isShowFind : false,\r\n      scrollClass : _calcScrollClass(false, isEditMode),\r\n      watchList : store.getWatchList()\r\n    }\r\n  }\r\n\r\n  componentDidMount(){\r\n    this.unsubscribe = this.props.store.listen(this._onStore);\r\n  }\r\n  componentWillUnmount(){\r\n    this.unsubscribe();\r\n  }\r\n  _onStore = (actionType, data) => {\r\n     const { browserType, showAction, updateAction } = this.props;\r\n     if (actionType === showAction && data === browserType ){\r\n       this._handlerShow();\r\n     } else if (actionType === updateAction) {\r\n       const { isModeEdit } = this.state\r\n       this.isShouldUpdateFind = true;\r\n       this.setState({\r\n         watchList: data,\r\n         isShowFind : false,\r\n         scrollClass : _calcScrollClass(false, isModeEdit)\r\n      })\r\n    }\r\n  }\r\n\r\n  _handlerHide = () => {\r\n     if (!this.props.isDoubleWatch){\r\n       this.setState({ isShow : false });\r\n     } else {\r\n       BrowserActions.toggleWatchDbBrowser();\r\n     }\r\n  }\r\n  _handlerShow = () => {\r\n    if (!this.props.isDoubleWatch){\r\n     this.setState({ isShow : true });\r\n    }\r\n  }\r\n\r\n  _handlerToggleEditMode = () => {\r\n    const { isShowFind, isModeEdit } = this.state\r\n         , _isModeEdit = !isModeEdit\r\n    this.setState({\r\n      isModeEdit : _isModeEdit,\r\n      scrollClass : _calcScrollClass(isShowFind, _isModeEdit)\r\n    });\r\n  }\r\n\r\n  _handlerToggleFindInput = () => {\r\n    const { isShowFind, isModeEdit } = this.state\r\n         , _isShowFind = !isShowFind\r\n    this.setState({\r\n      isShowFind : _isShowFind,\r\n      scrollClass : _calcScrollClass(_isShowFind, isModeEdit)\r\n    })\r\n  }\r\n\r\n  _handlerEditGroup(){\r\n    ComponentActions.showModalDialog(ModalDialog.EDIT_WATCH_GROUP);\r\n  }\r\n  _handlerEditList(){\r\n    ComponentActions.showModalDialog(ModalDialog.EDIT_WATCH_LIST);\r\n  }\r\n  _handlerDouble(){\r\n    BrowserActions.toggleWatchDbBrowser();\r\n  }\r\n\r\n  _renderWatchList = (watchList) => {\r\n     const { isModeEdit } = this.state;\r\n     return watchList.groups.map((group, index) => {\r\n       const {caption, lists} = group;\r\n       return (\r\n               <OpenClose2\r\n                  key={caption}\r\n                  style={styles.groupDiv}\r\n                  caption={caption}\r\n                  isClose={true}\r\n                  isDraggable={isModeEdit}\r\n                  option={{ caption }}\r\n                  onDragStart={this._hDragStartGroup}\r\n                  onDragEnter={this._hDragEnterGroup}\r\n                  onDragOver={this._hDragOverGroup}\r\n                  onDragLeave={this._hDragLeaveGroup}\r\n                  onDrop={this._hDropGroup}\r\n                >\r\n                  {lists && this._renderLists(lists, caption)}\r\n                </OpenClose2>\r\n              )\r\n     })\r\n  }\r\n\r\n  _renderLists = (lists, groupCaption) => {\r\n    const { isModeEdit } = this.state;\r\n    return lists.map((list) => {\r\n      const { caption, items } = list;\r\n      return (\r\n        <OpenClose2\r\n           key={caption}\r\n           fillOpen=\"#80c040\"\r\n           style={styles.listDiv}\r\n           styleNotSelected={styles.itemNotSelected}\r\n           caption={caption}\r\n           isClose={true}\r\n           isDraggable={isModeEdit}\r\n           option={{ groupCaption, caption }}\r\n           onDragStart={this._hDragStartList}\r\n           onDragEnter={this._hDragEnterList}\r\n           onDragOver={this._hDragOverList}\r\n           onDragLeave={this._hDragLeaveList}\r\n           onDrop={this._hDropList}\r\n        >\r\n          {items && this._renderItems(items, groupCaption, caption)}\r\n        </OpenClose2>\r\n      )\r\n    })\r\n  }\r\n\r\n  _handlerClickItem(item){\r\n    ComponentActions.showModalDialog(ModalDialog.LOAD_WATCH_ITEM, item);\r\n  }\r\n  _handlerRemoveItem(option, event){\r\n    event.stopPropagation();\r\n    WatchActions.removeItem(option);\r\n  }\r\n\r\n  _renderItems = (items, groupCaption, listCaption) => {\r\n      const {isModeEdit} = this.state;\r\n      return items.map((item, index) => {\r\n        const { caption } = item\r\n            , _className = (index % 2)\r\n                 ? 'row__topic__even not-selected'\r\n                 : 'row__topic__odd not-selected'\r\n        return (\r\n           <WatchItem\r\n              key={caption}\r\n              className={_className}\r\n              isModeEdit={isModeEdit}\r\n              item={item}\r\n              option={{ groupCaption, listCaption, caption }}\r\n              onClick={this._handlerClickItem}\r\n              onClose={this._handlerRemoveItem}\r\n              onDragStart={this._hDragStartItem}\r\n              onDragOver={this._hDragOverItem}\r\n              onDragEnter={this._hDragEnterItem}\r\n              onDragLeave={this._hDragLeaveItem}\r\n              onDrop={this._hDropItem}\r\n           />\r\n        );\r\n      })\r\n  }\r\n\r\n  _renderEditBar = (isModeEdit) => {\r\n    if (isModeEdit){\r\n      return (\r\n        <div style={styles.editBarDiv}>\r\n           <ButtonCircle\r\n             caption=\"GROUP\"\r\n             title=\"Edit Group\"\r\n             className={CL.BT_BAR}\r\n             isWithoutDefault={true}\r\n             onClick={this._handlerEditGroup}\r\n          />\r\n          <ButtonCircle\r\n             caption=\"LIST\"\r\n             title=\"Edit Group List\"\r\n             className={CL.BT_BAR}\r\n             isWithoutDefault={true}\r\n             style={styles.btEditBarList}\r\n             onClick={this._handlerEditList}\r\n          />\r\n          <ButtonCircle\r\n             caption=\"DB\"\r\n             title=\"Double Watch Browser\"\r\n             className={CL.BT_BAR}\r\n             isWithoutDefault={true}\r\n             style={styles.btEditBarList}\r\n             onClick={this._handlerDouble}\r\n          />\r\n        </div>\r\n      )\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  _renderFindInput = (watchList) => {\r\n    const { isShowFind } = this.state\r\n    const _isShouldUpdate = (isShowFind && this.isShouldUpdateFind)\r\n             ? (()=>{ this.isShouldUpdateFind = false; return true; })\r\n             : false;\r\n\r\n    return (\r\n      <ShowHide isShow={isShowFind}>\r\n        <WrapperInputSearch\r\n            style={styles.wrapperSearch}\r\n            data={watchList}\r\n            isShouldUpdate={_isShouldUpdate}\r\n            onSelect={this._handlerClickItem}\r\n        />\r\n      </ShowHide>\r\n    );\r\n  }\r\n\r\n  render(){\r\n    const { caption, isDoubleWatch, store } = this.props\r\n        , {\r\n            isShow, isModeEdit,\r\n            scrollClass, watchList\r\n          } = this.state\r\n        , _styleCaption = (isDoubleWatch)\r\n               ? styles.captionRootDouble\r\n               : styles.captionRoot\r\n        , _captionEV = (isModeEdit) ? 'V' : 'E'\r\n        , _titleEV = (isModeEdit)\r\n              ? \"Toggle to View Mode\"\r\n              : \"Toggle to Edit Mode\";\r\n\r\n    return (\r\n       <Browser\r\n          isShow={isShow}\r\n          style={styles.browser}\r\n        >\r\n         <CaptionRow\r\n            styleRoot={_styleCaption}\r\n            caption={caption}\r\n            onClose={this._handlerHide}\r\n         >\r\n           <ButtonSave\r\n             className={CL.BT_CAPTION}\r\n             store={store}\r\n           />\r\n           <ButtonCircle\r\n              className={CL.BT_CAPTION}\r\n              caption={_captionEV}\r\n              title={_titleEV}\r\n              isWithoutDefault={true}\r\n              onClick={this._handlerToggleEditMode}\r\n           />\r\n           <ButtonCircle\r\n             className={CL.BT_CAPTION}\r\n             caption=\"F\"\r\n             title=\"Show/Hide : Find Item Input\"\r\n             isWithoutDefault={true}\r\n             onClick={this._handlerToggleFindInput}\r\n           />\r\n           { !isDoubleWatch &&\r\n             <ButtonCircle\r\n                className={CL.BT_CAPTION}\r\n                caption=\"B\"\r\n                title=\"BackUp Watch Items to JSON File\"\r\n                isWithoutDefault={true}\r\n                onClick={WatchActions.backupToJson}\r\n              />\r\n           }\r\n           { !isDoubleWatch &&\r\n             <ButtonCircle\r\n                className={CL.BT_CAPTION}\r\n                caption=\"L\"\r\n                title=\"Load Watch Items from JSON File\"\r\n                isWithoutDefault={true}\r\n                onClick={ComponentActions.showModalDialog.bind(null, ModalDialog.LOAD_FILE, {\r\n                   onLoad : WatchActions.loadFromJson\r\n                })}\r\n              />\r\n           }\r\n         </CaptionRow>\r\n         {this._renderEditBar(isModeEdit)}\r\n         {watchList && this._renderFindInput(watchList)}\r\n         <ScrollPane className={scrollClass}>\r\n           {watchList && this._renderWatchList(watchList)}\r\n         </ScrollPane>\r\n      </Browser>\r\n    )\r\n  }\r\n}\r\n\r\nexport default WatchBrowser\r\n"],"file":"WatchBrowser.js"}