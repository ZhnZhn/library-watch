{"version":3,"file":"WatchBrowser.js","names":["_uiApi","require","_useToggle","_interopRequireDefault","_useBrowser","_useRecentFocusedElement","_Browser","_CaptionRow","_ButtonCircle","_ScrollPane","_ButtonSave","_EditBar","_SearchInput","_WatchGroups","_Handlers","_jsxRuntime","CL_BROWSER_WATCH","_crBrowserWatchStyle","suffix","CL_BROWSER_WATCH__30","CL_BROWSER_WATCH__60","CL_BT_CAPTION","S_BROWSER","maxWidth","S_CAPTION_ROOT","minWidth","S_CAPTION_ROOT_DOUBLE","_crScrollClass","isSearchInput","isModeEdit","WatchBrowser","_ref","isShow","isEditMode","isDoubleWatch","caption","browserType","useMsBrowser","useMsBrowserDynamic","useWatchList","_refIsShouldUpdateFind","useRef","_toggleEditMode","useToggle","_toggleSearchInput","_setIsSearchInput","watchList","setWatchList","isShowComp","showComp","hideComp","_hKeyDown","_refFirstItem","useBrowser","getWatchList","_hFocusIn","_focusPrevMenuElement","useRecentFocusedElement","_handlerHide","_handlerShow","useMemo","toggleWatchDbBrowser","msBrowser","id","focusRefElement","setRefValue","groups","_styleCaption","_captionEV","_titleEV","_isShouldUpdateSearchInput","getRefValue","_scrollClass","jsxs","default","style","onKeyDown","children","onClose","jsx","className","isWithoutDefault","title","onClick","Fragment","backupWatchItemsToJson","showDialogLoadItemsFromFile","is","isShouldUpdate","data","onFocusIn","refFirstItem","_default","exports"],"sources":["../../../src/components/browser-watch/WatchBrowser.jsx"],"sourcesContent":["import {\r\n  useRef,\r\n  useMemo,\r\n  getRefValue,\r\n  setRefValue,\r\n  focusRefElement\r\n} from '../uiApi';\r\n\r\nimport useToggle from '../hooks/useToggle';\r\nimport useBrowser from '../hooks/useBrowser';\r\nimport useRecentFocusedElement from '../hooks/useRecentFocusedElement';\r\n\r\nimport Browser from '../zhn/Browser';\r\nimport CaptionRow from '../zhn/CaptionRow';\r\nimport ButtonCircle from '../zhn/ButtonCircle';\r\nimport ScrollPane from '../zhn/ScrollPane';\r\nimport ButtonSave from '../zhn-moleculs/ButtonSave';\r\n\r\nimport EditBar from './EditBar';\r\nimport SearchInput from './SearchInput';\r\nimport WatchGroups from './WatchGroups';\r\n\r\nimport {\r\n  getWatchList,\r\n  showDialogLoadItemsFromFile,\r\n  toggleWatchDbBrowser,\r\n  backupWatchItemsToJson\r\n} from './Handlers';\r\n\r\nconst CL_BROWSER_WATCH = \"browser-watch\"\r\n, _crBrowserWatchStyle = (suffix) => `${CL_BROWSER_WATCH} ${CL_BROWSER_WATCH}--${suffix}`\r\n, CL_BROWSER_WATCH__30 = _crBrowserWatchStyle(\"1r\")\r\n, CL_BROWSER_WATCH__60 = _crBrowserWatchStyle(\"2r\")\r\n, CL_BT_CAPTION = \"bt__watch__caption\"\r\n, S_BROWSER = { maxWidth: 500 }\r\n, S_CAPTION_ROOT = { minWidth: 340 }\r\n, S_CAPTION_ROOT_DOUBLE = { minWidth: 310 };\r\n\r\nconst _crScrollClass = (\r\n  isSearchInput,\r\n  isModeEdit\r\n) => isSearchInput && isModeEdit\r\n  ? CL_BROWSER_WATCH__60\r\n  : isSearchInput || isModeEdit\r\n      ? CL_BROWSER_WATCH__30\r\n      : CL_BROWSER_WATCH;\r\n\r\nconst WatchBrowser = ({\r\n  isShow,\r\n  isEditMode,\r\n  isDoubleWatch,\r\n  caption,\r\n  browserType,\r\n  useMsBrowser,\r\n  useMsBrowserDynamic,\r\n  useWatchList\r\n}) => {\r\n  const _refIsShouldUpdateFind = useRef(false)\r\n  , [\r\n     isModeEdit,\r\n     _toggleEditMode\r\n  ] = useToggle(isEditMode)\r\n  , [\r\n     isSearchInput,\r\n     _toggleSearchInput,\r\n     _setIsSearchInput\r\n  ] = useToggle()\r\n  , [\r\n     watchList,\r\n     setWatchList,\r\n     isShowComp,\r\n     showComp,\r\n     hideComp,\r\n     _hKeyDown,\r\n     _refFirstItem\r\n   ] = useBrowser(isShow, getWatchList)\r\n   , [\r\n     _hFocusIn,\r\n     _focusPrevMenuElement\r\n   ] = useRecentFocusedElement()\r\n  /*eslint-disable react-hooks/exhaustive-deps */\r\n  , [\r\n     _handlerHide,\r\n     _handlerShow\r\n  ] = useMemo(() => [\r\n    () => {\r\n      if (isDoubleWatch) {\r\n        toggleWatchDbBrowser()\r\n      } else {\r\n        hideComp()\r\n      }\r\n    },\r\n    () => {\r\n      if (!isDoubleWatch) {\r\n        showComp()\r\n      }\r\n    }\r\n  ], [isDoubleWatch]);\r\n  // hideComp, showComp\r\n  /*eslint-enable react-hooks/exhaustive-deps */\r\n\r\n  useMsBrowser(msBrowser => {\r\n    if (msBrowser && msBrowser.id === browserType) {\r\n      _handlerShow()\r\n      if (!_focusPrevMenuElement()) {\r\n        focusRefElement(_refFirstItem)\r\n      }\r\n    }\r\n  })\r\n  useWatchList(watchList => {\r\n    if (watchList) {\r\n      setRefValue(_refIsShouldUpdateFind, true)\r\n      setWatchList(watchList)\r\n      _setIsSearchInput(false)\r\n    }\r\n  })\r\n\r\n  const { groups } = watchList || {}\r\n  , _styleCaption = isDoubleWatch\r\n     ? S_CAPTION_ROOT_DOUBLE\r\n     : S_CAPTION_ROOT\r\n  , [_captionEV, _titleEV] = isModeEdit\r\n     ? ['V', 'Toggle to View Mode']\r\n     : ['E', 'Toggle to Edit Mode']\r\n , _isShouldUpdateSearchInput = (isSearchInput && getRefValue(_refIsShouldUpdateFind))\r\n     ? (()=>{ setRefValue(_refIsShouldUpdateFind, false); return true; })\r\n     : false\r\n , _scrollClass = _crScrollClass(isSearchInput, isModeEdit);\r\n\r\n  return (\r\n    <Browser\r\n       isShow={isShowComp}\r\n       style={S_BROWSER}\r\n       onKeyDown={_hKeyDown}\r\n     >\r\n      <CaptionRow\r\n         style={_styleCaption}\r\n         caption={caption}\r\n         onClose={_handlerHide}\r\n      >\r\n        <ButtonSave\r\n          className={CL_BT_CAPTION}\r\n        />\r\n        <ButtonCircle\r\n           isWithoutDefault={true}\r\n           className={CL_BT_CAPTION}\r\n           caption={_captionEV}\r\n           title={_titleEV}\r\n           onClick={_toggleEditMode}\r\n        />\r\n        <ButtonCircle\r\n          isWithoutDefault={true}\r\n          className={CL_BT_CAPTION}\r\n          caption=\"F\"\r\n          title=\"Show/Hide : Find Item Input\"\r\n          onClick={_toggleSearchInput}\r\n        />\r\n        { !isDoubleWatch && <>\r\n            <ButtonCircle\r\n               isWithoutDefault={true}\r\n               className={CL_BT_CAPTION}\r\n               caption=\"B\"\r\n               title=\"BackUp Watch Items to JSON File\"\r\n               onClick={backupWatchItemsToJson}\r\n             />\r\n             <ButtonCircle\r\n                isWithoutDefault={true}\r\n                className={CL_BT_CAPTION}\r\n                caption=\"L\"\r\n                title=\"Load Watch Items from JSON File\"\r\n                onClick={showDialogLoadItemsFromFile}\r\n             />\r\n           </>\r\n        }\r\n      </CaptionRow>\r\n      <EditBar is={isModeEdit} />\r\n      <SearchInput\r\n         isShow={isSearchInput}\r\n         isShouldUpdate={_isShouldUpdateSearchInput}\r\n         data={watchList}\r\n      />\r\n      <ScrollPane\r\n         className={_scrollClass}\r\n         onFocusIn={_hFocusIn}\r\n      >\r\n        <WatchGroups\r\n           refFirstItem={_refFirstItem}\r\n           isModeEdit={isModeEdit}\r\n           groups={groups}\r\n        />\r\n      </ScrollPane>\r\n   </Browser>\r\n  );\r\n};\r\n\r\nexport default WatchBrowser\r\n"],"mappings":"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","ignoreList":[]}