{"version":3,"sources":["../../../src/components/zhnContainers/DialogContainer3.jsx"],"names":["styles","rootDiv","zIndex","position","top","left","width","getObjToFirst","arr","keyValue","index","i","max","length","key","slice","DialogContainer3","createClass","getInitialState","_activeDialogs","dialog","compDialogs","componentWillMount","unsubscribe","props","store","listen","_onStore","componentWillUnmount","_checkActiveDialogs","dialogType","push","maxDialog","state","filterActiveDialogs","filter","value","actionType","data","initAction","showAction","setState","dialogComp","_handlerToggleDialog","document","getElementsByTagName","style","cursor","_renderDialogs","map","compDialog","cloneElement","isShow","onClose","bind","render"],"mappings":";;;;;;AAAA;;;;;;;;AAEA,IAAMA,SAAS;AACbC,WAAS;AACPC,YAAS,EADF;AAEPC,cAAU,UAFH;AAGPC,SAAK,MAHE;AAIPC,UAAM,MAJC;AAKPC,WAAO;AALA;AADI,CAAf;;AAUA,IAAMC,gBAAgB,SAAhBA,aAAgB,CAASC,GAAT,EAAcC,QAAd,EAAuB;AAC3C,MAAIC,cAAJ;AACA,OAAK,IAAIC,IAAE,CAAN,EAASC,MAAIJ,IAAIK,MAAtB,EAA8BF,IAAEC,GAAhC,EAAqCD,GAArC,EAAyC;AACvC,QAAIH,IAAIG,CAAJ,EAAOG,GAAP,KAAeL,QAAnB,EAA4B;AAC1BC,cAAQC,CAAR;AACA;AACD;AACF;AACD,sCAAWH,IAAIO,KAAJ,CAAU,CAAV,EAAaL,KAAb,CAAX,sBAAmCF,IAAIO,KAAJ,CAAUL,QAAM,CAAhB,CAAnC,IAAuDF,IAAIE,KAAJ,CAAvD;AACD,CATD;;AAYA,IAAMM,mBAAmB,gBAAMC,WAAN,CAAkB;AAAA;;AACzCC,mBAAiB,2BAAU;AACzB,SAAKC,cAAL,GAAsB,EAAtB;AACA,WAAO;AACLC,cAAQ,EADH;AAELC,mBAAc;AAFT,KAAP;AAID,GAPwC;;AASxCC,sBAAoB,8BAAU;AAC5B,SAAKC,WAAL,GAAmB,KAAKC,KAAL,CAAWC,KAAX,CAAiBC,MAAjB,CAAwB,KAAKC,QAA7B,CAAnB;AACD,GAXuC;;AAaxCC,wBAAsB,gCAAU;AAC9B,SAAKL,WAAL;AACD,GAfuC;;AAiBxCM,qBAjBwC,+BAiBpBC,UAjBoB,EAiBT;AAC7B,SAAKX,cAAL,CAAoBY,IAApB,CAAyBD,UAAzB;AACA,QAAI,KAAKX,cAAL,CAAoBN,MAApB,GAA6B,KAAKW,KAAL,CAAWQ,SAA5C,EAAsD;AACpD,WAAKC,KAAL,CAAWb,MAAX,CAAkB,KAAKD,cAAL,CAAoB,CAApB,CAAlB,IAA4C,KAA5C;AACA,WAAKA,cAAL,GAAsB,KAAKA,cAAL,CAAoBJ,KAApB,CAA0B,CAA1B,CAAtB;AACD;AACF,GAvBuC;AAwBxCmB,qBAxBwC,+BAwBpBJ,UAxBoB,EAwBT;AAC7B,SAAKX,cAAL,GAAsB,KAAKA,cAAL,CAAoBgB,MAApB,CAA2B,UAACC,KAAD,EAAW;AACxD,aAAOA,UAAUN,UAAjB;AACH,KAFqB,CAAtB;AAGD,GA5BuC;;;AA8BxCH,YAAU,kBAASU,UAAT,EAAqBC,IAArB,EAA0B;AAAA,iBACA,KAAKd,KADL;AAAA,QAC1Be,UAD0B,UAC1BA,UAD0B;AAAA,QACdC,UADc,UACdA,UADc;;AAEjC,QAAIH,eAAeG,UAAnB,EAA8B;;AAE3B,UAAI,CAAC,KAAKP,KAAL,CAAWb,MAAX,CAAkBkB,IAAlB,CAAL,EAA6B;AAC1B,aAAKL,KAAL,CAAWb,MAAX,CAAkBkB,IAAlB,IAA0B,IAA1B;AACA,aAAKT,mBAAL,CAAyBS,IAAzB;AACF;AACD,WAAKL,KAAL,CAAWZ,WAAX,GAAyBd,cAAc,KAAK0B,KAAL,CAAWZ,WAAzB,EAAsCiB,IAAtC,CAAzB;AACA,WAAKG,QAAL,CAAc,KAAKR,KAAnB;AAEF,KATD,MASO,IAAII,eAAeE,UAAnB,EAA+B;;AAEnC,WAAKN,KAAL,CAAWb,MAAX,CAAkBkB,KAAKR,UAAvB,IAAqC,IAArC;AACA,WAAKG,KAAL,CAAWZ,WAAX,CAAuBU,IAAvB,CAA4BO,KAAKI,UAAjC;AACA,WAAKb,mBAAL,CAAyBS,KAAKR,UAA9B;AACA,WAAKW,QAAL,CAAc,KAAKR,KAAnB;AAEF;AACH,GAjDuC;;AAmDzCU,wBAAsB,8BAASb,UAAT,EAAoB;AAAA,QACjCV,MADiC,GACvB,KAAKa,KADkB,CACjCb,MADiC;;AAExCA,WAAOU,UAAP,IAAqB,CAACV,OAAOU,UAAP,CAAtB;AACA,SAAKW,QAAL,CAAc,KAAKR,KAAnB;;AAEA,QAAI,CAACb,OAAOU,UAAP,CAAL,EAAyB;AACvB,WAAKI,mBAAL,CAAyBJ,UAAzB;AACAc,eAASC,oBAAT,CAA8B,MAA9B,EAAsC,CAAtC,EAAyCC,KAAzC,CAA+CC,MAA/C,GAAwD,EAAxD;AACD;AACF,GA5DwC;;AA8DzCC,gBA9DyC,4BA8DzB;AAAA;;AAAA,iBACgB,KAAKf,KADrB;AAAA,QACPb,MADO,UACPA,MADO;AAAA,QACCC,WADD,UACCA,WADD;;AAEd,WAAOA,YAAY4B,GAAZ,CAAgB,UAACC,UAAD,EAAaxC,KAAb,EAAuB;AAC3C,aAAO,gBAAMyC,YAAN,CAAmBD,UAAnB,EACJ;AACGpC,aAAMoC,WAAWpC,GADpB;AAEGsC,gBAAUhC,OAAO8B,WAAWpC,GAAlB,CAFb;AAGGuC,iBAAU,MAAKV,oBAAL,CAA0BW,IAA1B,QAAqCJ,WAAWpC,GAAhD;AAHb,OADI,CAAP;AAMF,KAPM,CAAP;AAQD,GAxEwC;AA0EzCyC,QA1EyC,oBA0EjC;AACN,WACE;AAAA;AAAA,QAAK,OAAOvD,OAAOC,OAAnB;AACG,WAAK+C,cAAL;AADH,KADF;AAKD;AAhFwC,CAAlB,CAAzB;;kBAoFehC,gB","file":"DialogContainer3.js","sourcesContent":["import React from 'react';\r\n\r\nconst styles = {\r\n  rootDiv: {\r\n    zIndex : 30,\r\n    position: 'absolute',\r\n    top: '70px',\r\n    left: '10px',\r\n    width: '99%'\r\n  }\r\n};\r\n\r\nconst getObjToFirst = function(arr, keyValue){\r\n  let index;\r\n  for (var i=0, max=arr.length; i<max; i++){\r\n    if (arr[i].key === keyValue){\r\n      index = i;\r\n      break;\r\n    }\r\n  }\r\n  return [...arr.slice(0, index), ...arr.slice(index+1), arr[index]]\r\n}\r\n\r\n\r\nconst DialogContainer3 = React.createClass({\r\n  getInitialState: function(){\r\n    this._activeDialogs = [];\r\n    return {\r\n      dialog: {},\r\n      compDialogs : []\r\n    }\r\n  },\r\n\r\n   componentWillMount: function(){\r\n     this.unsubscribe = this.props.store.listen(this._onStore);\r\n   },\r\n\r\n   componentWillUnmount: function(){\r\n     this.unsubscribe();\r\n   },\r\n\r\n   _checkActiveDialogs(dialogType){\r\n     this._activeDialogs.push(dialogType);\r\n     if (this._activeDialogs.length > this.props.maxDialog){\r\n       this.state.dialog[this._activeDialogs[0]] = false;\r\n       this._activeDialogs = this._activeDialogs.slice(1);\r\n     }\r\n   },\r\n   filterActiveDialogs(dialogType){\r\n     this._activeDialogs = this._activeDialogs.filter((value) => {\r\n         return value !== dialogType;\r\n     })\r\n   },\r\n\r\n   _onStore: function(actionType, data){\r\n      const {initAction, showAction} = this.props;\r\n      if (actionType === showAction){\r\n\r\n         if (!this.state.dialog[data]){\r\n            this.state.dialog[data] = true;\r\n            this._checkActiveDialogs(data);\r\n         }\r\n         this.state.compDialogs = getObjToFirst(this.state.compDialogs, data);\r\n         this.setState(this.state);\r\n\r\n      } else if (actionType === initAction) {\r\n\r\n         this.state.dialog[data.dialogType] = true;\r\n         this.state.compDialogs.push(data.dialogComp);\r\n         this._checkActiveDialogs(data.dialogType);\r\n         this.setState(this.state);\r\n\r\n      }\r\n   },\r\n\r\n  _handlerToggleDialog: function(dialogType){\r\n    const {dialog} = this.state;\r\n    dialog[dialogType] = !dialog[dialogType];\r\n    this.setState(this.state);\r\n\r\n    if (!dialog[dialogType]) {\r\n      this.filterActiveDialogs(dialogType);\r\n      document.getElementsByTagName('html')[0].style.cursor = '';\r\n    }\r\n  },\r\n\r\n  _renderDialogs(){\r\n    const {dialog, compDialogs} = this.state;\r\n    return compDialogs.map((compDialog, index) => {\r\n       return React.cloneElement(compDialog,\r\n          {\r\n             key : compDialog.key,\r\n             isShow  : dialog[compDialog.key],\r\n             onClose : this._handlerToggleDialog.bind(this, compDialog.key)\r\n          });\r\n    })\r\n  },\r\n\r\n  render(){\r\n    return (\r\n      <div style={styles.rootDiv}>\r\n        {this._renderDialogs()}\r\n      </div>\r\n    );\r\n  }\r\n\r\n});\r\n\r\nexport default DialogContainer3;\r\n"]}