{"version":3,"sources":["../../../src/components/charts/ChartComponent.jsx"],"names":["defaults","global","defaultFontColor","defaultFontSize","defaultFontStyle","tooltips","titleFontColor","titleFontSize","bodyFontColor","bodyFontSize","ChartComponent","createClass","displayName","propTypes","data","object","isRequired","height","number","legend","onElementsClick","func","options","redraw","bool","type","oneOf","width","getDefaultProps","display","position","componentWillMount","chart_instance","undefined","componentDidMount","renderChart","componentDidUpdate","props","destroy","updateChart","_objectWithoutProperties","obj","keys","target","i","indexOf","Object","prototype","hasOwnProperty","call","shouldComponentUpdate","nextProps","nextState","ignoredProperties","compareNext","compareNow","strict","componentWillUnmount","helpers","configMerge","config","update","node","findDOMNode","handleOnClick","evt","elems","getElementsAtEvent","length","render"],"mappings":"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","file":"ChartComponent.js","sourcesContent":["import React, {PropTypes} from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport Chart from 'chart.js';\r\nimport deepEqual from './deepEqual';\r\n\r\nChart.defaults.global.defaultFontColor = 'black';\r\nChart.defaults.global.defaultFontSize = 14;\r\nChart.defaults.global.defaultFontStyle = 'bold';\r\n\r\n\r\nChart.defaults.global.tooltips.titleFontColor = '#a487d4';\r\nChart.defaults.global.tooltips.titleFontSize =  16;\r\nChart.defaults.global.tooltips.bodyFontColor = '#80c040';\r\nChart.defaults.global.tooltips.bodyFontSize = 16;\r\n\r\nconst ChartComponent = React.createClass({\r\n\r\n\tdisplayName: 'ChartComponent',\r\n\r\n\tpropTypes: {\r\n\t\tdata: PropTypes.object.isRequired,\r\n\t\theight: PropTypes.number,\r\n\t\tlegend: PropTypes.object,\r\n\t\tonElementsClick: PropTypes.func,\r\n\t\toptions: PropTypes.object,\r\n\t\tredraw: PropTypes.bool,\r\n\t\ttype: PropTypes.oneOf(['doughnut', 'pie', 'line', 'bar', 'horizontalBar', 'radar', 'polarArea']),\r\n\t\twidth: PropTypes.number\r\n\t},\r\n\r\n\tgetDefaultProps() {\r\n\t\treturn {\r\n\t\t\tlegend: {\r\n\t\t\t\tdisplay: true,\r\n\t\t\t\tposition: 'bottom'\r\n\t\t\t},\r\n\t\t\ttype: 'doughnut',\r\n\t\t\theight: 150,\r\n\t\t\twidth: 300,\r\n\t\t\tredraw: false\r\n\t\t};\r\n\t},\r\n\r\n\tcomponentWillMount() {\r\n\t\tthis.chart_instance = undefined;\r\n\t},\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.renderChart();\r\n\t},\r\n\r\n\tcomponentDidUpdate() {\r\n\t\tif (this.props.redraw) {\r\n\t\t\tthis.chart_instance.destroy();\r\n\t\t\tthis.renderChart();\r\n\t\t} else {\r\n\t\t\tthis.updateChart();\r\n\t\t}\r\n\t},\r\n\r\n\t_objectWithoutProperties (obj, keys) {\r\n\t\tvar target = {};\r\n\t\tfor (var i in obj) {\r\n\t\t\tif (keys.indexOf(i) >= 0) continue;\r\n\t\t\tif (!Object.prototype.hasOwnProperty.call(obj, i)) continue;\r\n\t\t\ttarget[i] = obj[i];\r\n\t\t}\r\n\t\treturn target;\r\n\t},\r\n\r\n\tshouldComponentUpdate(nextProps, nextState) {\r\n\t\tconst ignoredProperties = ['id', 'width', 'height', 'onElementsClick'];\r\n\t\tconst compareNext = this._objectWithoutProperties(nextProps, ignoredProperties);\r\n\t\tconst compareNow = this._objectWithoutProperties(this.props, ignoredProperties);\r\n\t\treturn !deepEqual(compareNext, compareNow, {strict: true});\r\n\t},\r\n\r\n\tcomponentWillUnmount() {\r\n\t\tthis.chart_instance.destroy();\r\n\t},\r\n\r\n\tupdateChart() {\r\n\t\tconst {data, options} = this.props;\r\n\r\n\t\tif (!this.chart_instance) return;\r\n\r\n\t\tif (options) {\r\n\t\t\tthis.chart_instance.options = Chart.helpers.configMerge(this.chart_instance.options, options);\r\n\t\t}\r\n\r\n\t\tthis.chart_instance.config.data = {\r\n\t\t\t...this.chart_instance.config.data,\r\n\t\t\t...data\r\n\t\t};\r\n\r\n\t\tthis.chart_instance.update();\r\n\t},\r\n\r\n\trenderChart() {\r\n    //legend\r\n\t\tconst {data, options, type} = this.props;\r\n\t\tconst node = ReactDOM.findDOMNode(this);\r\n    \r\n\t\tthis.chart_instance = new Chart(node, {\r\n\t\t\ttype,\r\n\t\t\tdata,\r\n\t\t\toptions\r\n\t\t});\r\n\t},\r\n\r\n\thandleOnClick(evt) {\r\n\t\tconst elems = this.chart_instance.getElementsAtEvent(evt);\r\n\t\tif (elems.length) {\r\n\t\t\tconst {onElementsClick} = this.props;\r\n\t\t\tonElementsClick(elems);\r\n\t\t}\r\n\t},\r\n\r\n\trender() {\r\n\t\tconst { height, width, onElementsClick } = this.props;\r\n\r\n\t\treturn (\r\n\t\t\t<canvas\r\n\t\t\t\t height={height}\r\n\t\t\t\t width={width}\r\n\t\t\t\t onClick={typeof onElementsClick === 'function' ? this.handleOnClick : null}\r\n\t\t\t/>\r\n\t\t);\r\n\t}\r\n});\r\n\r\nexport default ChartComponent;\r\n"]}