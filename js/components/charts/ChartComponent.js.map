{"version":3,"sources":["../../../src/components/charts/ChartComponent.jsx"],"names":["Object","assign","Chart","defaults","global","defaultFontColor","defaultFontSize","defaultFontStyle","tooltips","titleFontColor","titleFontSize","bodyFontColor","bodyFontSize","_objectWithoutProperties","obj","keys","target","i","indexOf","prototype","hasOwnProperty","call","ChartComponent","updateChart","props","data","options","chart_instance","helpers","configMerge","config","update","renderChart","type","rootNode","handleOnClick","evt","elems","getElementsAtEvent","length","onElementsClick","_refRoot","n","undefined","redraw","destroy","nextProps","nextState","ignoredProperties","compareNext","compareNow","strict","height","width","_onClick","Component","deffaultProps","legend","display","position"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;AACA;;;AADA;;;;AAEA;;;;AACA;;;;;;AAEAA,OAAOC,MAAP,CAAcC,gBAAMC,QAAN,CAAeC,MAA7B,EAAqC;AACpCC,mBAAkB,OADkB;AAEnCC,kBAAiB,EAFkB;AAGnCC,mBAAkB;AAHiB,CAArC;;AAMAP,OAAOC,MAAP,CAAcC,gBAAMC,QAAN,CAAeC,MAAf,CAAsBI,QAApC,EAA8C;AAC7CC,iBAAgB,SAD6B;AAE7CC,gBAAe,EAF8B;AAG7CC,gBAAe,SAH8B;AAI7CC,eAAc;AAJ+B,CAA9C;;AAOA,IAAMC,2BAA2B,SAA3BA,wBAA2B,CAACC,GAAD,EAAMC,IAAN,EAAe;AAC/C,KAAMC,SAAS,EAAf;AACA,KAAIC,UAAJ;AACA,MAAKA,CAAL,IAAUH,GAAV,EAAe;AACd,MAAIC,KAAKG,OAAL,CAAaD,CAAb,KAAmB,CAAvB,EAA0B;AAC1B,MAAI,CAACjB,OAAOmB,SAAP,CAAiBC,cAAjB,CAAgCC,IAAhC,CAAqCP,GAArC,EAA0CG,CAA1C,CAAL,EAAmD;AACnDD,SAAOC,CAAP,IAAYH,IAAIG,CAAJ,CAAZ;AACA;AACD,QAAOD,MAAP;AACA,CATD;;IAWMM,c;;;;;;;;;;;;;;kNA2DLC,W,GAAc,YAAM;AAAA,qBACK,MAAKC,KADV;AAAA,OACZC,IADY,eACZA,IADY;AAAA,OACNC,OADM,eACNA,OADM;;;AAGnB,OAAI,CAAC,MAAKC,cAAV,EAA0B;;AAE1B,OAAID,OAAJ,EAAa;AACZ,UAAKC,cAAL,CAAoBD,OAApB,GAA8BxB,gBAAM0B,OAAN,CAAcC,WAAd,CAA0B,MAAKF,cAAL,CAAoBD,OAA9C,EAAuDA,OAAvD,CAA9B;AACA;;AAED,SAAKC,cAAL,CAAoBG,MAApB,CAA2BL,IAA3B,8BACI,MAAKE,cAAL,CAAoBG,MAApB,CAA2BL,IAD/B,EAEIA,IAFJ;;AAKA,SAAKE,cAAL,CAAoBI,MAApB;AACA,G,QAEDC,W,GAAc,YAAM;AAAA,sBACW,MAAKR,KADhB;AAAA,OACZC,IADY,gBACZA,IADY;AAAA,OACNC,OADM,gBACNA,OADM;AAAA,OACGO,IADH,gBACGA,IADH;;AAEnB,SAAKN,cAAL,GAAsB,IAAIzB,eAAJ,CAAU,MAAKgC,QAAf,EAAyB;AAC9CD,cAD8C;AAE9CR,cAF8C;AAG9CC;AAH8C,IAAzB,CAAtB;AAKA,G,QAEDS,a,GAAgB,UAACC,GAAD,EAAS;AACxB,OAAMC,QAAQ,MAAKV,cAAL,CAAoBW,kBAApB,CAAuCF,GAAvC,CAAd;AACA,OAAIC,MAAME,MAAV,EAAkB;AAAA,QACVC,eADU,GACS,MAAKhB,KADd,CACVgB,eADU;;AAEjBA,oBAAgBH,KAAhB;AACA;AACD,G,QAEAI,Q,GAAW;AAAA,UAAK,MAAKP,QAAL,GAAgBQ,CAArB;AAAA,G;;;AA3FZ;;AAEC;;;;;;;;;;;;;;;uCAwBoB;AACpB,QAAKf,cAAL,GAAsBgB,SAAtB;AACA;;;sCAEmB;AACnB,QAAKX,WAAL;AACA;;;uCAEoB;AACpB,OAAI,KAAKR,KAAL,CAAWoB,MAAf,EAAuB;AACtB,SAAKjB,cAAL,CAAoBkB,OAApB;AACA,SAAKb,WAAL;AACA,IAHD,MAGO;AACN,SAAKT,WAAL;AACA;AACD;;;wCAGqBuB,S,EAAWC,S,EAAW;AAC3C,OAAMC,oBAAoB,CAClB,IADkB,EACZ,OADY,EACH,QADG,EACO,iBADP,CAA1B;AAGA,OAAMC,cAAcpC,yBAAyBiC,SAAzB,EAAoCE,iBAApC,CAApB;AACA,OAAME,aAAarC,yBAAyB,KAAKW,KAA9B,EAAqCwB,iBAArC,CAAnB;AACA,UAAO,CAAC,yBAAUC,WAAV,EAAuBC,UAAvB,EAAmC,EAACC,QAAQ,IAAT,EAAnC,CAAR;AACA;;;yCAEsB;AACtB,QAAKxB,cAAL,CAAoBkB,OAApB;AACA;;;2BAsCQ;AAAA,gBACmC,KAAKrB,KADxC;AAAA,OACA4B,MADA,UACAA,MADA;AAAA,OACQC,KADR,UACQA,KADR;AAAA,OACeb,eADf,UACeA,eADf;AAAA,OAEFc,QAFE,GAES,OAAOd,eAAP,KAA2B,UAA3B,GACN,KAAKL,aADC,GAER,IAJD;;AAKR,UACC;AACE,SAAK,KAAKM,QADZ;AAEE,YAAQW,MAFV;AAGE,WAAOC,KAHT;AAIE,aAASC;AAJX,KADD;AAQA;;;EA5G2BC,gB,UAiBrBC,a,GAAgB;AACrBC,SAAQ;AACPC,WAAS,IADF;AAEPC,YAAU;AAFH,EADa;AAKrB1B,OAAM,UALe;AAMrBmB,SAAQ,GANa;AAOrBC,QAAO,GAPc;AAQrBT,SAAQ;AARa,C;kBA8FTtB,c","file":"ChartComponent.js","sourcesContent":["import React, { Component } from 'react';\r\n//import ReactDOM from 'react-dom';\r\nimport Chart from 'chart.js';\r\nimport deepEqual from './deepEqual';\r\n\r\nObject.assign(Chart.defaults.global, {\r\n\tdefaultFontColor: 'black',\r\n  defaultFontSize: 14,\r\n  defaultFontStyle: 'bold'\r\n})\r\n\r\nObject.assign(Chart.defaults.global.tooltips, {\r\n\ttitleFontColor: '#a487d4',\r\n\ttitleFontSize: 16,\r\n\tbodyFontColor: '#80c040',\r\n\tbodyFontSize: 16\r\n})\r\n\r\nconst _objectWithoutProperties = (obj, keys) => {\r\n\tconst target = {};\r\n\tlet i;\r\n\tfor (i in obj) {\r\n\t\tif (keys.indexOf(i) >= 0) continue;\r\n\t\tif (!Object.prototype.hasOwnProperty.call(obj, i)) continue;\r\n\t\ttarget[i] = obj[i];\r\n\t}\r\n\treturn target;\r\n}\r\n\r\nclass ChartComponent extends Component {\r\n\r\n\t//displayName: 'ChartComponent',\r\n\r\n  /*\r\n\tstatic propTypes = {\r\n\t\tdata: PropTypes.object.isRequired,\r\n\t\theight: PropTypes.number,\r\n\t\tlegend: PropTypes.object,\r\n\t\tonElementsClick: PropTypes.func,\r\n\t\toptions: PropTypes.object,\r\n\t\tredraw: PropTypes.bool,\r\n\t\ttype: PropTypes.oneOf(['doughnut', 'pie', 'line', 'bar', 'horizontalBar', 'radar', 'polarArea']),\r\n\t\twidth: PropTypes.number\r\n\t},\r\n\t*/\r\n\r\n\tstatic deffaultProps = {\r\n\t\t\tlegend: {\r\n\t\t\t\tdisplay: true,\r\n\t\t\t\tposition: 'bottom'\r\n\t\t\t},\r\n\t\t\ttype: 'doughnut',\r\n\t\t\theight: 150,\r\n\t\t\twidth: 300,\r\n\t\t\tredraw: false\r\n\t}\r\n\r\n\tcomponentWillMount() {\r\n\t\tthis.chart_instance = undefined;\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.renderChart();\r\n\t}\r\n\r\n\tcomponentDidUpdate() {\r\n\t\tif (this.props.redraw) {\r\n\t\t\tthis.chart_instance.destroy();\r\n\t\t\tthis.renderChart();\r\n\t\t} else {\r\n\t\t\tthis.updateChart();\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tshouldComponentUpdate(nextProps, nextState) {\r\n\t\tconst ignoredProperties = [\r\n\t\t\t       'id', 'width', 'height', 'onElementsClick'\r\n\t\t      ];\r\n\t\tconst compareNext = _objectWithoutProperties(nextProps, ignoredProperties);\r\n\t\tconst compareNow = _objectWithoutProperties(this.props, ignoredProperties);\r\n\t\treturn !deepEqual(compareNext, compareNow, {strict: true});\r\n\t}\r\n\r\n\tcomponentWillUnmount() {\r\n\t\tthis.chart_instance.destroy();\r\n\t}\r\n\r\n\tupdateChart = () => {\r\n\t\tconst {data, options} = this.props;\r\n\r\n\t\tif (!this.chart_instance) return;\r\n\r\n\t\tif (options) {\r\n\t\t\tthis.chart_instance.options = Chart.helpers.configMerge(this.chart_instance.options, options);\r\n\t\t}\r\n\r\n\t\tthis.chart_instance.config.data = {\r\n\t\t\t...this.chart_instance.config.data,\r\n\t\t\t...data\r\n\t\t};\r\n\r\n\t\tthis.chart_instance.update();\r\n\t}\r\n\r\n\trenderChart = () => {\r\n\t\tconst {data, options, type} = this.props;\r\n\t\tthis.chart_instance = new Chart(this.rootNode, {\r\n\t\t\ttype,\r\n\t\t\tdata,\r\n\t\t\toptions\r\n\t\t});\r\n\t}\r\n\r\n\thandleOnClick = (evt) => {\r\n\t\tconst elems = this.chart_instance.getElementsAtEvent(evt);\r\n\t\tif (elems.length) {\r\n\t\t\tconst {onElementsClick} = this.props;\r\n\t\t\tonElementsClick(elems);\r\n\t\t}\r\n\t}\r\n\r\n  _refRoot = n => this.rootNode = n\r\n\r\n\trender() {\r\n\t\tconst { height, width, onElementsClick } = this.props\r\n\t\t    , _onClick = typeof onElementsClick === 'function'\r\n\t\t         ? this.handleOnClick\r\n\t\t\t\t     : null;\r\n\t\treturn (\r\n\t\t\t<canvas\r\n\t\t\t\t ref={this._refRoot}\r\n\t\t\t\t height={height}\r\n\t\t\t\t width={width}\r\n\t\t\t\t onClick={_onClick}\r\n\t\t\t/>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default ChartComponent;\r\n"]}