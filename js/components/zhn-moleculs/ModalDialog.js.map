{"version":3,"file":"ModalDialog.js","names":["_uiApi","require","_useRerender","_interopRequireDefault","_useKeyEscape","_DialogCaption","_FlatButton","_Dialog","_jsxRuntime","S_HIDE_POPUP","opacity","transform","S_MODAL_DIALOG","S_DIALOG_DIV","position","top","left","display","zIndex","ModalDialog","_ref","isShow","isWithButton","timeout","style","caption","commandButtons","onClose","children","_rerenderComp","useRerender","_hKeyDown","useKeyEscape","_refWasClosing","useRef","_hClickDialog","useCallback","event","stopPropagation","useEffect","getRefValue","setTimeout","_className","_style","S_HIDE","setRefValue","CL_SHOW_POPUP","S_SHOW","CL_HIDE_POPUP","jsxs","role","tabIndex","className","onClick","onKeyDown","jsx","default","S_COMMAND_DIV","title","_default","exports"],"sources":["../../../src/components/zhn-moleculs/ModalDialog.jsx"],"sourcesContent":["import {\r\n  useRef,\r\n  useCallback,\r\n  useEffect,\r\n  getRefValue,\r\n  setRefValue\r\n} from '../uiApi';\r\nimport useRerender from '../hooks/useRerender';\r\nimport useKeyEscape from '../hooks/useKeyEscape';\r\n\r\nimport Caption from './DialogCaption'\r\nimport FlatButton from '../zhn-m/FlatButton'\r\n\r\nimport {\r\n  CL_SHOW_POPUP,\r\n  CL_HIDE_POPUP,\r\n  S_SHOW,\r\n  S_HIDE,\r\n  S_DIALOG_DIV,\r\n  S_COMMAND_DIV\r\n} from './Dialog.Style';\r\n\r\nconst S_HIDE_POPUP = {\r\n  opacity: 0,\r\n  transform: 'scaleY(0)'\r\n}\r\n, S_MODAL_DIALOG = {\r\n  ...S_DIALOG_DIV,\r\n  position: 'absolute',\r\n  top: '20%',\r\n  left: '40%',\r\n  display: 'block',\r\n  zIndex: 10\r\n};\r\n\r\nconst ModalDialog = ({\r\n  isShow,\r\n  isWithButton=true,\r\n  timeout=450,\r\n  style,\r\n  caption,\r\n  commandButtons,\r\n  onClose,\r\n  children\r\n}) => {\r\n  const _rerenderComp = useRerender()\r\n  , _hKeyDown = useKeyEscape(onClose)\r\n  , _refWasClosing = useRef()\r\n  , _hClickDialog = useCallback(event => {\r\n    event.stopPropagation()\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (getRefValue(_refWasClosing)){\r\n      setTimeout(_rerenderComp, timeout)\r\n    }\r\n  })\r\n\r\n  let _className, _style;\r\n  if (getRefValue(_refWasClosing)){\r\n    _style = S_HIDE;\r\n    setRefValue(_refWasClosing, false)\r\n  } else {\r\n    [_className, _style] = isShow\r\n      ? [CL_SHOW_POPUP, S_SHOW]\r\n      : [CL_HIDE_POPUP, S_HIDE_POPUP]\r\n    if (!isShow){\r\n      setRefValue(_refWasClosing, true)\r\n    }\r\n  }\r\n\r\n  return (\r\n    /*eslint-disable jsx-a11y/no-noninteractive-element-interactions*/\r\n    <div\r\n       role=\"dialog\"\r\n       tabIndex=\"-1\"\r\n       aria-label={caption}\r\n       aria-hidden={!isShow}\r\n       className={_className}\r\n       style={{\r\n         ...S_MODAL_DIALOG,\r\n         ...style,\r\n         ..._style\r\n       }}\r\n       onClick={_hClickDialog}\r\n       onKeyDown={_hKeyDown}\r\n    >\r\n    {/*eslint-enable jsx-a11y/no-noninteractive-element-interactions*/}\r\n       <Caption\r\n         caption={caption}\r\n         onClose={onClose}\r\n       />\r\n       <div>\r\n        {children}\r\n       </div>\r\n       {isWithButton && <div style={S_COMMAND_DIV}>\r\n           {commandButtons}\r\n           <FlatButton\r\n             key=\"close\"\r\n             caption=\"Close\"\r\n             title=\"Click to close modal dialog\"\r\n             timeout={0}\r\n             onClick={onClose}\r\n           />\r\n         </div>\r\n       }\r\n   </div>\r\n  );\r\n};\r\n\r\nexport default ModalDialog\r\n"],"mappings":"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","ignoreList":[]}