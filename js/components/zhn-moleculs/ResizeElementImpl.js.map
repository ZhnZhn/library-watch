{"version":3,"file":"ResizeElementImpl.js","names":["_uiApi","require","_assign","Object","assign","_setInitialValuesTo","obj","id","delta","step","countStep","ResizeElementImpl","constructor","props","elementRef","onResizeAfter","initWidth","minWidth","maxWidth","currentWidth","minDelta","maxDelta","onStopRezise","bindTo","_hStopResize","onStartResizeLeft","_hStartResize","_resizeLeft","onStartResizeRight","_resizeRight","_increaseStepValue","_getElementStyle","current","style","width","_updateDelta","w","parseInt","isNaN","resizeFn","setInterval","isOnResizeAfter","event","clearInterval","isFn","_default","exports","default"],"sources":["../../../src/components/zhn-moleculs/ResizeElementImpl.js"],"sourcesContent":["import { isFn, bindTo } from '../uiApi';\r\n\r\nconst _assign = Object.assign\r\n, _setInitialValuesTo = obj => {\r\n   _assign(obj, {\r\n     id: null,\r\n     delta: 0,\r\n     step: 1,\r\n     countStep: 0\r\n   })\r\n};\r\n\r\nclass ResizeElementImpl {\r\n  constructor(props){\r\n    _setInitialValuesTo(this)\r\n\r\n    const {\r\n      elementRef,\r\n      onResizeAfter,\r\n      initWidth,\r\n      minWidth,\r\n      maxWidth\r\n    } = props;\r\n    this.elementRef = elementRef\r\n    this.onResizeAfter = onResizeAfter\r\n    this.initWidth = initWidth;\r\n    this.currentWidth = this.initWidth;\r\n    this.minDelta = minWidth - this.initWidth;\r\n    this.maxDelta = maxWidth - this.initWidth;\r\n\r\n    this.onStopRezise = bindTo(this._hStopResize, true);\r\n    this.onStartResizeLeft = bindTo(this._hStartResize, this._resizeLeft)\r\n    this.onStartResizeRight = bindTo(this._hStartResize, this._resizeRight)\r\n  }\r\n\r\n  _increaseStepValue = () => {\r\n    this.countStep +=1;\r\n    if (this.countStep > 30){\r\n      this.step = 3;\r\n    } else if (this.countStep > 15){\r\n      this.step = 2;\r\n    }\r\n    if ( (this.maxDelta - this.delta) < 20 ||\r\n         (this.delta - this.minDelta) < 20    ){\r\n      this.step = 1;\r\n    }\r\n  }\r\n\r\n  _getElementStyle = () => {\r\n    const { current } = this.elementRef || {}\r\n    , { style } = current || {};\r\n    return style || {};\r\n  }\r\n\r\n  _resizeLeft = () => {\r\n    if (this.delta > this.minDelta){\r\n      this.delta -= this.step;\r\n      this.currentWidth = this.initWidth + this.delta;\r\n      this._getElementStyle().width = this.currentWidth + 'px';\r\n      this._increaseStepValue();\r\n    }\r\n  }\r\n\r\n  _resizeRight = () => {\r\n    if (this.delta < this.maxDelta){\r\n      this.delta += this.step;\r\n      this.currentWidth = this.initWidth + this.delta;\r\n      this._getElementStyle().width = this.currentWidth + 'px';\r\n      this._increaseStepValue();\r\n    }\r\n  }\r\n\r\n  _updateDelta = () => {\r\n    const w = parseInt(this._getElementStyle().width, 10);\r\n    if (!isNaN(w)) {\r\n      this.delta = w - this.initWidth\r\n    }\r\n  }\r\n\r\n  _hStartResize = (resizeFn) => {\r\n    if (this.id !== null){\r\n      this._hStopResize(false);\r\n    }\r\n    this._updateDelta()\r\n    this.id = setInterval(resizeFn, 5);\r\n  }\r\n\r\n  _hStopResize = (isOnResizeAfter, event) => {\r\n    clearInterval(this.id);\r\n    _setInitialValuesTo(this)\r\n\r\n    const { onResizeAfter } = this;\r\n    if (isOnResizeAfter && isFn(onResizeAfter)){\r\n      onResizeAfter(this.currentWidth);\r\n    }\r\n  }\r\n}\r\n\r\nexport default ResizeElementImpl\r\n"],"mappings":"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","ignoreList":[]}