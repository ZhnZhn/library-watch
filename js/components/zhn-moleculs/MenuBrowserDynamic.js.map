{"version":3,"file":"MenuBrowserDynamic.js","names":["_uiApi","require","_useBrowser","_interopRequireDefault","_useRecentFocusedElement","_Browser","_CaptionRow","_ScrollPane","_MenuPart","_jsxRuntime","S_SCROLL_DIV","overflowY","height","paddingRight","BrowserMenu","_ref","menuItems","rowClass","refFirstItem","safeMap","menuPart","index","jsx","default","isInitClose","caption","items","MenuBrowserDynamic","_ref2","isShowInitial","browserType","useMsBrowserDynamic","onLoadMenu","children","_refIsLoaded","useRef","setMenuItems","isShow","_hShow","_hHide","_hKeyDown","_refFirstItem","useBrowser","_hFocusElement","_focusPrevElement","useRecentFocusedElement","msBrowserDynamic","setRefValue","useEffect","getRefValue","jsxs","onKeyDown","onClose","style","onFocusIn","_default","exports"],"sources":["../../../src/components/zhn-moleculs/MenuBrowserDynamic.jsx"],"sourcesContent":["import {\r\n  useRef,\r\n  useEffect,\r\n  getRefValue,\r\n  setRefValue,\r\n  safeMap\r\n} from '../uiApi';\r\n\r\nimport useBrowser from '../hooks/useBrowser';\r\nimport useRecentFocusedElement from '../hooks/useRecentFocusedElement';\r\n\r\nimport Browser from '../zhn/Browser';\r\nimport CaptionRow from '../zhn/CaptionRow';\r\nimport ScrollPane from '../zhn/ScrollPane';\r\nimport MenuPart from './MenuPart';\r\n\r\nconst S_SCROLL_DIV = {\r\n  overflowY: 'auto',\r\n  height: '92%',\r\n  //height: 'calc(100vh - 90px)',\r\n  paddingRight: 10\r\n};\r\n\r\nconst BrowserMenu = ({\r\n  menuItems,\r\n  rowClass,\r\n  refFirstItem\r\n}) => safeMap(menuItems, (menuPart, index) => (<MenuPart\r\n     key={index}\r\n     refFirstItem={index === 0 ? refFirstItem : void 0}\r\n     isInitClose={menuPart.isInitClose}\r\n     caption={menuPart.caption}\r\n     items={menuPart.items}\r\n     rowClass={rowClass}\r\n  />)\r\n);\r\n\r\nconst MenuBrowserDynamic = ({\r\n  isShowInitial,\r\n  caption,\r\n  rowClass,\r\n  browserType,\r\n  useMsBrowserDynamic,\r\n  onLoadMenu,\r\n  children\r\n}) => {\r\n  const _refIsLoaded = useRef(false)\r\n  , [\r\n    menuItems,\r\n    setMenuItems,\r\n    isShow,\r\n    _hShow,\r\n    _hHide,\r\n    _hKeyDown,\r\n    _refFirstItem\r\n  ] = useBrowser(isShowInitial)\r\n  , [\r\n    _hFocusElement,\r\n    _focusPrevElement\r\n  ] = useRecentFocusedElement();\r\n\r\n  useMsBrowserDynamic(msBrowserDynamic => {\r\n    if (msBrowserDynamic) {\r\n      if (msBrowserDynamic.browserType === browserType) {\r\n        const { menuItems } = msBrowserDynamic;\r\n        if (menuItems) {\r\n          setRefValue(_refIsLoaded, true)\r\n          setMenuItems([...menuItems])\r\n        } else {\r\n          _hShow()\r\n          _focusPrevElement()\r\n        }\r\n      }\r\n    }\r\n  })\r\n\r\n  /*eslint-disable react-hooks/exhaustive-deps */\r\n  useEffect(() => {\r\n    if (isShow && !getRefValue(_refIsLoaded)) {\r\n      onLoadMenu()\r\n    }\r\n  }, [isShow])\r\n  //onLoadMenu\r\n  /*eslint-enable react-hooks/exhaustive-deps */\r\n\r\n  return (\r\n    <Browser\r\n       isShow={isShow}\r\n       onKeyDown={_hKeyDown}\r\n    >\r\n      <CaptionRow\r\n         caption={caption}\r\n         onClose={_hHide}\r\n      />\r\n      <ScrollPane\r\n         style={S_SCROLL_DIV}\r\n         onFocusIn={_hFocusElement}\r\n      >\r\n        <BrowserMenu\r\n           menuItems={menuItems}\r\n           rowClass={rowClass}\r\n           refFirstItem={_refFirstItem}\r\n        />\r\n        {children}\r\n      </ScrollPane>\r\n    </Browser>\r\n  );\r\n};\r\n\r\nexport default MenuBrowserDynamic\r\n"],"mappings":"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","ignoreList":[]}