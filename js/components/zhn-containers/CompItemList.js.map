{"version":3,"file":"CompItemList.js","names":["_uiApi","require","_useMenuMore","_interopRequireDefault","_itemStore","_ModalSlider","_ModelMore","_ContainerCaption","_ScrollPane","_SvgHrzResize","_styleFn","_ContainerStyles","_jsxRuntime","RESIZE_INIT_WIDTH","RESIZE_MIN_WIDTH","RESIZE_MAX_WIDTH","DELTA","S_SCROLL","overflowY","height","paddingRight","S_BT_MORE","position","top","marginRight","_getWidth","style","parseInt","width","_toStyleWidth","_getElementStyle","element","_resizeTo","ref","getRefValue","_plusToWidth","w","_minusToWidth","CompItemList","_ref","caption","browserType","chartType","onRemoveAll","onCloseContainer","_refRootElement","useRef","_refScroll","state","setState","useState","isShow","configs","_MENU_MODEL","_isMenuMore","_toggleMenuMore","_showMenuMore","useMenuMore","crModelMore","onMinWidth","onInitialWidth","onPlusWidth","onMinusWidth","_hClose","useCallback","prevState","useEffect","getItemByType","useMsItem","msItem","close","chartCont","_scrollEl","scrollTop","_style","_className","S_INLINE_BLOCK","CL_SHOW_POPUP","S_NONE","jsxs","className","S_COMP_ITEM_LIST","children","jsx","default","CL_MENU_MORE","model","onClose","moreStyle","onMore","elementRef","initWidth","minWidth","maxWidth","refEl","_default","exports"],"sources":["../../../src/components/zhn-containers/CompItemList.jsx"],"sourcesContent":["import {\r\n  useRef,\r\n  useState,\r\n  useCallback,\r\n  useEffect,\r\n  getRefValue\r\n} from '../uiApi';\r\n\r\nimport useMenuMore from '../hooks/useMenuMore';\r\n\r\nimport {\r\n  getItemByType,\r\n  useMsItem\r\n} from '../../flux/itemStore';\r\n\r\nimport ModalSlider from '../zhn-modal-slider/ModalSlider';\r\nimport crModelMore from './ModelMore';\r\nimport ContainerCaption from '../zhn/ContainerCaption';\r\nimport ScrollPane from '../zhn/ScrollPane';\r\nimport SvgHrzResize from '../zhn-moleculs/SvgHrzResize';\r\n\r\nimport {\r\n  S_INLINE_BLOCK,\r\n  S_NONE,\r\n  CL_SHOW_POPUP,\r\n  CL_MENU_MORE\r\n} from '../styleFn';\r\nimport {\r\n  S_COMP_ITEM_LIST\r\n} from '../styles/ContainerStyles';\r\n\r\nconst RESIZE_INIT_WIDTH = 635\r\n, RESIZE_MIN_WIDTH = 375\r\n, RESIZE_MAX_WIDTH = 1200\r\n, DELTA = 10\r\n\r\n, S_SCROLL = {\r\n  overflowY: 'auto',\r\n  height: '92%',\r\n  paddingRight: 10\r\n}\r\n, S_BT_MORE = {\r\n  position: 'relative',\r\n  top: 3,\r\n  marginRight: 6\r\n};\r\n\r\nconst _getWidth = style =>\r\n  parseInt(style.width, 10) || RESIZE_INIT_WIDTH\r\n, _toStyleWidth = width => width + 'px'\r\n, _getElementStyle = element => {\r\n  const { style } = element || {};\r\n  return style || {};\r\n}\r\n, _resizeTo = (ref, width) => {\r\n  _getElementStyle(getRefValue(ref)).width = _toStyleWidth(width)\r\n}\r\n, _plusToWidth = ref => {\r\n  const style = _getElementStyle(getRefValue(ref))\r\n  , w = _getWidth(style) + DELTA;\r\n  if (w < RESIZE_MAX_WIDTH) {\r\n     style.width = _toStyleWidth(w)\r\n  }\r\n}\r\n, _minusToWidth = ref => {\r\n  const style = _getElementStyle(getRefValue(ref))\r\n  , w = _getWidth(style) - DELTA;\r\n  if (w > RESIZE_MIN_WIDTH) {\r\n    style.width = _toStyleWidth(w)\r\n  }\r\n};\r\n\r\nconst CompItemList = ({\r\n  caption,\r\n  browserType,\r\n  chartType,\r\n  onRemoveAll,\r\n  onCloseContainer\r\n}) => {\r\n  const _refRootElement = useRef()\r\n  , _refScroll = useRef()\r\n  , [\r\n    state,\r\n    setState\r\n  ] = useState(() => ({\r\n    isShow: false,\r\n    configs: [],\r\n    chartType\r\n  }))\r\n  , {\r\n    isShow,\r\n    configs\r\n  } = state\r\n  , [\r\n    _MENU_MODEL,\r\n    _isMenuMore,\r\n    _toggleMenuMore,\r\n    _showMenuMore\r\n  ] = useMenuMore(crModelMore, {\r\n    chartType,\r\n    onMinWidth: () => _resizeTo(_refRootElement, RESIZE_MIN_WIDTH),\r\n    onInitialWidth: () => _resizeTo(_refRootElement, RESIZE_INIT_WIDTH),\r\n    onPlusWidth: () => _plusToWidth(_refRootElement),\r\n    onMinusWidth: () => _minusToWidth(_refRootElement),\r\n    onRemoveAll\r\n  })\r\n  /*eslint-disable react-hooks/exhaustive-deps */\r\n  , _hClose = useCallback(() => {\r\n    onCloseContainer(chartType, browserType);\r\n    setState(prevState => ({\r\n      ...prevState,\r\n      isShow: false\r\n    }))\r\n  }, [])\r\n  // chartType, browserType, onCloseContainer\r\n  /*eslint-enable react-hooks/exhaustive-deps */\r\n\r\n  /*eslint-disable react-hooks/exhaustive-deps */\r\n  useEffect(() => {\r\n    setState(prevState => ({\r\n      ...prevState,\r\n      ...getItemByType(chartType)\r\n    }))\r\n  }, [])\r\n  // chartType\r\n  /*eslint-enable react-hooks/exhaustive-deps */\r\n  useMsItem(msItem => {\r\n    if (msItem) {\r\n      if (msItem.chartType === chartType && msItem.close) {\r\n        _hClose();\r\n      }\r\n      if (msItem.chartCont && msItem.chartCont.chartType === chartType) {\r\n        const _scrollEl = getRefValue(_refScroll)\r\n        if (_scrollEl) {\r\n          _scrollEl.scrollTop()\r\n        }\r\n        setState(prevState => ({\r\n          ...prevState,\r\n          ...msItem.chartCont\r\n        }))\r\n      }\r\n    }\r\n  })\r\n\r\n  const [_style, _className] = isShow\r\n    ? [S_INLINE_BLOCK, CL_SHOW_POPUP]\r\n    : [S_NONE];\r\n\r\n  return (\r\n    <div\r\n       ref={_refRootElement}\r\n       className={_className}\r\n       style={{...S_COMP_ITEM_LIST, ..._style}}\r\n    >\r\n      <ModalSlider\r\n        isShow={_isMenuMore}\r\n        className={CL_MENU_MORE}\r\n        model={_MENU_MODEL}\r\n        onClose={_toggleMenuMore}\r\n      />\r\n      <ContainerCaption\r\n         moreStyle={S_BT_MORE}\r\n         caption={caption}\r\n         onMore={_showMenuMore}\r\n         onClose={_hClose}\r\n      >\r\n        <SvgHrzResize\r\n          elementRef={_refRootElement}\r\n          initWidth={RESIZE_INIT_WIDTH}\r\n          minWidth={RESIZE_MIN_WIDTH}\r\n          maxWidth={RESIZE_MAX_WIDTH}\r\n        />\r\n      </ContainerCaption>\r\n      <ScrollPane\r\n        refEl={_refScroll}\r\n        style={S_SCROLL}\r\n      >\r\n        <div>\r\n          {configs}\r\n        </div>\r\n      </ScrollPane>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CompItemList\r\n"],"mappings":"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","ignoreList":[]}