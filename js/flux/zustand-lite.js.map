{"version":3,"file":"zustand-lite.js","names":["_objectIs","Object","is","_assign","assign","_createStoreImpl","createState","state","listeners","Set","setState","partial","replace","nextState","previousState","forEach","listener","getState","subscribe","add","delete","api","createStore","exports","subscribeWithSelector","fn","set","get","origSubscribe","selector","optListener","options","equalityFn","currentSlice","nextSlice","previousSlice","fireImmediately"],"sources":["../../src/flux/zustand-lite.js"],"sourcesContent":["\r\nconst _objectIs = Object.is;\r\nconst _assign = Object.assign;\r\n\r\nconst _createStoreImpl = (createState) => {\r\n  let state;\r\n\r\n  const listeners = /* @__PURE__ */ new Set();\r\n\r\n  const setState = (partial, replace) => {\r\n    const nextState = typeof partial === \"function\"\r\n      ? partial(state)\r\n      : partial;\r\n    if (!_objectIs(nextState, state)) {\r\n      const previousState = state;\r\n      state = (replace != null ? replace : (typeof nextState !== \"object\" || nextState === null))\r\n         ? nextState\r\n         : _assign({}, state, nextState);\r\n      listeners.forEach(listener => listener(state, previousState));\r\n    }\r\n  };\r\n\r\n  const getState = () => state;\r\n\r\n  const subscribe = (listener) => {\r\n    listeners.add(listener);\r\n    return () => listeners.delete(listener);\r\n  };\r\n\r\n  const api = {\r\n    getState,\r\n    setState,\r\n    subscribe\r\n  };\r\n  state = createState(setState, getState, api);\r\n  return api;\r\n};\r\n\r\nexport const createStore = (\r\n  createState\r\n) => createState\r\n  ? _createStoreImpl(createState)\r\n  : _createStoreImpl;\r\n\r\n\r\nexport const subscribeWithSelector = (fn) => {\r\n  return (set, get, api) => {\r\n    const origSubscribe = api.subscribe;\r\n    api.subscribe = (selector, optListener, options) => {\r\n      let listener = selector;\r\n      if (optListener) {\r\n        const equalityFn = (\r\n          options == null\r\n            ? void 0\r\n            : options.equalityFn\r\n          ) || _objectIs;\r\n        let currentSlice = selector(api.getState());\r\n        listener = (state) => {\r\n          const nextSlice = selector(state);\r\n          if (!equalityFn(currentSlice, nextSlice)) {\r\n            const previousSlice = currentSlice;\r\n            optListener(currentSlice = nextSlice, previousSlice);\r\n          }\r\n        };\r\n        if (options != null && options.fireImmediately) {\r\n          optListener(currentSlice, currentSlice);\r\n        }\r\n      }\r\n      return origSubscribe(listener);\r\n    };\r\n\r\n    return fn(set, get, api);\r\n  };\r\n};\r\n"],"mappings":";;;;AACA,MAAMA,SAAS,GAAGC,MAAM,CAACC,EAAE;AAC3B,MAAMC,OAAO,GAAGF,MAAM,CAACG,MAAM;AAE7B,MAAMC,gBAAgB,GAAIC,WAAW,IAAK;EACxC,IAAIC,KAAK;EAET,MAAMC,SAAS,GAAG,eAAgB,IAAIC,GAAG,CAAC,CAAC;EAE3C,MAAMC,QAAQ,GAAGA,CAACC,OAAO,EAAEC,OAAO,KAAK;IACrC,MAAMC,SAAS,GAAG,OAAOF,OAAO,KAAK,UAAU,GAC3CA,OAAO,CAACJ,KAAK,CAAC,GACdI,OAAO;IACX,IAAI,CAACX,SAAS,CAACa,SAAS,EAAEN,KAAK,CAAC,EAAE;MAChC,MAAMO,aAAa,GAAGP,KAAK;MAC3BA,KAAK,GAAG,CAACK,OAAO,IAAI,IAAI,GAAGA,OAAO,GAAI,OAAOC,SAAS,KAAK,QAAQ,IAAIA,SAAS,KAAK,IAAK,IACrFA,SAAS,GACTV,OAAO,CAAC,CAAC,CAAC,EAAEI,KAAK,EAAEM,SAAS,CAAC;MAClCL,SAAS,CAACO,OAAO,CAACC,QAAQ,IAAIA,QAAQ,CAACT,KAAK,EAAEO,aAAa,CAAC,CAAC;IAC/D;EACF,CAAC;EAED,MAAMG,QAAQ,GAAGA,CAAA,KAAMV,KAAK;EAE5B,MAAMW,SAAS,GAAIF,QAAQ,IAAK;IAC9BR,SAAS,CAACW,GAAG,CAACH,QAAQ,CAAC;IACvB,OAAO,MAAMR,SAAS,CAACY,MAAM,CAACJ,QAAQ,CAAC;EACzC,CAAC;EAED,MAAMK,GAAG,GAAG;IACVJ,QAAQ;IACRP,QAAQ;IACRQ;EACF,CAAC;EACDX,KAAK,GAAGD,WAAW,CAACI,QAAQ,EAAEO,QAAQ,EAAEI,GAAG,CAAC;EAC5C,OAAOA,GAAG;AACZ,CAAC;AAEM,MAAMC,WAAW,GACtBhB,WAAW,IACRA,WAAW,GACZD,gBAAgB,CAACC,WAAW,CAAC,GAC7BD,gBAAgB;AAACkB,OAAA,CAAAD,WAAA,GAAAA,WAAA;AAGd,MAAME,qBAAqB,GAAIC,EAAE,IAAK;EAC3C,OAAO,CAACC,GAAG,EAAEC,GAAG,EAAEN,GAAG,KAAK;IACxB,MAAMO,aAAa,GAAGP,GAAG,CAACH,SAAS;IACnCG,GAAG,CAACH,SAAS,GAAG,CAACW,QAAQ,EAAEC,WAAW,EAAEC,OAAO,KAAK;MAClD,IAAIf,QAAQ,GAAGa,QAAQ;MACvB,IAAIC,WAAW,EAAE;QACf,MAAME,UAAU,GAAG,CACjBD,OAAO,IAAI,IAAI,GACX,KAAK,CAAC,GACNA,OAAO,CAACC,UAAU,KACjBhC,SAAS;QAChB,IAAIiC,YAAY,GAAGJ,QAAQ,CAACR,GAAG,CAACJ,QAAQ,CAAC,CAAC,CAAC;QAC3CD,QAAQ,GAAIT,KAAK,IAAK;UACpB,MAAM2B,SAAS,GAAGL,QAAQ,CAACtB,KAAK,CAAC;UACjC,IAAI,CAACyB,UAAU,CAACC,YAAY,EAAEC,SAAS,CAAC,EAAE;YACxC,MAAMC,aAAa,GAAGF,YAAY;YAClCH,WAAW,CAACG,YAAY,GAAGC,SAAS,EAAEC,aAAa,CAAC;UACtD;QACF,CAAC;QACD,IAAIJ,OAAO,IAAI,IAAI,IAAIA,OAAO,CAACK,eAAe,EAAE;UAC9CN,WAAW,CAACG,YAAY,EAAEA,YAAY,CAAC;QACzC;MACF;MACA,OAAOL,aAAa,CAACZ,QAAQ,CAAC;IAChC,CAAC;IAED,OAAOS,EAAE,CAACC,GAAG,EAAEC,GAAG,EAAEN,GAAG,CAAC;EAC1B,CAAC;AACH,CAAC;AAACE,OAAA,CAAAC,qBAAA,GAAAA,qBAAA","ignoreList":[]}