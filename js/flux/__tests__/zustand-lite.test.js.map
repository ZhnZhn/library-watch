{"version":3,"file":"zustand-lite.test.js","names":["_zustandLite","require","describe","fn","createStore","test","params","store","_len","arguments","length","args","Array","_key","value","expect","toMatchInlineSnapshot","getState","set","count","inc","state","toBe","_","get","getState1","getState2","setState","setState1","v","setState2","subscribe","NaN","_onSubscribe","jest","not","toBeCalled","a","b","toEqual"],"sources":["../../../src/flux/__tests__/zustand-lite.test.js"],"sourcesContent":["import { createStore } from '../zustand-lite';\r\n\r\ndescribe(\"createStore\", () => {\r\n  const fn = createStore;\r\n\r\n  test('create a store', () => {\r\n    let params;\r\n    const store = fn((...args) => {\r\n      params = args;\r\n      return { value: null };\r\n    });\r\n\r\n    expect({ params, store }).toMatchInlineSnapshot(`\r\n      {\r\n        \"params\": [\r\n          [Function],\r\n          [Function],\r\n          {\r\n            \"getState\": [Function],\r\n            \"setState\": [Function],\r\n            \"subscribe\": [Function],\r\n          },\r\n        ],\r\n        \"store\": {\r\n          \"getState\": [Function],\r\n          \"setState\": [Function],\r\n          \"subscribe\": [Function],\r\n        },\r\n      }\r\n    `)\r\n  })\r\n\r\n  test('uses the store', () => {\r\n    const {\r\n      getState\r\n    } = fn(set => ({\r\n      count: 0,\r\n      inc: () => set(state => ({ count: state.count + 1 })),\r\n    }));\r\n\r\n    getState().inc()\r\n    expect(getState().count).toBe(1)\r\n  })\r\n\r\n  test('can get the store', () => {\r\n    const {\r\n      getState\r\n    } = fn((_, get) => ({\r\n      value: 1,\r\n      getState1: () => get(),\r\n      getState2: () => getState()\r\n    }));\r\n\r\n    expect(getState().getState1().value).toBe(1)\r\n    expect(getState().getState2().value).toBe(1)\r\n  })\r\n\r\n  test('can set the store', () => {\r\n    const {\r\n      getState,\r\n      setState\r\n    } = fn(set => ({\r\n      value: 1,\r\n      setState1: v => set(v),\r\n      setState2: v => setState(v)\r\n    }));\r\n\r\n    getState().setState1({ value: 2 })\r\n    expect(getState().value).toBe(2)\r\n\r\n    getState().setState2({ value: 3 })\r\n    expect(getState().value).toBe(3)\r\n  })\r\n\r\n\r\n  test('both NaN should not update', () => {\r\n    const {\r\n      setState,\r\n      subscribe\r\n    } = fn(() => NaN)\r\n    , _onSubscribe = jest.fn();\r\n\r\n    subscribe(_onSubscribe)\r\n    setState(NaN)\r\n    expect(_onSubscribe).not.toBeCalled()\r\n })\r\n\r\n  test('can set the store without merging', () => {\r\n    const {\r\n      getState,\r\n      setState\r\n    } = fn(() => ({ a: 1 }));\r\n\r\n    // Should override the state instead of merging.\r\n    setState({ b: 2 }, true)\r\n    expect(getState()).toEqual({ b: 2 })\r\n })\r\n\r\n  test('can set the object store to null', () => {\r\n    const {\r\n      getState,\r\n      setState\r\n    } = fn(() => ({ a: 1 }));\r\n\r\n    setState(null)\r\n    expect(getState()).toEqual(null)\r\n  })\r\n\r\n  test('can set the non-object store to null', () => {\r\n    const {\r\n      getState,\r\n      setState\r\n    } = fn(() => 'value');\r\n\r\n    setState(null)\r\n    expect(getState()).toEqual(null)\r\n  })\r\n\r\n  test('works with non-object state', () => {\r\n    const {\r\n      getState,\r\n      setState\r\n    } = fn(() => 1)\r\n    , inc = () => setState(v => v + 1);\r\n\r\n    inc()\r\n    expect(getState()).toBe(2)\r\n  })\r\n})\r\n"],"mappings":"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","ignoreList":[]}