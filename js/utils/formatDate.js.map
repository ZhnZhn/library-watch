{"version":3,"file":"formatDate.js","names":["_isTypeFn","require","PERIODS","PERIOD_LENGTH","length","PERIOD_LAST_INDEX","_crTimeAgo","diff","i","periodStr","periodMsl","v","Math","round","_formatMls","mls","nowMls","_nowMls","Date","now","_diff","abs","safeFormatMls","isNumber","exports","safeFormatSec","sec"],"sources":["../../src/utils/formatDate.js"],"sourcesContent":["import { isNumber } from './isTypeFn';\r\n\r\nconst PERIODS = [\r\n  ['just now', 999],\r\n  ['sec', 1000],\r\n  ['min', 60*1000],\r\n  ['hour', 3600*1000],\r\n  ['day', 24*3600*1000],\r\n  ['week', 7*24*3600*1000],\r\n  ['month', 30*24*3600*1000],\r\n  ['year', 365*24*3600*1000]\r\n]\r\n, PERIOD_LENGTH = PERIODS.length\r\n, PERIOD_LAST_INDEX = PERIOD_LENGTH - 1;\r\n\r\nconst _crTimeAgo = (\r\n  diff,\r\n  i\r\n) => {\r\n  const [periodStr, periodMsl] = PERIODS[i]\r\n  , v = Math.round(diff / periodMsl);\r\n  return `${v} ${periodStr}${v === 1 ? '' : 's'} ago`;\r\n};\r\n\r\nconst _formatMls = (\r\n  mls,\r\n  nowMls\r\n) => {\r\n  const _nowMls = nowMls || Date.now()\r\n  , _diff = Math.abs(mls - _nowMls);\r\n  for(let i=0; i<PERIOD_LENGTH; i++){\r\n    if (_diff < PERIODS[i][1]) {\r\n      return i === 0\r\n        ? PERIODS[0][0]\r\n        : _crTimeAgo(_diff, i-1);\r\n    }\r\n  }\r\n  return _crTimeAgo(_diff, PERIOD_LAST_INDEX);\r\n};\r\n\r\nexport const safeFormatMls = (\r\n  mls,\r\n  nowMls\r\n) => isNumber(mls)\r\n  ? _formatMls(mls, nowMls)\r\n  : ''\r\n\r\nexport const safeFormatSec = (\r\n  sec,\r\n  nowMls\r\n) => isNumber(sec)\r\n  ? _formatMls(sec*1000, nowMls)\r\n  : ''\r\n"],"mappings":";;;;AAAA,IAAAA,SAAA,GAAAC,OAAA;AAEA,MAAMC,OAAO,GAAG,CACd,CAAC,UAAU,EAAE,GAAG,CAAC,EACjB,CAAC,KAAK,EAAE,IAAI,CAAC,EACb,CAAC,KAAK,EAAE,EAAE,GAAC,IAAI,CAAC,EAChB,CAAC,MAAM,EAAE,IAAI,GAAC,IAAI,CAAC,EACnB,CAAC,KAAK,EAAE,EAAE,GAAC,IAAI,GAAC,IAAI,CAAC,EACrB,CAAC,MAAM,EAAE,CAAC,GAAC,EAAE,GAAC,IAAI,GAAC,IAAI,CAAC,EACxB,CAAC,OAAO,EAAE,EAAE,GAAC,EAAE,GAAC,IAAI,GAAC,IAAI,CAAC,EAC1B,CAAC,MAAM,EAAE,GAAG,GAAC,EAAE,GAAC,IAAI,GAAC,IAAI,CAAC,CAC3B;EACCC,aAAa,GAAGD,OAAO,CAACE,MAAM;EAC9BC,iBAAiB,GAAGF,aAAa,GAAG,CAAC;AAEvC,MAAMG,UAAU,GAAGA,CACjBC,IAAI,EACJC,CAAC,KACE;EACH,MAAM,CAACC,SAAS,EAAEC,SAAS,CAAC,GAAGR,OAAO,CAACM,CAAC,CAAC;IACvCG,CAAC,GAAGC,IAAI,CAACC,KAAK,CAACN,IAAI,GAAGG,SAAS,CAAC;EAClC,OAAO,GAAGC,CAAC,IAAIF,SAAS,GAAGE,CAAC,KAAK,CAAC,GAAG,EAAE,GAAG,GAAG,MAAM;AACrD,CAAC;AAED,MAAMG,UAAU,GAAGA,CACjBC,GAAG,EACHC,MAAM,KACH;EACH,MAAMC,OAAO,GAAGD,MAAM,IAAIE,IAAI,CAACC,GAAG,CAAC,CAAC;IAClCC,KAAK,GAAGR,IAAI,CAACS,GAAG,CAACN,GAAG,GAAGE,OAAO,CAAC;EACjC,KAAI,IAAIT,CAAC,GAAC,CAAC,EAAEA,CAAC,GAACL,aAAa,EAAEK,CAAC,EAAE,EAAC;IAChC,IAAIY,KAAK,GAAGlB,OAAO,CAACM,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;MACzB,OAAOA,CAAC,KAAK,CAAC,GACVN,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GACbI,UAAU,CAACc,KAAK,EAAEZ,CAAC,GAAC,CAAC,CAAC;IAC5B;EACF;EACA,OAAOF,UAAU,CAACc,KAAK,EAAEf,iBAAiB,CAAC;AAC7C,CAAC;AAEM,MAAMiB,aAAa,GAAGA,CAC3BP,GAAG,EACHC,MAAM,KACH,IAAAO,kBAAQ,EAACR,GAAG,CAAC,GACdD,UAAU,CAACC,GAAG,EAAEC,MAAM,CAAC,GACvB,EAAE;AAAAQ,OAAA,CAAAF,aAAA,GAAAA,aAAA;AAEC,MAAMG,aAAa,GAAGA,CAC3BC,GAAG,EACHV,MAAM,KACH,IAAAO,kBAAQ,EAACG,GAAG,CAAC,GACdZ,UAAU,CAACY,GAAG,GAAC,IAAI,EAAEV,MAAM,CAAC,GAC5B,EAAE;AAAAQ,OAAA,CAAAC,aAAA,GAAAA,aAAA","ignoreList":[]}