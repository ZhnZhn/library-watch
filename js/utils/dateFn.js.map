{"version":3,"file":"dateFn.js","names":["_formatDate","require","_isTypeFn","MIN_YEAR","_crNumber","str","parseInt","_crNumberMonth","_notInIntervalStrict","n","min","max","isNaN","_notInLengthMinMax","length","isStr","_isYmd","dateStr","nForecastDate","minYear","yStr","mStr","dStr","split","_nowYear","Date","getFullYear","isYmd","_str","trim","exports","_getYmdUTC","d","yearFromDate","getUTCFullYear","getUTCMonth","slice","getUTCDate","DF_YEAR_FROM_DATE","getFromDate","dNow","getToDate","mlsToDmy","mlsUTC","isNumber","isFinite","toString","mlsToYmd","dmy","m","y","ymdToMlsUTC","strDate","NaN","arr","UTC","ymdToUTCSecond","isWeekend","year","month","day","date","weekday","getUTCDay","crDateAgo","nowMls","_mls","safeFormatMls"],"sources":["../../src/utils/dateFn.js"],"sourcesContent":["import { safeFormatMls } from './formatDate';\r\n\r\nimport {\r\n\tisStr,\r\n\tisNumber,\r\n\tisNaN\r\n} from './isTypeFn';\r\n\r\nconst MIN_YEAR = 1999;\r\n\r\nconst _crNumber = (str) => parseInt(str, 10);\r\nconst _crNumberMonth = str => _crNumber(str) - 1;\r\n\r\nconst _notInIntervalStrict = (\r\n\tn,\r\n\tmin,\r\n\tmax\r\n) => isNaN(n) || (n<min || n>max);\r\nconst _notInLengthMinMax = (\r\n\tstr,\r\n\tlength,\r\n\tmin,\r\n\tmax\r\n) =>\r\n (isStr(str) && str.length !== length)\r\n || _notInIntervalStrict(parseInt(str, 10), min, max);\r\n\r\nconst _isYmd = (\r\n\tdateStr,\r\n\tnForecastDate=0,\r\n\tminYear=MIN_YEAR\r\n) => {\r\n\tconst [\r\n\t\tyStr,\r\n\t\tmStr,\r\n\t\tdStr\r\n\t] = dateStr.split('-')\r\n  , _nowYear = new Date().getFullYear();\r\n\r\n  return !(_notInLengthMinMax(yStr, 4, minYear, _nowYear + nForecastDate)\r\n    || _notInLengthMinMax(mStr, 2, 1, 12)\r\n    || _notInLengthMinMax(dStr, 2, 1, 31));\r\n};\r\n\r\n//YYYY-MM-DD valid format\r\nexport const isYmd = (\r\n  str,\r\n  nForecastDate,\r\n  minYear\r\n) => {\r\n  if (!isStr(str)) {\r\n\t  return false;\r\n\t}\r\n\tconst _str = str.trim();\r\n\tif (_str.length !== 10) {\r\n\t  return false;\r\n\t}\r\n\r\n  return _isYmd(_str, nForecastDate, minYear);\r\n}\r\n\r\nconst _getYmdUTC = (\r\n  d,\r\n  yearFromDate\r\n) => (d.getUTCFullYear()-yearFromDate)\r\n  + \"-\" + (\"0\"+(d.getUTCMonth() + 1)).slice(-2)\r\n  + \"-\" + (\"0\"+d.getUTCDate()).slice(-2);\r\n\r\nconst DF_YEAR_FROM_DATE = 2;\r\nexport const getFromDate = (\r\n  yearFromDate=DF_YEAR_FROM_DATE\r\n) => {\r\n\tconst dNow = new Date();\r\n\treturn _getYmdUTC(dNow, yearFromDate);\r\n}\r\n\r\nexport const getToDate = () => getFromDate(0)\r\n\r\nexport const mlsToDmy = (\r\n\tmlsUTC\r\n) => {\r\n\tif (!(isNumber(mlsUTC) && isFinite(mlsUTC))) {\r\n\t\treturn '';\r\n\t}\r\n  const d = new Date(mlsUTC);\r\n\tif (d.toString() === 'Invalid Date') {\r\n\t\treturn '';\r\n\t}\r\n  return (\"0\" + d.getUTCDate()).slice(-2)\r\n    + \"-\" + (\"0\" + (d.getUTCMonth() + 1) ).slice(-2)\r\n    + \"-\" + d.getUTCFullYear() ;\r\n}\r\n\r\nexport const mlsToYmd = (\r\n\tmlsUTC\r\n) => {\r\n\tconst dmy = mlsToDmy(mlsUTC);\r\n\tif (dmy === '') {\r\n\t\treturn '';\r\n\t}\r\n\tconst [\r\n\t\td,\r\n\t\tm,\r\n\t\ty\r\n\t] = dmy.split('-');\r\n\treturn `${y}-${m}-${d}`;\r\n}\r\n\r\nexport const ymdToMlsUTC = (\r\n\tstrDate\r\n) => {\r\n\tif (!isStr(strDate)) {\r\n\t\treturn NaN;\r\n\t}\r\n  const arr = strDate.split('-');\r\n  return Date.UTC(\r\n\t\tarr[0],\r\n\t\t_crNumberMonth(arr[1]),\r\n\t\tarr[2]\r\n\t);\r\n}\r\n\r\nexport const ymdToUTCSecond = (\r\n\tstrDate\r\n) => ymdToMlsUTC(strDate)/1000\r\n\r\n\r\n/* 1970-01-01 */\r\nexport const isWeekend = (\r\n\tyear,\r\n\tmonth,\r\n\tday\r\n) => {\r\n\tconst date = new Date(\r\n\t\tDate.UTC(\r\n\t\t\t _crNumber(year+''),\r\n\t\t\t _crNumberMonth(month+''),\r\n\t\t\t _crNumber(day+'')\r\n\t\t));\r\n\tif (isNaN(date)) {\r\n\t\treturn false;\r\n\t}\r\n  const weekday = date.getUTCDay();\r\n\r\n  return weekday === 0 || weekday === 6;\r\n}\r\n\r\n//YYYY-MM-DDTHH:MM:SSZ\r\nexport const crDateAgo = (str, nowMls) => {\r\n\tconst _mls = (str || '').trim().length === 20\r\n    ? Date.UTC(\r\n        str.slice(0,4),\r\n\t\t\t\t_crNumberMonth(str.slice(5,7)),\r\n\t\t\t\t_crNumber(str.slice(8,10)),\r\n\t\t\t\t_crNumber(str.slice(11,13)),\r\n\t\t\t\t_crNumber(str.slice(14,16))\r\n      )\r\n    : void 0;\r\n\treturn safeFormatMls(_mls, nowMls);\r\n}\r\n"],"mappings":"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","ignoreList":[]}