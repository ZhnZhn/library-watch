{"version":3,"file":"fetchJson.js","names":["LIMIT_REMAINING","fetchJson","_ref","uri","option","onFetch","onCheckResponse","onCompleted","onCatch","onFailed","_crErr","_nowTime","_doneOk","_doneFailure","fetch","then","response","status","headers","limitRemaining","get","json","catch","error","_default","exports","default"],"sources":["../../src/network/fetchJson.js"],"sourcesContent":["const LIMIT_REMAINING = 'X-RateLimit-Remaining';\r\n\r\nconst fetchJson = ({\r\n  uri,\r\n  option, onFetch, onCheckResponse, onCompleted,\r\n  onCatch, onFailed,\r\n  _crErr,\r\n  _nowTime, _doneOk, _doneFailure\r\n}) => fetch(uri)\r\n    .then(response => {\r\n      const { status, headers } = response;\r\n      option.limitRemaining = headers.get(LIMIT_REMAINING);\r\n      if (status>=200 && status<=400){\r\n        return response.json();\r\n      } else {\r\n         throw _crErr(response);\r\n      }\r\n    })\r\n    .then(json => {\r\n       if (onCheckResponse(json, option)){\r\n         onFetch({ json, option, onCompleted });\r\n       }\r\n       _doneOk(_nowTime)\r\n    })\r\n    .catch(error => {\r\n       onCatch({ error, option, onFailed })\r\n       _doneFailure(_nowTime)\r\n    });\r\n\r\nexport default fetchJson\r\n"],"mappings":";;;;AAAA,MAAMA,eAAe,GAAG,uBAAuB;AAE/C,MAAMC,SAAS,GAAGC,IAAA;EAAA,IAAC;IACjBC,GAAG;IACHC,MAAM;IAAEC,OAAO;IAAEC,eAAe;IAAEC,WAAW;IAC7CC,OAAO;IAAEC,QAAQ;IACjBC,MAAM;IACNC,QAAQ;IAAEC,OAAO;IAAEC;EACrB,CAAC,GAAAX,IAAA;EAAA,OAAKY,KAAK,CAACX,GAAG,CAAC,CACXY,IAAI,CAACC,QAAQ,IAAI;IAChB,MAAM;MAAEC,MAAM;MAAEC;IAAQ,CAAC,GAAGF,QAAQ;IACpCZ,MAAM,CAACe,cAAc,GAAGD,OAAO,CAACE,GAAG,CAACpB,eAAe,CAAC;IACpD,IAAIiB,MAAM,IAAE,GAAG,IAAIA,MAAM,IAAE,GAAG,EAAC;MAC7B,OAAOD,QAAQ,CAACK,IAAI,CAAC,CAAC;IACxB,CAAC,MAAM;MACJ,MAAMX,MAAM,CAACM,QAAQ,CAAC;IACzB;EACF,CAAC,CAAC,CACDD,IAAI,CAACM,IAAI,IAAI;IACX,IAAIf,eAAe,CAACe,IAAI,EAAEjB,MAAM,CAAC,EAAC;MAChCC,OAAO,CAAC;QAAEgB,IAAI;QAAEjB,MAAM;QAAEG;MAAY,CAAC,CAAC;IACxC;IACAK,OAAO,CAACD,QAAQ,CAAC;EACpB,CAAC,CAAC,CACDW,KAAK,CAACC,KAAK,IAAI;IACbf,OAAO,CAAC;MAAEe,KAAK;MAAEnB,MAAM;MAAEK;IAAS,CAAC,CAAC;IACpCI,YAAY,CAACF,QAAQ,CAAC;EACzB,CAAC,CAAC;AAAA;AAAC,IAAAa,QAAA,GAAAC,OAAA,CAAAC,OAAA,GAEQzB,SAAS","ignoreList":[]}